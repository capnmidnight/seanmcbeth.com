var Bn=Object.defineProperty;var Dn=(t,e,n)=>e in t?Bn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var o=(t,e,n)=>(Dn(t,typeof e!="symbol"?e+"":e,n),n),_t=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var de=(t,e,n)=>(_t(t,e,"read from private field"),n?n.call(t):e.get(t)),he=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ge=(t,e,n,r)=>(_t(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);function Hn(t){return t}function Mt(t,e,n){let r=0,i=t.length,a=Math.floor((r+i)/2),m=!1;for(;r<i&&a<t.length;){let R=t[a],h=f(R)?null:n(R);s(h)&&e<h?i=a:(e===h&&(m=!0),r=a+1),a=Math.floor((r+i)/2)}return m||(a+=.5),a}function $e(t,e,n){n=n||Hn;let r=n(e);return Mt(t,r,n)}function Y(t,e){return t.splice(e,1)[0]}function K(t){return t.splice(0)}function Ee(t,e,n){t.splice(n,0,e)}function I(t,e){let n=t.indexOf(e);return n>-1?(Y(t,n),!0):!1}function Pt(t,e,n,r){let i;return E(n)?i=n:M(n)&&(r=n),f(r)&&(r=!0),Un(t,e,i,r)}function Un(t,e,n,r){let i=$e(t,e,n),a=i%1===0;return i=i|0,(!a||r)&&Ee(t,e,i),i}var q=class{constructor(e){this.value=e;o(this,"_forward",new Array);o(this,"_reverse",new Array)}connectSorted(e,n){s(n)?(Pt(this._forward,e,r=>n(r.value)),e._reverse.push(this)):this.connectTo(e)}connectTo(e){this.connectAt(e,this._forward.length)}connectAt(e,n){Ee(this._forward,e,n),e._reverse.push(this)}disconnectFrom(e){I(this._forward,e),I(e._reverse,this)}isConnectedTo(e){return this._forward.indexOf(e)>=0||this._reverse.indexOf(e)>=0}flatten(){let e=new Set,n=[this];for(;n.length>0;){let r=n.shift();s(r)&&!e.has(r)&&(e.add(r),n.push(...r._forward))}return Array.from(e)}get _isEntryPoint(){return this._reverse.length===0}get _isExitPoint(){return this._forward.length===0}get isDisconnected(){return this._isEntryPoint&&this._isExitPoint}get isConnected(){return!this._isExitPoint||!this._isEntryPoint}get isTerminus(){return this._isEntryPoint||this._isExitPoint}get isInternal(){return!this._isEntryPoint&&!this._isExitPoint}};var be=class extends q{connectTo(e){super.connectTo(e)}connectAt(e,n){super.connectAt(e,n)}connectSorted(e,n){super.connectSorted(e,n)}disconnectFrom(e){super.disconnectFrom(e)}isConnectedTo(e){return super.isConnectedTo(e)}flatten(){return super.flatten()}get connections(){return this._forward}get isEntryPoint(){return this._isEntryPoint}get isExitPoint(){return this._isExitPoint}};var Ct=class{constructor(e){o(this,"items",new Map);o(this,"defaultItems",new Array);if(s(e))for(let[n,r]of e)this.add(n,r)}add(e,n){if(f(e))this.defaultItems.push(n);else{let r=this.items.get(e);f(r)&&this.items.set(e,r=[]),r.push(n)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let n of e)yield n}has(e){return s(e)?this.items.has(e):this.defaultItems.length>0}get(e){return f(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(f(e))return this.defaultItems.length;let n=this.get(e);return s(n)?n.length:0}get size(){let e=this.defaultItems.length;for(let n of this.items.values())e+=n.length;return e}delete(e){return f(e)?K(this.defaultItems).length>0:this.items.delete(e)}remove(e,n){if(f(e))I(this.defaultItems,n);else{let r=this.items.get(e);s(r)&&(I(r,n),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),K(this.defaultItems)}};var xe=class{constructor(){o(this,"listeners",new Map);o(this,"listenerOptions",new Map)}addEventListener(e,n,r){if(E(n)){let i=this.listeners.get(e);i||(i=new Array,this.listeners.set(e,i)),i.find(a=>a===n)||(i.push(n),r&&this.listenerOptions.set(n,r))}}removeEventListener(e,n){if(E(n)){let r=this.listeners.get(e);r&&this.removeListener(r,n)}}clearEventListeners(e){for(let[n,r]of this.listeners)if(f(e)||e===n){for(let i of r)this.removeEventListener(e,i);K(r),this.listeners.delete(n)}}removeListener(e,n){let r=e.findIndex(i=>i===n);r>=0&&(Y(e,r),this.listenerOptions.has(n)&&this.listenerOptions.delete(n))}dispatchEvent(e){let n=this.listeners.get(e.type);if(n)for(let r of n){let i=this.listenerOptions.get(r);s(i)&&!M(i)&&i.once&&this.removeListener(n,r),r.call(this,e)}return!e.defaultPrevented}};var G=class{constructor(e,n,r=!0){o(this,"promise");o(this,"_resolve",null);o(this,"_reject",null);o(this,"_result",null);o(this,"_error",null);o(this,"_started",!1);o(this,"_finished",!1);o(this,"resolve",null);o(this,"reject",null);let i=Te,a=Te;E(e)&&(i=e),E(n)&&(a=n),M(e)?r=e:M(n)&&(r=n),this.resolve=m=>{s(this._resolve)&&this._resolve(m)},this.reject=m=>{s(this._reject)&&this._reject(m)},this.promise=new Promise((m,R)=>{this._resolve=h=>{i(h)&&(this._result=h,this._finished=!0,m(h))},this._reject=h=>{a(h)&&(this._error=h,this._finished=!0,R(h))}}),r&&this.start()}get result(){if(s(this.error))throw this.error;return this._result}get error(){return this._error}get started(){return this._started}get finished(){return this._finished}start(){this._started=!0}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};function It(t,e){return"on"+e in t}function je(t,e,n,...r){f(r)&&(r=[]);let i;if(z(n)?r.unshift(n):L(n)&&(i=n),!(t instanceof xe)){if(!It(t,e))throw new X(`Target does not have a ${e} rejection event`);for(let T of r)if(!It(t,T))throw new X(`Target does not have a ${T} rejection event`)}let a=new G;if(L(i)){let T=setTimeout(a.reject,i,`'${e}' has timed out.`);a.finally(clearTimeout.bind(globalThis,T))}let m=(T,St)=>{t.addEventListener(T,St),a.finally(()=>t.removeEventListener(T,St))},R=T=>a.resolve(T),h=T=>a.reject(T);m(e,R);for(let T of r)m(T,h);return a}var Lt=class{constructor(e,n,r){o(this,"promise");o(this,"callback",null);this.promise=new Promise((i,a)=>{this.callback=(...m)=>{e(...m)?i(n(...m)):a(r(...m))}})}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var X=class extends Error{constructor(n,r=null){super(n);this.innerError=r}};var zn=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,ve=navigator.userAgent.match(zn),ye=!!ve,ss=ye&&{major:parseFloat(ve[1]),minor:parseFloat(ve[2]),patch:parseFloat(ve[3])},us=ye&&/pacific/i.test(navigator.userAgent),as=ye&&/quest/i.test(navigator.userAgent),ls=ye&&/quest 2/i.test(navigator.userAgent);var cs=!("Document"in globalThis);var $n=298.257223563,jn=6378137;var We=1/$n,we=1-We,l=We/(2-We),ms=jn/(1+l)*(1+l*l/4+l*l*l*l/64),Re=Math.sqrt(1-we*we),v=1-we*we,fs=Re*Re/(1-Re*Re),ds=1-v*(.25+v*(3/64+5*v/256)),hs=v*(3/8+v*(3/32+45*v/1024)),gs=v*v*(15/256+v*45/1024),Es=v*v*v*(35/3072),bs=[l/2-2*l*l/3+37*l*l*l/96,l*l/48+l*l*l/15,17*l*l*l/480],xs=[2*l-2*l*l/3,7*l*l/3-8*l*l*l/5,56*l*l*l/15];function Te(){return!0}var Ks=2*Math.PI;function Ot(t,e,n){return(1-n)*t+n*e}function J(t,e,n){return typeof t===e||t instanceof n}function E(t){return J(t,"function",Function)}function z(t){return J(t,"string",String)}function M(t){return J(t,"boolean",Boolean)}function L(t){return J(t,"number",Number)}function A(t){return s(t)&&J(t,"object",Object)}function Ye(t,e){throw new Error((e||"Unexpected object: ")+t)}function f(t){return t==null}function s(t){return!f(t)}function qe(t,e){let n=globalThis,r=n[t];if(f(r)){if(f(e))throw new Error(`No value ${t} found`);r=e(),n[t]=r}return r}var Xe=class{constructor(){o(this,"t",0);o(this,"dt",0);o(this,"sdt",0);o(this,"fps",0)}set(e,n){this.t=e,this.dt=n,this.sdt=Ot(this.sdt,n,.01),n>0&&(this.fps=1e3/n)}},Se=class extends Xe{constructor(){super(),Object.seal(this)}};var Q,Z=class{constructor(e){o(this,"timer",null);o(this,"onTick");o(this,"lt",-1);o(this,"tickHandlers",new Array);he(this,Q,null);this.targetFPS=e;let n=new Se,r=0;this.onTick=i=>{this.lt>=0&&(r=i-this.lt,n.set(i,r),this.tick(n)),this.lt=i}}get targetFPS(){return de(this,Q)}set targetFPS(e){ge(this,Q,e)}addTickHandler(e){this.tickHandlers.push(e)}removeTickHandler(e){I(this.tickHandlers,e)}tick(e){for(let n of this.tickHandlers)n(e)}restart(){this.stop(),this.start()}get isRunning(){return this.timer!=null}stop(){this.timer=null,this.lt=-1}get targetFrameTime(){return 1e3/this.targetFPS}};Q=new WeakMap;function Je(t){return s(t)&&t.length>0?parseFloat(t):null}var At=class{constructor(e,n){o(this,"_url",null);o(this,"_base");o(this,"_protocol",null);o(this,"_host",null);o(this,"_hostName",null);o(this,"_userName",null);o(this,"_password",null);o(this,"_port",null);o(this,"_pathName",null);o(this,"_hash",null);o(this,"_query",new Map);e!==void 0&&(this._url=new URL(e,n),this.rehydrate())}rehydrate(){s(this._protocol)&&this._protocol!==this._url.protocol&&(this._url.protocol=this._protocol),s(this._host)&&this._host!==this._url.host&&(this._url.host=this._host),s(this._hostName)&&this._hostName!==this._url.hostname&&(this._url.hostname=this._hostName),s(this._userName)&&this._userName!==this._url.username&&(this._url.username=this._userName),s(this._password)&&this._password!==this._url.password&&(this._url.password=this._password),s(this._port)&&this._port.toFixed(0)!==this._url.port&&(this._url.port=this._port.toFixed(0)),s(this._pathName)&&this._pathName!==this._url.pathname&&(this._url.pathname=this._pathName),s(this._hash)&&this._hash!==this._url.hash&&(this._url.hash=this._hash);for(let[e,n]of this._query)this._url.searchParams.set(e,n);this._protocol=this._url.protocol,this._host=this._url.host,this._hostName=this._url.hostname,this._userName=this._url.username,this._password=this._url.password,this._port=Je(this._url.port),this._pathName=this._url.pathname,this._hash=this._url.hash,this._url.searchParams.forEach((e,n)=>this._query.set(n,e))}refresh(){if(this._url===null){if(s(this._protocol)&&(s(this._host)||s(this._hostName))){if(s(this._host))return this._url=new URL(`${this._protocol}//${this._host}`,this._base),this._port=Je(this._url.port),this.rehydrate(),!1;if(s(this._hostName))return this._url=new URL(`${this._protocol}//${this._hostName}`,this._base),this.rehydrate(),!1}else if(s(this._pathName)&&s(this._base))return this._url=new URL(this._pathName,this._base),this.rehydrate(),!1}return s(this._url)}base(e){if(this._url!==null)throw new Error("Cannot redefine base after defining the protocol and domain");return this._base=e,this.refresh(),this}protocol(e){return this._protocol=e,this.refresh()&&(this._url.protocol=e),this}host(e){return this._host=e,this.refresh()&&(this._url.host=e,this._hostName=this._url.hostname,this._port=Je(this._url.port)),this}hostName(e){return this._hostName=e,this.refresh()&&(this._url.hostname=e,this._host=`${this._url.hostname}:${this._url.port}`),this}port(e){return this._port=e,this.refresh()&&(this._url.port=e.toFixed(0),this._host=`${this._url.hostname}:${this._url.port}`),this}userName(e){return this._userName=e,this.refresh()&&(this._url.username=e),this}password(e){return this._password=e,this.refresh()&&(this._url.password=e),this}path(e){return this._pathName=e,this.refresh()&&(this._url.pathname=e),this}pathPop(e){return e=e||/\/[^\/]+\/?$/,this.path(this._pathName.replace(e,""))}pathPush(e){let n=this._pathName;return n.endsWith("/")||(n+="/"),n+=e,this.path(n)}query(e,n){return this._query.set(e,n),this.refresh()&&this._url.searchParams.set(e,n),this}hash(e){return this._hash=e,this.refresh()&&(this._url.hash=e),this}toURL(){return this._url}toString(){return this._url.href}[Symbol.toStringTag](){return this.toString()}};function Ze(t){let e=new Map;for(let[n,r]of t)e.set(r,n);return e}var Xn=new Map([[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]]),Jn=new Map([[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]]),Xa=Ze(Xn),Ja=Ze(Jn);var kt=304.79999999999995,Qa=kt*3,Zn=10*100,Qn=kt*16.5,er=Qn*40,el=Zn*1e3,tl=er*8,Ft=2.54*4,Vt=Ft*3,nl=Vt*3,tr=Vt*16.5,nr=tr*40,rl=100*1e3,ol=nr*8,Qe=4*3,rr=Qe*3,et=100/2.54,or=Qe*16.5,ir=or*40,il=et*1e3,sl=ir*8,ul=3*3,sr=100/Ft,ur=3*16.5,ar=ur*40,al=sr*1e3,ll=ar*8,Bt=et/Qe,lr=16.5*40,cl=Bt*1e3,pl=lr*8,cr=et/rr,pr=16.5/3,mr=pr*40,ml=cr*1e3,fl=mr*8,Dt=16.5/Bt,Ht=Dt*40,dl=Ht*8,hl=1e3/Dt,gl=40*8,fr=1e3/Ht,El=8/fr;var k=class{constructor(e,n,r,...i){this.key=e;this.value=n;this.bySetAttribute=r;this.tags=i.map(a=>a.toLocaleUpperCase()),Object.freeze(this)}applyToElement(e){let n=this.key.startsWith("data-");if(!(this.tags.length===0||this.tags.indexOf(e.tagName)>-1||n))console.warn(`Element ${e.tagName} does not support Attribute ${this.key}`);else if(n){let i=this.key.substring(5);e.dataset[i]=this.value}else this.key==="style"?Object.assign(e.style,this.value):this.key==="classList"?this.value.forEach(i=>e.classList.add(i)):this.bySetAttribute?e.setAttribute(this.key,this.value):this.key in e?e[this.key]=this.value:this.value===!1?e.removeAttribute(this.key):this.value===!0?e.setAttribute(this.key,""):e.setAttribute(this.key,this.value)}};function w(t){return new k("className",t,!1)}function O(t){return new k("id",t,!1)}function Ut(t){return z(t)||(t=t.value),new k("type",t,!1,"button","input","command","embed","link","object","script","source","style","menu")}var p=class{constructor(e,n){this.key=e;this.value=n;this.name=e.replace(/[A-Z]/g,r=>`-${r.toLocaleLowerCase()}`)}applyToElement(e){e.style[this.key]=this.value}},tt=class{constructor(...e){this.rest=e}applyToElement(e){for(let n of this.rest)n.applyToElement(e)}};function _e(...t){return new tt(...t)}function $(t){return new p("backgroundColor",t)}function rt(...t){return new p("backgroundImage",t.join(", "))}function ot(t){return new p("border",t)}function Kt(t){return new p("borderBottomLeftRadius",t)}function Gt(t){return new p("borderBottomRightRadius",t)}function Me(t){return new p("borderRadius",t)}function zt(t){return new p("borderTopLeftRadius",t)}function $t(t){return new p("borderTopRightRadius",t)}function jt(t){return new p("boxShadow",t)}function ee(t){return new p("color",t)}function F(t){return new p("display",t)}function Pe(t){return new p("fontFamily",t)}function it(t){return new p("fontSize",t)}function st(t){return new p("fontWeight",t)}function V(t){return new p("height",t)}function ut(t){return new p("left",t)}function at(t){return new p("margin",t)}function Wt(t){return new p("marginLeft",t)}function Yt(t){return new p("marginRight",t)}function qt(t){return new p("marginTop",t)}function lt(t){return new p("overflow",t)}function te(...t){return new p("padding",t.join(" "))}function Xt(t){return new p("pointerEvents",t)}function ct(t){return new p("position",t)}function Jt(t){return new p("textTransform",t)}function ne(t){return new p("top",t)}function Zt(t){return new p("transform",t)}function B(t){return new p("width",t)}function re(t){return new p("zIndex",L(t)?t.toFixed(0):t)}var nt=class{constructor(e,n){this.selector=e;this.props=n}apply(e){let n=this.props.map(r=>`${r.name}: ${r.value};`).join("");e.insertRule(`${this.selector} {${n}}`,e.cssRules.length)}};function b(t,...e){return new nt(t,e)}function Qt(t){return A(t)?t.element instanceof Node:!1}function dr(t){return A(t)&&"elements"in t&&t.elements instanceof Array}function pt(t){return Qt(t)?t.element:t}function hr(t){return A(t)&&"applyToElement"in t&&E(t.applyToElement)}function oe(t,...e){t=pt(t);for(let n of e)s(n)&&(n instanceof Node?t.append(n):Qt(n)?t.append(pt(n)):dr(n)?t.append(...n.elements.map(pt)):hr(n)?n.applyToElement(t):t.append(document.createTextNode(n.toLocaleString())));return t}function Ce(t){return document.querySelector(t)}function Ie(t,...e){let n=null;for(let r of e)if(r instanceof k&&r.key==="id"){n=document.getElementById(r.value);break}return n==null&&(n=document.createElement(t)),oe(n,...e),n}function gr(...t){return Ie("button",...t)}function en(...t){return gr(...t,Ut("button"))}function S(...t){return Ie("div",...t)}function d(...t){return Ie("p",...t)}function tn(...t){return Ie("span",...t)}function nn(...t){let e=document.createElement("style");document.head.append(e);for(let n of t)n.apply(e.sheet);return e}var ie=class{constructor(e,n,r){this.name=e;this.callback=n;if(!E(n))throw new Error("A function instance is required for this parameter");this.opts=r,Object.freeze(this)}applyToElement(e){this.add(e)}add(e){e.addEventListener(this.name,this.callback,this.opts)}remove(e){e.removeEventListener(this.name,this.callback)}};function rn(t,e){return new ie("click",t,e)}function on(t,e){return new ie("mouseout",t,e)}function sn(t,e){return new ie("touchstart",t,e)}function Le(t,e){return t.splice(e,1)[0]}function se(t){return t.splice(0)}function Oe(t,e){let n=e!=null?1:0,r=Math.floor(Math.random()*(t.length+n))-n;return r<0?e:t[r]}function j(t,e){let n=t.indexOf(e);return n>-1?(Le(t,n),!0):!1}var un=class{constructor(e){this.items=new Map;this.defaultItems=new Array;if(u(e))for(let[n,r]of e)this.add(n,r)}add(e,n){if(g(e))this.defaultItems.push(n);else{let r=this.items.get(e);g(r)&&this.items.set(e,r=[]),r.push(n)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let n of e)yield n}has(e){return u(e)?this.items.has(e):this.defaultItems.length>0}get(e){return g(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(g(e))return this.defaultItems.length;let n=this.get(e);return u(n)?n.length:0}get size(){let e=this.defaultItems.length;for(let n of this.items.values())e+=n.length;return e}delete(e){return g(e)?se(this.defaultItems).length>0:this.items.delete(e)}remove(e,n){if(g(e))j(this.defaultItems,n);else{let r=this.items.get(e);u(r)&&(j(r,n),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),se(this.defaultItems)}};var ae=class{constructor(e,n,r=!0){this._resolve=null;this._reject=null;this._result=null;this._error=null;this._started=!1;this._finished=!1;this.resolve=null;this.reject=null;let i=Ne,a=Ne;D(e)&&(i=e),D(n)&&(a=n),ue(e)?r=e:ue(n)&&(r=n),this.resolve=m=>{u(this._resolve)&&this._resolve(m)},this.reject=m=>{u(this._reject)&&this._reject(m)},this.promise=new Promise((m,R)=>{this._resolve=h=>{i(h)&&(this._result=h,this._finished=!0,m(h))},this._reject=h=>{a(h)&&(this._error=h,this._finished=!0,R(h))}}),r&&this.start()}get result(){if(u(this.error))throw this.error;return this._result}get error(){return this._error}get started(){return this._started}get finished(){return this._finished}start(){this._started=!0}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var ln=class{constructor(e,n,r){this.callback=null;this.promise=new Promise((i,a)=>{this.callback=(...m)=>{e(...m)?i(n(...m)):a(r(...m))}})}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var yr=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,Ae=navigator.userAgent.match(yr),ke=!!Ae,hm=ke&&{major:parseFloat(Ae[1]),minor:parseFloat(Ae[2]),patch:parseFloat(Ae[3])},gm=ke&&/pacific/i.test(navigator.userAgent),Em=ke&&/quest/i.test(navigator.userAgent),bm=ke&&/quest 2/i.test(navigator.userAgent);var xm=!("Document"in globalThis);var Rr=298.257223563,wr=6378137;var mt=1/Rr,Ve=1-mt,c=mt/(2-mt),vm=wr/(1+c)*(1+c*c/4+c*c*c*c/64),Fe=Math.sqrt(1-Ve*Ve),y=1-Ve*Ve,ym=Fe*Fe/(1-Fe*Fe),Rm=1-y*(.25+y*(3/64+5*y/256)),wm=y*(3/8+y*(3/32+45*y/1024)),Sm=y*y*(15/256+y*45/1024),_m=y*y*y*(35/3072),Mm=[c/2-2*c*c/3+37*c*c*c/96,c*c/48+c*c*c/15,17*c*c*c/480],Pm=[2*c-2*c*c/3,7*c*c/3-8*c*c*c/5,56*c*c*c/15];function Ne(){return!0}var Jm=2*Math.PI;function pn(t,e,n){return(1-n)*t+n*e}function mn(t,e,n){return typeof t===e||t instanceof n}function D(t){return mn(t,"function",Function)}function ue(t){return mn(t,"boolean",Boolean)}function g(t){return t==null}function u(t){return!g(t)}var Cr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ";function fn(t,e){if(t<0)throw new Error("Length must be greater than 0");g(e)&&(e=Cr);let n="";for(let r=0;r<t;++r){let i=Math.floor(Math.random()*e.length);n+=e[i]}return n}var ft=class{constructor(){this.t=0;this.dt=0;this.sdt=0;this.fps=0}set(e,n){this.t=e,this.dt=n,this.sdt=pn(this.sdt,n,.01),n>0&&(this.fps=1e3/n)}},Be=class extends ft{constructor(){super(),Object.seal(this)}};var ce,le=class{constructor(e){this.timer=null;this.lt=-1;this.tickHandlers=new Array;he(this,ce,null);this.targetFPS=e;let n=new Be,r=0;this.onTick=i=>{this.lt>=0&&(r=i-this.lt,n.set(i,r),this.tick(n)),this.lt=i}}get targetFPS(){return de(this,ce)}set targetFPS(e){ge(this,ce,e)}addTickHandler(e){this.tickHandlers.push(e)}removeTickHandler(e){j(this.tickHandlers,e)}tick(e){for(let n of this.tickHandlers)n(e)}restart(){this.stop(),this.start()}get isRunning(){return this.timer!=null}stop(){this.timer=null,this.lt=-1}get targetFrameTime(){return 1e3/this.targetFPS}};ce=new WeakMap;function dt(t){return u(t)&&t.length>0?parseFloat(t):null}var dn=class{constructor(e,n){this._url=null;this._base=void 0;this._protocol=null;this._host=null;this._hostName=null;this._userName=null;this._password=null;this._port=null;this._pathName=null;this._hash=null;this._query=new Map;e!==void 0&&(this._url=new URL(e,n),this.rehydrate())}rehydrate(){u(this._protocol)&&this._protocol!==this._url.protocol&&(this._url.protocol=this._protocol),u(this._host)&&this._host!==this._url.host&&(this._url.host=this._host),u(this._hostName)&&this._hostName!==this._url.hostname&&(this._url.hostname=this._hostName),u(this._userName)&&this._userName!==this._url.username&&(this._url.username=this._userName),u(this._password)&&this._password!==this._url.password&&(this._url.password=this._password),u(this._port)&&this._port.toFixed(0)!==this._url.port&&(this._url.port=this._port.toFixed(0)),u(this._pathName)&&this._pathName!==this._url.pathname&&(this._url.pathname=this._pathName),u(this._hash)&&this._hash!==this._url.hash&&(this._url.hash=this._hash);for(let[e,n]of this._query)this._url.searchParams.set(e,n);this._protocol=this._url.protocol,this._host=this._url.host,this._hostName=this._url.hostname,this._userName=this._url.username,this._password=this._url.password,this._port=dt(this._url.port),this._pathName=this._url.pathname,this._hash=this._url.hash,this._url.searchParams.forEach((e,n)=>this._query.set(n,e))}refresh(){if(this._url===null){if(u(this._protocol)&&(u(this._host)||u(this._hostName))){if(u(this._host))return this._url=new URL(`${this._protocol}//${this._host}`,this._base),this._port=dt(this._url.port),this.rehydrate(),!1;if(u(this._hostName))return this._url=new URL(`${this._protocol}//${this._hostName}`,this._base),this.rehydrate(),!1}else if(u(this._pathName)&&u(this._base))return this._url=new URL(this._pathName,this._base),this.rehydrate(),!1}return u(this._url)}base(e){if(this._url!==null)throw new Error("Cannot redefine base after defining the protocol and domain");return this._base=e,this.refresh(),this}protocol(e){return this._protocol=e,this.refresh()&&(this._url.protocol=e),this}host(e){return this._host=e,this.refresh()&&(this._url.host=e,this._hostName=this._url.hostname,this._port=dt(this._url.port)),this}hostName(e){return this._hostName=e,this.refresh()&&(this._url.hostname=e,this._host=`${this._url.hostname}:${this._url.port}`),this}port(e){return this._port=e,this.refresh()&&(this._url.port=e.toFixed(0),this._host=`${this._url.hostname}:${this._url.port}`),this}userName(e){return this._userName=e,this.refresh()&&(this._url.username=e),this}password(e){return this._password=e,this.refresh()&&(this._url.password=e),this}path(e){return this._pathName=e,this.refresh()&&(this._url.pathname=e),this}pathPop(e){return e=e||/\/[^\/]+\/?$/,this.path(this._pathName.replace(e,""))}pathPush(e){let n=this._pathName;return n.endsWith("/")||(n+="/"),n+=e,this.path(n)}query(e,n){return this._query.set(e,n),this.refresh()&&this._url.searchParams.set(e,n),this}hash(e){return this._hash=e,this.refresh()&&(this._url.hash=e),this}toURL(){return this._url}toString(){return this._url.href}[Symbol.toStringTag](){return this.toString()}};function ht(t){let e=new Map;for(let[n,r]of t)e.set(r,n);return e}var Ir=new Map([[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]]),Lr=new Map([[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]]),uh=ht(Ir),ah=ht(Lr);var hn=304.79999999999995,ch=hn*3,Or=10*100,Nr=hn*16.5,Ar=Nr*40,ph=Or*1e3,mh=Ar*8,gn=2.54*4,En=gn*3,fh=En*3,kr=En*16.5,Fr=kr*40,dh=100*1e3,hh=Fr*8,gt=4*3,Vr=gt*3,Et=100/2.54,Br=gt*16.5,Dr=Br*40,gh=Et*1e3,Eh=Dr*8,bh=3*3,Hr=100/gn,Ur=3*16.5,Kr=Ur*40,xh=Hr*1e3,Th=Kr*8,bn=Et/gt,Gr=16.5*40,vh=bn*1e3,yh=Gr*8,zr=Et/Vr,$r=16.5/3,jr=$r*40,Rh=zr*1e3,wh=jr*8,xn=16.5/bn,Tn=xn*40,Sh=Tn*8,_h=1e3/xn,Mh=40*8,Wr=1e3/Tn,Ph=8/Wr;var vn=["change","click","contextmenu","dblclick","mouseup","pointerup","reset","submit","touchend"];function yn(t,e){let n=e||(async()=>!0),r=async i=>{if(i.isTrusted&&await n()){for(let a of vn)window.removeEventListener(a,r);await t()}};for(let i of vn)window.addEventListener(i,r)}var Yr="AudioContext"in globalThis,wn=Yr&&"AudioListener"in globalThis,ig=wn&&"setPosition"in AudioListener.prototype,sg=wn&&"positionX"in AudioListener.prototype,ug=E(HTMLMediaElement.prototype.captureStream)||E(HTMLMediaElement.prototype.mozCaptureStream);var Rn=qe("Juniper:Audio:connections",()=>new Map),Sn=qe("Juniper:Audio:names",()=>new Map);function qr(t,e){Sn.set(e,t)}function Xr(){let t=new Map;function e(n){t.has(n)||t.set(n,new be(n))}for(let n of Sn.keys())e(n);for(let[n,r]of Rn){e(n);for(let i of r)e(i)}for(let[n,r]of Rn){let i=t.get(n);for(let a of r)t.has(a)&&i.connectTo(t.get(a))}return Array.from(t.values())}globalThis.getAudioGraph=Xr;async function _n(t){if(qr("speakers",t.destination),t.state!=="running")if(t.state==="closed")await t.resume();else if(t.state==="suspended"){let e=je(t,"statechange");yn(()=>t.resume()),await e}else Ye(t.state)}document.title="No More Jabber Yabs: The Game";nn(b("html, body, .cloud, .cloud-bit, .frowny, .shadow, .boop, .beam, .subBeam, .endMessage, #scoreBox",ct("absolute")),b("html, body",V("100%"),B("100%"),te(0),at(0),ot(0),lt("hidden")),b("body",Pe("sans-serif"),$("hsl(200, 50%, 75%)"),rt("linear-gradient(hsl(200, 50%, 50%), hsl(200, 20%, 75%) 75%, hsl(100, 75%, 50%) 75%, hsl(100, 100%, 20%))")),b("#scoreBox, .endMessage, .frowny, #instructions, #starter",it("24pt")),b("#scoreBox",F("none"),ee("white"),ne(0),ut(0),te("1em")),b(".endMessage",F("none"),te("1em"),ne(0),re(9001),Xt("none"),ee("white")),b(".cloud-bit",$("white"),B("100px"),V("50px"),Gt("25px"),Kt("50px"),$t("12.5px"),zt("6.25px")),b(".frowny",Pe("fixedsys, monospace"),te("5px"),ot("solid 2px black"),Me("10px"),Zt("rotate(90deg)"),B("50px"),V("50px"),lt("hidden")),b(".shadow",B("45px"),V("10px"),Me("5px"),rt("radial-gradient(black, transparent)"),$("grey")),b(".boop",F("none"),ee("white"),Jt("uppercase"),Pe("sans-serif"),st("bold"),it("10pt"),re(9001)),b(".beam, .subBeam",F("none"),$("red"),jt("0 0 25px red"),ut("0")),b(".beam",ne("0"),B("50px"),V("50px"),Me("50%")),b(".subBeam",ne("50%"),V("2000px")),b("#instructions, #starter",ct("relative"),F("none"),st("bold"),Wt("auto"),Yt("auto"),qt("3em"),B("20em"),re(9001)));function De(){return tn(w("pointDisplay"),0)}oe(document.body,en(O("starter"),"Start",rn(()=>U.resume())),S(O("instructions"),"Go ahead, click and hold the mouse"),S(O("scoreBox"),"GET EM: ",De()),S(O("message0"),w("endMessage"),d("You have killed everyone. You did it. Just you. Noone else."),d("And why have you done this? Because you were ordered to? The pursuit of points?"),d("You got your points. All ",De()," of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),d("For no reason whatsoever, you have committed genocide against another race of people. Congratulations."),d("Hitler.")),S(O("message1"),w("endMessage"),d("You have killed almost everyone. Their bodies are strewn about on the ground they once called their home."),d("There is but one person left. Did you spare them out of mercy? Or have you left them, devoid of personal contact, alone, surrounded by the burned and rotting bodies of their former loved ones, to serve as witness to your terrible deeds?"),d("And why have you done this? Because you were ordered to? The pursuit of points?"),d("You got your points. All ",De(),"  of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),d("You are sick.")),S(O("message2"),w("endMessage"),d("You have killed almost everyone. Their bodies are strewn about on the ground they once called their home."),d("There are only two people left. Did you spare them out of mercy? Or have you left them, surrounded by the burned and rotting bodies of their former loved ones, to repopulate their world together, to serve as witness to your terrible deeds to future generations?"),d("And why have you done this? Because you were ordered to? The pursuit of points?"),d("You got your points. All ",De(),"  of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),d("I...I don't understand you.")),S(O("messageN"),w("endMessage"),_e(ee("black")),d('"Hi there!"'),d("You blink. Did someone speak?"),d('"Down here!"'),d("It's the people below."),d('"We noticed you up there. What are you doing?"'),d("You reply, haltingly, that you do not know."),d('"Oh, well, okay. Cool beans. Later!"')));var W=Math.round(window.innerWidth/30),An=Math.round(window.innerWidth/200),Jr=2,Mn=5e3,Zr=["#FFDFC4","#F0D5BE","#EECEB3","#E1B899","#E5C298","#FFDCB2","#E5B887","#E5A073","#E79E6D","#DB9065","#CE967C","#C67856","#BA6C49","#A57257","#F0C8C9","#DDA8A0","#B97C6D","#A8756C","#AD6452","#5C3836","#CB8442","#BD723C","#704139","#A3866A","#870400","#710101","#430000","#5B0001","#302E2E"],Qr=["ow!","yikes!","holy cow!","ouch!","that smarts!","ow!","yikes!","holy cow!","ouch!","that smarts!","ow!","yikes!","holy cow!","ouch!","that smarts!","mother puss-bucket!"],eo=[":)",":o",":^",":.",":P",":D"],to=[":(",":(",":(",":(",":(",":(",":O"],me=Ce("#instructions"),Pn=Ce("#starter"),He=Ce("#scoreBox"),Cn=document.querySelectorAll(".pointDisplay"),fe=document.querySelectorAll(".endMessage"),U=new AudioContext,kn=U.createGain(),H=new Array,Fn=new Array,pe=new Map,no=Math.pow(2,1/12),ze=!1,bt=1,xt=null,Tt=0,vt=1,In=-1,N=0,Ue=0,Ln,On;function ro(t){return 440*Math.pow(no,t-49)}function _(t,e,n){let r=Fn[t];r&&(pe.has(r)&&(clearTimeout(pe.get(r)),pe.delete(r)),r.gain.value=e,pe.set(r,setTimeout(()=>{r.gain.value=0,pe.delete(r)},n*1e3)))}function x(t,e){return t+Math.random()*(e-t)}function P(t,e){return Math.floor(x(t,e))}function oo(t){let e=0;if(N>0?e=Math.floor(t/2e3%4)+Math.floor(t/1e3%2)/2:e=Math.floor(t/500%4)+Math.floor(t/250%3)/3,In!==e){let n=.2;if(fn,e>=P(0,4)&&(e=Math.floor(e),n/=2),N>0){let r=25-Math.floor(e*4)+P(-1,2)*3;_(r,.04,n),_(r+3,.04,n),_(r+7,.04,n)}else{let r=40+Math.floor(e*3)+P(-1,2)*4;_(r,.04,.05),_(r+P(3,5),.04,.05)}}In=e}function Ke(t){t=t||document.body,t.style.transform="translate("+x(-4,4)+"px,"+x(-4,4)+"px)"}function io(t){return t instanceof Ge}var Ge=class{constructor(){o(this,"element");o(this,"boop");o(this,"shadow");o(this,"alive");o(this,"hits");o(this,"onground");o(this,"x");o(this,"y");o(this,"z");o(this,"f");o(this,"dx");o(this,"dy");o(this,"df");o(this,"width");o(this,"height");o(this,"boopFor");o(this,"boopX");o(this,"boopY");o(this,"boopDX");o(this,"boopDY");this.alive=!0,this.hits=0,this.onground=!1,this.x=x(0,window.innerWidth),this.y=x(0,window.innerHeight/2),this.z=P(0,10),this.f=0,this.dx=x(-1,1),this.dy=0,this.df=x(.05,.1),this.element=S(w("frowny"),on(this.jump.bind(this,"boop")),sn(this.jump.bind(this,"boop")),_e($(Oe(Zr)),re(this.z))),this.width=5,this.height=5,this.boop=S(w("boop"),"boop"),this.boopFor=0,this.boopX=0,this.boopY=0,this.boopDX=0,this.boopDY=0,this.shadow=S(w("shadow")),document.body.append(this.boop,this.shadow),this.render()}jump(e){this.onground&&(this.boop.innerHTML=e,this.dy=-5,this.onground=!1,this.boopX=this.x,this.boopY=this.y-125,this.boopDX=x(-.5,.5),this.boopDY=x(-.5,0),this.boopFor=100,_(30+3*P(0,5),.125,.05),ze=!0)}render(){this.boop.style.display=this.boopFor>0?"block":"none",this.boop.style.left=this.boopX+"px",this.boop.style.top=this.boopY+"px",this.boop.style.transform="scale("+(.5+this.boopFor/200)+")",this.shadow.style.left=this.element.style.left=this.x+"px",this.element.style.top=this.y+10*this.z-120+"px",this.shadow.style.top=10*this.z+window.innerHeight-120+"px";let e=Math.sqrt(Math.abs(this.dy))*10;this.element.style.paddingLeft=this.element.style.paddingRight=this.height+e+"px",this.element.style.paddingTop=this.element.style.paddingBottom=this.width-e+"px",this.alive&&this.f>1?(this.element.innerHTML=Oe(N>0?to:eo),this.f=0):this.alive||(this.element.innerHTML="X(")}update(e){this.boopFor-=e,this.boopX+=this.boopDX*e,this.boopY+=this.boopDY*e,this.x+=this.dx*e,this.y+=this.dy*e,this.f+=this.df*e,this.onground||(this.dy=this.dy+.1*e),(this.x<=0&&this.dx<0||this.x+this.element.clientWidth>=window.innerWidth&&this.dx>0)&&(this.dx*=-1),!this.onground&&this.y+this.element.clientHeight>=window.innerHeight&&this.dy>0&&(this.dy>2?this.dy*=-.5:(this.onground=!0,this.dy=0,this.alive||(this.dx=0)),_((N>0?10:20)+3*P(0,5),.125,.05),Ke())}},yt=class{constructor(){o(this,"element");o(this,"x");o(this,"y");o(this,"dx");this.element=document.createElement("div"),this.element.className="cloud";let e=P(4,7);for(let n=0;n<e;++n){let r=document.createElement("div");r.className="cloud-bit",r.style.top=x(-25,25)+"px",r.style.left=x(-50,50)+"px",this.element.appendChild(r)}this.x=x(0,window.innerWidth),this.y=x(0,window.innerHeight/4)+50,this.dx=x(-.25,.25),this.element.style.zIndex=(-this.y).toFixed(0),this.render()}render(){this.element.style.left=this.x+"px",this.element.style.top=this.y+"px"}update(e){this.x+=this.dx*e,(this.x<=0&&this.dx<0||this.x+this.element.clientWidth>=window.innerWidth&&this.dx>0)&&(this.dx*=-1)}},Rt=class{constructor(){o(this,"element");o(this,"subBeam");o(this,"x");o(this,"y");o(this,"t");o(this,"charging");o(this,"firing");o(this,"enabled");this.x=0,this.y=0,this.t=0,this.charging=!1,this.firing=!1,this.enabled=!0,this.element=document.createElement("div"),this.element.className="beam",this.subBeam=document.createElement("div"),this.subBeam.className="subBeam",this.element.appendChild(this.subBeam)}disable(){this.enabled=!1}update(e){if(this.charging&&this.t<100?(this.t+=e,this.t>=100&&(this.firing=!0,Nn&&clearTimeout(Nn))):!this.charging&&this.t>0&&(this.t-=e/4,this.t<=0&&(this.firing=!1)),this.firing){Ke(this.element);for(let n=0,r=this.t/10;n<r;++n)_(87-n,.02,e/100);for(let n=0;n<W;++n){let r=H[n];if(io(r)&&r.alive&&r.onground)if(this.x<=r.x+50&&this.x+50>=r.x){if(N===0){He.style.display="block",document.body.style.backgroundImage="linear-gradient(hsl(0, 50%, 0%), hsl(0, 50%, 50%) 75%, hsl(0, 50%, 15%) 75%, hsl(0, 50%, 33%))";for(let i=0;i<An;++i){let a=H[W+i].element;for(let m=0;m<a.children.length;++m){let R=a.children[m].style;R.backgroundColor="black"}}}++N;for(let i=0;i<Cn.length;++i)Cn[i].innerHTML=N.toFixed(0);Ke(r.element),++r.hits,r.hits>=Jr?(r.alive=!1,++Ue,N+=10,Ue===W-2?Ln=setTimeout(()=>{fe[2].style.display="block",He.style.display="none",this.disable()},Mn):Ue===W-1?(clearTimeout(Ln),On=setTimeout(()=>{fe[1].style.display="block",He.style.display="none",this.disable()},Mn)):Ue===W&&(clearTimeout(On),fe[0].style.display="block",He.style.display="none",this.disable())):r.element.style.transform+=" rotate(90deg)",r.jump(Oe(Qr)),_(10+P(-1,2),.1,.05)}else this.x<=r.x+200&&this.x+200>=r.x&&(Ke(r.element),r.element.style.transform+=" rotate(90deg)")}}else if(this.charging){let n=Math.floor(this.t/10)+70;for(let r=70;r<n;++r)_(r,.02,e/100)}}render(){this.element.style.display=this.charging||this.firing?"block":"none",this.subBeam.style.display=this.firing?"block":"none",this.element.style.left=this.x+"px",this.element.style.top=this.y+"px";let e="hsl(0, 100%, "+this.t+"%)";this.element.style.backgroundColor=this.subBeam.style.backgroundColor=e,this.element.style.boxShadow=this.subBeam.style.boxShadow="0 0 25px "+e,this.subBeam.style.width=this.t+"%",this.subBeam.style.left=(100-this.t)/2+"%",this.subBeam.style.opacity=(this.t/100).toFixed(3)}start(e){U.resume(),ze=!0,this.x=e.clientX-10,this.y=e.clientY-10,this.enabled&&(this.charging=!0)}end(){this.element.style.display="none",this.charging=!1,this.firing||(this.t=0)}move(e){this.x=e.clientX-10,this.y=e.clientY-10}};function wt(t){return H.push(t),oe(document.body,t),t}for(let t=0;t<88;++t){let e=U.createGain();e.gain.value=0;let n=U.createOscillator();n.frequency.value=ro(t+1),n.type="sawtooth",n.start(),n.connect(e),e.connect(kn),Fn.push(e)}for(let t=0;t<W;++t)wt(new Ge);for(let t=0;t<An;++t)wt(new yt);var C=wt(new Rt);document.addEventListener("mousedown",C.start.bind(C),!1);document.addEventListener("mousemove",t=>{C.move(t),t.preventDefault()},!1);document.addEventListener("mouseup",C.end.bind(C),!1);document.addEventListener("touchstart",function(t){t.touches.length===1&&(C.start(t.touches[0]),t.preventDefault())},!1);document.addEventListener("touchmove",function(t){C.move(t.touches[0]),t.preventDefault()},!1);document.addEventListener("touchend",function(t){t.touches.length===0&&(C.end(),t.preventDefault())},!1);function Vn(t){if(requestAnimationFrame(Vn),oo(t),xt!=null){for(Tt+=(t-xt)/10;Tt>=vt;){for(let e=0;e<H.length;++e)H[e].update(vt);Tt-=vt}for(let e=0;e<H.length;++e)H[e].render()}xt=t,ze&&bt>0&&(me.style.opacity=(parseFloat(me.style.opacity)-.05).toFixed(3),bt-=.05,me.style.transform="scale("+Math.pow(bt,.25)+")")}setTimeout(function(){ze=!0},5e3);var Nn=setTimeout(function(){fe[fe.length-1].style.display="block",C.disable()},15e3);(async function(){kn.connect(U.destination),me.style.opacity="1",Pn.style.display="block",await _n(U),Pn.style.display="none",me.style.display="block",requestAnimationFrame(Vn)})();
//# sourceMappingURL=index.min.js.map
