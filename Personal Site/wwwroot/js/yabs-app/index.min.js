var zn=Object.defineProperty;var Gn=(t,e,n)=>e in t?zn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var o=(t,e,n)=>(Gn(t,typeof e!="symbol"?e+"":e,n),n),Pt=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var de=(t,e,n)=>(Pt(t,e,"read from private field"),n?n.call(t):e.get(t)),he=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ge=(t,e,n,r)=>(Pt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);function jn(t){return t}function It(t,e,n){let r=0,i=t.length,a=Math.floor((r+i)/2),m=!1;for(;r<i&&a<t.length;){let w=t[a],h=f(w)?null:n(w);s(h)&&e<h?i=a:(e===h&&(m=!0),r=a+1),a=Math.floor((r+i)/2)}return m||(a+=.5),a}function $e(t,e,n){n=n||jn;let r=n(e);return It(t,r,n)}function Y(t,e){return t.splice(e,1)[0]}function G(t){return t.splice(0)}function Ee(t,e,n){t.splice(n,0,e)}function C(t,e){let n=t.indexOf(e);return n>-1?(Y(t,n),!0):!1}function Ct(t,e,n,r){let i;return E(n)?i=n:M(n)&&(r=n),f(r)&&(r=!0),$n(t,e,i,r)}function $n(t,e,n,r){let i=$e(t,e,n),a=i%1===0;return i=i|0,(!a||r)&&Ee(t,e,i),i}var X=class{constructor(e){this.value=e;o(this,"_forward",new Array);o(this,"_reverse",new Array)}connectSorted(e,n){s(n)?(Ct(this._forward,e,r=>n(r.value)),e._reverse.push(this)):this.connectTo(e)}connectTo(e){this.connectAt(e,this._forward.length)}connectAt(e,n){Ee(this._forward,e,n),e._reverse.push(this)}disconnectFrom(e){C(this._forward,e),C(e._reverse,this)}isConnectedTo(e){return this._forward.indexOf(e)>=0||this._reverse.indexOf(e)>=0}flatten(){let e=new Set,n=[this];for(;n.length>0;){let r=n.shift();e.has(r)||(e.add(r),n.push(...r._forward))}return Array.from(e)}get _isEntryPoint(){return this._reverse.length===0}get _isExitPoint(){return this._forward.length===0}get isDisconnected(){return this._isEntryPoint&&this._isExitPoint}get isConnected(){return!this._isExitPoint||!this._isEntryPoint}get isTerminus(){return this._isEntryPoint||this._isExitPoint}get isInternal(){return!this._isEntryPoint&&!this._isExitPoint}};var be=class extends X{connectTo(e){super.connectTo(e)}connectAt(e,n){super.connectAt(e,n)}connectSorted(e,n){super.connectSorted(e,n)}disconnectFrom(e){super.disconnectFrom(e)}isConnectedTo(e){return super.isConnectedTo(e)}flatten(){return super.flatten()}get connections(){return this._forward}get isEntryPoint(){return this._isEntryPoint}get isExitPoint(){return this._isExitPoint}};var qe=class{constructor(e){o(this,"items",new Map);o(this,"defaultItems",new Array);if(s(e))for(let[n,r]of e)this.add(n,r)}add(e,n){if(f(e))this.defaultItems.push(n);else{let r=this.items.get(e);f(r)&&this.items.set(e,r=[]),r.push(n)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let n of e)yield n}has(e){return s(e)?this.items.has(e):this.defaultItems.length>0}get(e){return f(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(f(e))return this.defaultItems.length;let n=this.get(e);return s(n)?n.length:null}get size(){let e=this.defaultItems.length;for(let n of this.items.values())e+=n.length;return e}delete(e){return f(e)?G(this.defaultItems).length>0:this.items.delete(e)}remove(e,n){if(f(e))C(this.defaultItems,n);else{let r=this.items.get(e);s(r)&&(C(r,n),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),G(this.defaultItems)}};var xe=class{constructor(){o(this,"listeners",new Map);o(this,"listenerOptions",new Map)}addEventListener(e,n,r){if(E(n)){let i=this.listeners.get(e);i||(i=new Array,this.listeners.set(e,i)),i.find(a=>a===n)||(i.push(n),r&&this.listenerOptions.set(n,r))}}removeEventListener(e,n){if(E(n)){let r=this.listeners.get(e);r&&this.removeListener(r,n)}}clearEventListeners(e){for(let[n,r]of this.listeners)if(f(e)||e===n){for(let i of r)this.removeEventListener(e,i);G(r),this.listeners.delete(n)}}removeListener(e,n){let r=e.findIndex(i=>i===n);r>=0&&(Y(e,r),this.listenerOptions.has(n)&&this.listenerOptions.delete(n))}dispatchEvent(e){let n=this.listeners.get(e.type);if(n)for(let r of n){let i=this.listenerOptions.get(r);s(i)&&!M(i)&&i.once&&this.removeListener(n,r),r.call(this,e)}return!e.defaultPrevented}};var D=class{constructor(e,n,r=!0){o(this,"promise");o(this,"_resolve",null);o(this,"_reject",null);o(this,"_result",null);o(this,"_error",null);o(this,"_started",!1);o(this,"_finished",!1);o(this,"resolve",null);o(this,"reject",null);let i=Te,a=Te;E(e)&&(i=e),E(n)&&(a=n),M(e)?r=e:M(n)&&(r=n),this.resolve=m=>{s(this._resolve)&&this._resolve(m)},this.reject=m=>{s(this._reject)&&this._reject(m)},this.promise=new Promise((m,w)=>{this._resolve=h=>{i(h)&&(this._result=h,this._finished=!0,m(h))},this._reject=h=>{a(h)&&(this._error=h,this._finished=!0,w(h))}}),r&&this.start()}get result(){if(s(this.error))throw this.error;return this._result}get error(){return this._error}get started(){return this._started}get finished(){return this._finished}start(){this._started=!0}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};function Nt(t,e){return"on"+e in t}function ve(t,e,n,...r){f(r)&&(r=[]);let i;if(O(n)?r.unshift(n):L(n)&&(i=n),!(t instanceof xe)){if(!Nt(t,e))throw new J(`Target does not have a ${e} rejection event`);for(let T of r)if(!Nt(t,T))throw new J(`Target does not have a ${T} rejection event`)}let a=new D;if(L(i)){let T=setTimeout(a.reject,i,`'${e}' has timed out.`);a.finally(clearTimeout.bind(globalThis,T))}let m=(T,Mt)=>{t.addEventListener(T,Mt),a.finally(()=>t.removeEventListener(T,Mt))},w=T=>a.resolve(T),h=T=>a.reject(T);m(e,w);for(let T of r)m(T,h);return a}var At=class{constructor(e,n,r){o(this,"promise");o(this,"callback",null);this.promise=new Promise((i,a)=>{this.callback=(...m)=>{e(...m)?i(n(...m)):a(r(...m))}})}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var J=class extends Error{constructor(n,r=null){super(n);this.innerError=r}};var qn=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,ye=navigator.userAgent.match(qn),we=!!ye,as=we&&{major:parseFloat(ye[1]),minor:parseFloat(ye[2]),patch:parseFloat(ye[3])},ls=we&&/pacific/i.test(navigator.userAgent),cs=we&&/quest/i.test(navigator.userAgent),ps=we&&/quest 2/i.test(navigator.userAgent);var ms=!("Document"in globalThis);var Wn=298.257223563,Yn=6378137;var We=1/Wn,Se=1-We,l=We/(2-We),ds=Yn/(1+l)*(1+l*l/4+l*l*l*l/64),Re=Math.sqrt(1-Se*Se),v=1-Se*Se,hs=Re*Re/(1-Re*Re),gs=1-v*(.25+v*(3/64+5*v/256)),Es=v*(3/8+v*(3/32+45*v/1024)),bs=v*v*(15/256+v*45/1024),xs=v*v*v*(35/3072),Ts=[l/2-2*l*l/3+37*l*l*l/96,l*l/48+l*l*l/15,17*l*l*l/480],vs=[2*l-2*l*l/3,7*l*l/3-8*l*l*l/5,56*l*l*l/15];function Te(){return!0}var Xs=2*Math.PI;function Dt(t,e,n){return(1-n)*t+n*e}function Z(t,e,n){return typeof t===e||t instanceof n}function E(t){return Z(t,"function",Function)}function O(t){return Z(t,"string",String)}function M(t){return Z(t,"boolean",Boolean)}function L(t){return Z(t,"number",Number)}function k(t){return s(t)&&Z(t,"object",Object)}function Ye(t,e){throw new Error((e||"Unexpected object: ")+t)}function f(t){return t==null}function s(t){return!f(t)}function Xe(t,e){let n=globalThis,r=n[t];if(f(r)){if(f(e))throw new Error(`No value ${t} found`);r=e(),n[t]=r}return r}var Je=class{constructor(){o(this,"t",0);o(this,"dt",0);o(this,"sdt",0);o(this,"fps",0)}set(e,n){this.t=e,this.dt=n,this.sdt=Dt(this.sdt,n,.01),n>0&&(this.fps=1e3/n)}},_e=class extends Je{constructor(){super(),Object.seal(this)}};var ee,Q=class{constructor(e){o(this,"timer",null);o(this,"onTick");o(this,"lt",-1);o(this,"tickHandlers",new Array);he(this,ee,null);this.targetFPS=e;let n=new _e,r=0;this.onTick=i=>{this.lt>=0&&(r=i-this.lt,n.set(i,r),this.tick(n)),this.lt=i}}get targetFPS(){return de(this,ee)}set targetFPS(e){ge(this,ee,e)}addTickHandler(e){this.tickHandlers.push(e)}removeTickHandler(e){C(this.tickHandlers,e)}tick(e){for(let n of this.tickHandlers)n(e)}restart(){this.stop(),this.start()}get isRunning(){return this.timer!=null}stop(){this.timer=null,this.lt=-1}get targetFrameTime(){return 1e3/this.targetFPS}};ee=new WeakMap;function Ze(t){return s(t)&&t.length>0?parseFloat(t):null}var Bt=class{constructor(e,n){o(this,"_url",null);o(this,"_base");o(this,"_protocol",null);o(this,"_host",null);o(this,"_hostName",null);o(this,"_userName",null);o(this,"_password",null);o(this,"_port",null);o(this,"_pathName",null);o(this,"_hash",null);o(this,"_query",new Map);e!==void 0&&(this._url=new URL(e,n),this.rehydrate())}rehydrate(){s(this._protocol)&&this._protocol!==this._url.protocol&&(this._url.protocol=this._protocol),s(this._host)&&this._host!==this._url.host&&(this._url.host=this._host),s(this._hostName)&&this._hostName!==this._url.hostname&&(this._url.hostname=this._hostName),s(this._userName)&&this._userName!==this._url.username&&(this._url.username=this._userName),s(this._password)&&this._password!==this._url.password&&(this._url.password=this._password),s(this._port)&&this._port.toFixed(0)!==this._url.port&&(this._url.port=this._port.toFixed(0)),s(this._pathName)&&this._pathName!==this._url.pathname&&(this._url.pathname=this._pathName),s(this._hash)&&this._hash!==this._url.hash&&(this._url.hash=this._hash);for(let[e,n]of this._query)this._url.searchParams.set(e,n);this._protocol=this._url.protocol,this._host=this._url.host,this._hostName=this._url.hostname,this._userName=this._url.username,this._password=this._url.password,this._port=Ze(this._url.port),this._pathName=this._url.pathname,this._hash=this._url.hash,this._url.searchParams.forEach((e,n)=>this._query.set(n,e))}refresh(){if(this._url===null){if(s(this._protocol)&&(s(this._host)||s(this._hostName))){if(s(this._host))return this._url=new URL(`${this._protocol}//${this._host}`,this._base),this._port=Ze(this._url.port),this.rehydrate(),!1;if(s(this._hostName))return this._url=new URL(`${this._protocol}//${this._hostName}`,this._base),this.rehydrate(),!1}else if(s(this._pathName)&&s(this._base))return this._url=new URL(this._pathName,this._base),this.rehydrate(),!1}return s(this._url)}base(e){if(this._url!==null)throw new Error("Cannot redefine base after defining the protocol and domain");return this._base=e,this.refresh(),this}protocol(e){return this._protocol=e,this.refresh()&&(this._url.protocol=e),this}host(e){return this._host=e,this.refresh()&&(this._url.host=e,this._hostName=this._url.hostname,this._port=Ze(this._url.port)),this}hostName(e){return this._hostName=e,this.refresh()&&(this._url.hostname=e,this._host=`${this._url.hostname}:${this._url.port}`),this}port(e){return this._port=e,this.refresh()&&(this._url.port=e.toFixed(0),this._host=`${this._url.hostname}:${this._url.port}`),this}userName(e){return this._userName=e,this.refresh()&&(this._url.username=e),this}password(e){return this._password=e,this.refresh()&&(this._url.password=e),this}path(e){return this._pathName=e,this.refresh()&&(this._url.pathname=e),this}pathPop(e){return e=e||/\/[^\/]+\/?$/,this.path(this._pathName.replace(e,""))}pathPush(e){let n=this._pathName;return n.endsWith("/")||(n+="/"),n+=e,this.path(n)}query(e,n){return this._query.set(e,n),this.refresh()&&this._url.searchParams.set(e,n),this}hash(e){return this._hash=e,this.refresh()&&(this._url.hash=e),this}toURL(){return this._url}toString(){return this._url.href}[Symbol.toStringTag](){return this.toString()}};function Qe(t){let e=new Map;for(let[n,r]of t)e.set(r,n);return e}var er=new Map([[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]]),tr=new Map([[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]]),cl=Qe(er),pl=Qe(tr);var Vt=304.79999999999995,fl=Vt*3,nr=10*100,rr=Vt*16.5,or=rr*40,dl=nr*1e3,hl=or*8,Ft=2.54*4,Ht=Ft*3,gl=Ht*3,ir=Ht*16.5,sr=ir*40,El=100*1e3,bl=sr*8,et=4*3,ur=et*3,tt=100/2.54,ar=et*16.5,lr=ar*40,xl=tt*1e3,Tl=lr*8,vl=3*3,cr=100/Ft,pr=3*16.5,mr=pr*40,yl=cr*1e3,wl=mr*8,Kt=tt/et,fr=16.5*40,Rl=Kt*1e3,Sl=fr*8,dr=tt/ur,hr=16.5/3,gr=hr*40,_l=dr*1e3,Ml=gr*8,Ut=16.5/Kt,zt=Ut*40,Pl=zt*8,Il=1e3/Ut,Cl=40*8,Er=1e3/zt,Ll=8/Er;var B=class{constructor(e,n,r,...i){this.key=e;this.value=n;this.bySetAttribute=r;this.tags=i.map(a=>a.toLocaleUpperCase()),Object.freeze(this)}applyToElement(e){let n=this.key.startsWith("data-");if(!(this.tags.length===0||this.tags.indexOf(e.tagName)>-1||n))console.warn(`Element ${e.tagName} does not support Attribute ${this.key}`);else if(n){let i=this.key.substring(5);e.dataset[i]=this.value}else this.key==="style"?Object.assign(e.style,this.value):this.key==="classList"?this.value.forEach(i=>e.classList.add(i)):this.bySetAttribute?e.setAttribute(this.key,this.value):this.key in e?e[this.key]=this.value:this.value===!1?e.removeAttribute(this.key):this.value===!0?e.setAttribute(this.key,""):e.setAttribute(this.key,this.value)}};function R(t){return new B("className",t,!1)}function N(t){return new B("id",t,!1)}function Gt(t){return O(t)||(t=t.value),new B("type",t,!1,"button","input","command","embed","link","object","script","source","style","menu")}var p=class{constructor(e,n){this.key=e;this.value=n;o(this,"name");this.name=e.replace(/[A-Z]/g,r=>`-${r.toLocaleLowerCase()}`)}applyToElement(e){e.style[this.key]=this.value}},nt=class{constructor(...e){o(this,"rest");this.rest=e}applyToElement(e){for(let n of this.rest)n.applyToElement(e)}};function Me(...t){return new nt(...t)}function j(t){return new p("backgroundColor",t)}function ot(...t){return new p("backgroundImage",t.join(", "))}function it(t){return new p("border",t)}function jt(t){return new p("borderBottomLeftRadius",t)}function $t(t){return new p("borderBottomRightRadius",t)}function Pe(t){return new p("borderRadius",t)}function qt(t){return new p("borderTopLeftRadius",t)}function Wt(t){return new p("borderTopRightRadius",t)}function Yt(t){return new p("boxShadow",t)}function te(t){return new p("color",t)}function V(t){return new p("display",t)}function Ie(t){return new p("fontFamily",t)}function st(t){return new p("fontSize",t)}function ut(t){return new p("fontWeight",t)}function F(t){return new p("height",t)}function at(t){return new p("left",t)}function lt(t){return new p("margin",t)}function Xt(t){return new p("marginLeft",t)}function Jt(t){return new p("marginRight",t)}function Zt(t){return new p("marginTop",t)}function ct(t){return new p("overflow",t)}function ne(...t){return new p("padding",t.join(" "))}function Qt(t){return new p("pointerEvents",t)}function pt(t){return new p("position",t)}function en(t){return new p("textTransform",t)}function re(t){return new p("top",t)}function tn(t){return new p("transform",t)}function H(t){return new p("width",t)}function oe(t){return new p("zIndex",L(t)?t.toFixed(0):t)}var rt=class{constructor(e,n){this.selector=e;this.props=n}apply(e){let n=this.props.map(r=>`${r.name}: ${r.value};`).join("");e.insertRule(`${this.selector} {${n}}`,e.cssRules.length)}};function b(t,...e){return new rt(t,e)}function nn(t){return k(t)?t.element instanceof Node:!1}function br(t){return k(t)&&"elements"in t&&t.elements instanceof Array}function mt(t){return nn(t)?t.element:t}function xr(t){return k(t)&&"applyToElement"in t&&E(t.applyToElement)}function ie(t,...e){t=mt(t);for(let n of e)s(n)&&(n instanceof Node?t.append(n):nn(n)?t.append(mt(n)):br(n)?t.append(...n.elements.map(mt)):xr(n)?n.applyToElement(t):t.append(document.createTextNode(n.toLocaleString())));return t}function Ce(t){return document.querySelector(t)}function Le(t,...e){let n=null;for(let r of e)if(r instanceof B&&r.key==="id"){n=document.getElementById(r.value);break}return n==null&&(n=document.createElement(t)),ie(n,...e),n}function Tr(...t){return Le("button",...t)}function rn(...t){return Tr(...t,Gt("button"))}function S(...t){return Le("div",...t)}function d(...t){return Le("p",...t)}function on(...t){return Le("span",...t)}function sn(...t){let e=document.createElement("style");document.head.append(e);for(let n of t)n.apply(e.sheet);return e}var se=class{constructor(e,n,r){this.name=e;this.callback=n;if(!E(n))throw new Error("A function instance is required for this parameter");this.opts=r,Object.freeze(this)}applyToElement(e){this.add(e)}add(e){e.addEventListener(this.name,this.callback,this.opts)}remove(e){e.removeEventListener(this.name,this.callback)}};function un(t,e){return new se("click",t,e)}function an(t,e){return new se("mouseout",t,e)}function ln(t,e){return new se("touchstart",t,e)}function Oe(t,e){return t.splice(e,1)[0]}function ue(t){return t.splice(0)}function Ne(t,e){let n=e!=null?1:0,r=Math.floor(Math.random()*(t.length+n))-n;return r<0?e:t[r]}function $(t,e){let n=t.indexOf(e);return n>-1?(Oe(t,n),!0):!1}var ft=class{constructor(e){this.items=new Map;this.defaultItems=new Array;if(u(e))for(let[n,r]of e)this.add(n,r)}add(e,n){if(g(e))this.defaultItems.push(n);else{let r=this.items.get(e);g(r)&&this.items.set(e,r=[]),r.push(n)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let n of e)yield n}has(e){return u(e)?this.items.has(e):this.defaultItems.length>0}get(e){return g(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(g(e))return this.defaultItems.length;let n=this.get(e);return u(n)?n.length:null}get size(){let e=this.defaultItems.length;for(let n of this.items.values())e+=n.length;return e}delete(e){return g(e)?ue(this.defaultItems).length>0:this.items.delete(e)}remove(e,n){if(g(e))$(this.defaultItems,n);else{let r=this.items.get(e);u(r)&&($(r,n),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),ue(this.defaultItems)}};var q=class{constructor(e,n,r=!0){this._resolve=null;this._reject=null;this._result=null;this._error=null;this._started=!1;this._finished=!1;this.resolve=null;this.reject=null;let i=Ae,a=Ae;K(e)&&(i=e),K(n)&&(a=n),ae(e)?r=e:ae(n)&&(r=n),this.resolve=m=>{u(this._resolve)&&this._resolve(m)},this.reject=m=>{u(this._reject)&&this._reject(m)},this.promise=new Promise((m,w)=>{this._resolve=h=>{i(h)&&(this._result=h,this._finished=!0,m(h))},this._reject=h=>{a(h)&&(this._error=h,this._finished=!0,w(h))}}),r&&this.start()}get result(){if(u(this.error))throw this.error;return this._result}get error(){return this._error}get started(){return this._started}get finished(){return this._finished}start(){this._started=!0}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var dn=class{constructor(e,n,r){this.callback=null;this.promise=new Promise((i,a)=>{this.callback=(...m)=>{e(...m)?i(n(...m)):a(r(...m))}})}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var Rr=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,De=navigator.userAgent.match(Rr),ke=!!De,Cm=ke&&{major:parseFloat(De[1]),minor:parseFloat(De[2]),patch:parseFloat(De[3])},Lm=ke&&/pacific/i.test(navigator.userAgent),Om=ke&&/quest/i.test(navigator.userAgent),Nm=ke&&/quest 2/i.test(navigator.userAgent);var Am=!("Document"in globalThis);var Sr=298.257223563,_r=6378137;var dt=1/Sr,Ve=1-dt,c=dt/(2-dt),km=_r/(1+c)*(1+c*c/4+c*c*c*c/64),Be=Math.sqrt(1-Ve*Ve),y=1-Ve*Ve,Bm=Be*Be/(1-Be*Be),Vm=1-y*(.25+y*(3/64+5*y/256)),Fm=y*(3/8+y*(3/32+45*y/1024)),Hm=y*y*(15/256+y*45/1024),Km=y*y*y*(35/3072),Um=[c/2-2*c*c/3+37*c*c*c/96,c*c/48+c*c*c/15,17*c*c*c/480],zm=[2*c-2*c*c/3,7*c*c/3-8*c*c*c/5,56*c*c*c/15];function Ae(){return!0}var vf=2*Math.PI;function gn(t,e,n){return(1-n)*t+n*e}function En(t,e,n){return typeof t===e||t instanceof n}function K(t){return En(t,"function",Function)}function ae(t){return En(t,"boolean",Boolean)}function g(t){return t==null}function u(t){return!g(t)}var Lr="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ";function bn(t,e){if(t<0)throw new Error("Length must be greater than 0");g(e)&&(e=Lr);let n="";for(let r=0;r<t;++r){let i=Math.floor(Math.random()*e.length);n+=e[i]}return n}var ht=class{constructor(){this.t=0;this.dt=0;this.sdt=0;this.fps=0}set(e,n){this.t=e,this.dt=n,this.sdt=gn(this.sdt,n,.01),n>0&&(this.fps=1e3/n)}},Fe=class extends ht{constructor(){super(),Object.seal(this)}};var ce,le=class{constructor(e){this.timer=null;this.lt=-1;this.tickHandlers=new Array;he(this,ce,null);this.targetFPS=e;let n=new Fe,r=0;this.onTick=i=>{this.lt>=0&&(r=i-this.lt,n.set(i,r),this.tick(n)),this.lt=i}}get targetFPS(){return de(this,ce)}set targetFPS(e){ge(this,ce,e)}addTickHandler(e){this.tickHandlers.push(e)}removeTickHandler(e){$(this.tickHandlers,e)}tick(e){for(let n of this.tickHandlers)n(e)}restart(){this.stop(),this.start()}get isRunning(){return this.timer!=null}stop(){this.timer=null,this.lt=-1}get targetFrameTime(){return 1e3/this.targetFPS}};ce=new WeakMap;function gt(t){return u(t)&&t.length>0?parseFloat(t):null}var xn=class{constructor(e,n){this._url=null;this._base=void 0;this._protocol=null;this._host=null;this._hostName=null;this._userName=null;this._password=null;this._port=null;this._pathName=null;this._hash=null;this._query=new Map;e!==void 0&&(this._url=new URL(e,n),this.rehydrate())}rehydrate(){u(this._protocol)&&this._protocol!==this._url.protocol&&(this._url.protocol=this._protocol),u(this._host)&&this._host!==this._url.host&&(this._url.host=this._host),u(this._hostName)&&this._hostName!==this._url.hostname&&(this._url.hostname=this._hostName),u(this._userName)&&this._userName!==this._url.username&&(this._url.username=this._userName),u(this._password)&&this._password!==this._url.password&&(this._url.password=this._password),u(this._port)&&this._port.toFixed(0)!==this._url.port&&(this._url.port=this._port.toFixed(0)),u(this._pathName)&&this._pathName!==this._url.pathname&&(this._url.pathname=this._pathName),u(this._hash)&&this._hash!==this._url.hash&&(this._url.hash=this._hash);for(let[e,n]of this._query)this._url.searchParams.set(e,n);this._protocol=this._url.protocol,this._host=this._url.host,this._hostName=this._url.hostname,this._userName=this._url.username,this._password=this._url.password,this._port=gt(this._url.port),this._pathName=this._url.pathname,this._hash=this._url.hash,this._url.searchParams.forEach((e,n)=>this._query.set(n,e))}refresh(){if(this._url===null){if(u(this._protocol)&&(u(this._host)||u(this._hostName))){if(u(this._host))return this._url=new URL(`${this._protocol}//${this._host}`,this._base),this._port=gt(this._url.port),this.rehydrate(),!1;if(u(this._hostName))return this._url=new URL(`${this._protocol}//${this._hostName}`,this._base),this.rehydrate(),!1}else if(u(this._pathName)&&u(this._base))return this._url=new URL(this._pathName,this._base),this.rehydrate(),!1}return u(this._url)}base(e){if(this._url!==null)throw new Error("Cannot redefine base after defining the protocol and domain");return this._base=e,this.refresh(),this}protocol(e){return this._protocol=e,this.refresh()&&(this._url.protocol=e),this}host(e){return this._host=e,this.refresh()&&(this._url.host=e,this._hostName=this._url.hostname,this._port=gt(this._url.port)),this}hostName(e){return this._hostName=e,this.refresh()&&(this._url.hostname=e,this._host=`${this._url.hostname}:${this._url.port}`),this}port(e){return this._port=e,this.refresh()&&(this._url.port=e.toFixed(0),this._host=`${this._url.hostname}:${this._url.port}`),this}userName(e){return this._userName=e,this.refresh()&&(this._url.username=e),this}password(e){return this._password=e,this.refresh()&&(this._url.password=e),this}path(e){return this._pathName=e,this.refresh()&&(this._url.pathname=e),this}pathPop(e){return e=e||/\/[^\/]+\/?$/,this.path(this._pathName.replace(e,""))}pathPush(e){let n=this._pathName;return n.endsWith("/")||(n+="/"),n+=e,this.path(n)}query(e,n){return this._query.set(e,n),this.refresh()&&this._url.searchParams.set(e,n),this}hash(e){return this._hash=e,this.refresh()&&(this._url.hash=e),this}toURL(){return this._url}toString(){return this._url.href}[Symbol.toStringTag](){return this.toString()}};function Et(t){let e=new Map;for(let[n,r]of t)e.set(r,n);return e}var Or=new Map([[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]]),Nr=new Map([[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]]),kh=Et(Or),Bh=Et(Nr);var Tn=304.79999999999995,Fh=Tn*3,Ar=10*100,Dr=Tn*16.5,kr=Dr*40,Hh=Ar*1e3,Kh=kr*8,vn=2.54*4,yn=vn*3,Uh=yn*3,Br=yn*16.5,Vr=Br*40,zh=100*1e3,Gh=Vr*8,bt=4*3,Fr=bt*3,xt=100/2.54,Hr=bt*16.5,Kr=Hr*40,jh=xt*1e3,$h=Kr*8,qh=3*3,Ur=100/vn,zr=3*16.5,Gr=zr*40,Wh=Ur*1e3,Yh=Gr*8,wn=xt/bt,jr=16.5*40,Xh=wn*1e3,Jh=jr*8,$r=xt/Fr,qr=16.5/3,Wr=qr*40,Zh=$r*1e3,Qh=Wr*8,Rn=16.5/wn,Sn=Rn*40,eg=Sn*8,tg=1e3/Rn,ng=40*8,Yr=1e3/Sn,rg=8/Yr;var _n=["change","click","contextmenu","dblclick","mouseup","pointerup","reset","submit","touchend"];function Mn(t,e){let n=e||(async()=>!0),r=async i=>{if(i.isTrusted&&await n()){for(let a of _n)window.removeEventListener(a,r);await t()}};for(let i of _n)window.addEventListener(i,r)}var Xr="AudioContext"in globalThis,In=Xr&&"AudioListener"in globalThis,Dg=In&&"setPosition"in AudioListener.prototype,kg=In&&"positionX"in AudioListener.prototype,Bg=E(HTMLMediaElement.prototype.captureStream)||E(HTMLMediaElement.prototype.mozCaptureStream);var Pn=Xe("Juniper:Audio:connections",()=>new Map),Cn=Xe("Juniper:Audio:names",()=>new Map);function Jr(t,e){Cn.set(e,t)}function Zr(){let t=new Map;function e(n){t.has(n)||t.set(n,new be(n))}for(let n of Cn.keys())e(n);for(let[n,r]of Pn){e(n);for(let i of r)e(i)}for(let[n,r]of Pn){let i=t.get(n);for(let a of r)t.has(a)&&i.connectTo(t.get(a))}return Array.from(t.values())}globalThis.getAudioGraph=Zr;async function Ln(t){if(Jr("speakers",t.destination),t.state!=="running")if(t.state==="closed")await t.resume();else if(t.state==="suspended"){let e=ve(t,"statechange");Mn(()=>t.resume()),await e}else Ye(t.state)}document.title="No More Jabber Yabs: The Game";sn(b("html, body, .cloud, .cloud-bit, .frowny, .shadow, .boop, .beam, .subBeam, .endMessage, #scoreBox",pt("absolute")),b("html, body",F("100%"),H("100%"),ne(0),lt(0),it(0),ct("hidden")),b("body",Ie("sans-serif"),j("hsl(200, 50%, 75%)"),ot("linear-gradient(hsl(200, 50%, 50%), hsl(200, 20%, 75%) 75%, hsl(100, 75%, 50%) 75%, hsl(100, 100%, 20%))")),b("#scoreBox, .endMessage, .frowny, #instructions, #starter",st("24pt")),b("#scoreBox",V("none"),te("white"),re(0),at(0),ne("1em")),b(".endMessage",V("none"),ne("1em"),re(0),oe(9001),Qt("none"),te("white")),b(".cloud-bit",j("white"),H("100px"),F("50px"),$t("25px"),jt("50px"),Wt("12.5px"),qt("6.25px")),b(".frowny",Ie("fixedsys, monospace"),ne("5px"),it("solid 2px black"),Pe("10px"),tn("rotate(90deg)"),H("50px"),F("50px"),ct("hidden")),b(".shadow",H("45px"),F("10px"),Pe("5px"),ot("radial-gradient(black, transparent)"),j("grey")),b(".boop",V("none"),te("white"),en("uppercase"),Ie("sans-serif"),ut("bold"),st("10pt"),oe(9001)),b(".beam, .subBeam",V("none"),j("red"),Yt("0 0 25px red"),at("0")),b(".beam",re("0"),H("50px"),F("50px"),Pe("50%")),b(".subBeam",re("50%"),F("2000px")),b("#instructions, #starter",pt("relative"),V("none"),ut("bold"),Xt("auto"),Jt("auto"),Zt("3em"),H("20em"),oe(9001)));function He(){return on(R("pointDisplay"),0)}ie(document.body,rn(N("starter"),"Start",un(()=>z.resume())),S(N("instructions"),"Go ahead, click and hold the mouse"),S(N("scoreBox"),"GET EM: ",He()),S(N("message0"),R("endMessage"),d("You have killed everyone. You did it. Just you. Noone else."),d("And why have you done this? Because you were ordered to? The pursuit of points?"),d("You got your points. All ",He()," of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),d("For no reason whatsoever, you have committed genocide against another race of people. Congratulations."),d("Hitler.")),S(N("message1"),R("endMessage"),d("You have killed almost everyone. Their bodies are strewn about on the ground they once called their home."),d("There is but one person left. Did you spare them out of mercy? Or have you left them, devoid of personal contact, alone, surrounded by the burned and rotting bodies of their former loved ones, to serve as witness to your terrible deeds?"),d("And why have you done this? Because you were ordered to? The pursuit of points?"),d("You got your points. All ",He(),"  of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),d("You are sick.")),S(N("message2"),R("endMessage"),d("You have killed almost everyone. Their bodies are strewn about on the ground they once called their home."),d("There are only two people left. Did you spare them out of mercy? Or have you left them, surrounded by the burned and rotting bodies of their former loved ones, to repopulate their world together, to serve as witness to your terrible deeds to future generations?"),d("And why have you done this? Because you were ordered to? The pursuit of points?"),d("You got your points. All ",He(),"  of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),d("I...I don't understand you.")),S(N("messageN"),R("endMessage"),Me(te("black")),d('"Hi there!"'),d("You blink. Did someone speak?"),d('"Down here!"'),d("It's the people below."),d('"We noticed you up there. What are you doing?"'),d("You reply, haltingly, that you do not know."),d('"Oh, well, okay. Cool beans. Later!"')));var W=Math.round(window.innerWidth/30),Fn=Math.round(window.innerWidth/200),Qr=2,On=5e3,eo=["#FFDFC4","#F0D5BE","#EECEB3","#E1B899","#E5C298","#FFDCB2","#E5B887","#E5A073","#E79E6D","#DB9065","#CE967C","#C67856","#BA6C49","#A57257","#F0C8C9","#DDA8A0","#B97C6D","#A8756C","#AD6452","#5C3836","#CB8442","#BD723C","#704139","#A3866A","#870400","#710101","#430000","#5B0001","#302E2E"],to=["ow!","yikes!","holy cow!","ouch!","that smarts!","ow!","yikes!","holy cow!","ouch!","that smarts!","ow!","yikes!","holy cow!","ouch!","that smarts!","mother puss-bucket!"],no=[":)",":o",":^",":.",":P",":D"],ro=[":(",":(",":(",":(",":(",":(",":O"],me=Ce("#instructions"),Nn=Ce("#starter"),Ke=Ce("#scoreBox"),An=document.querySelectorAll(".pointDisplay"),fe=document.querySelectorAll(".endMessage"),z=new AudioContext,Hn=z.createGain(),U=new Array,Kn=new Array,pe=new Map,oo=Math.pow(2,1/12),je=!1,Tt=1,vt=null,yt=0,wt=1,Dn=-1,A=0,Ue=0,kn,Bn;function io(t){return 440*Math.pow(oo,t-49)}function _(t,e,n){let r=Kn[t];r&&(pe.has(r)&&(clearTimeout(pe.get(r)),pe.delete(r)),r.gain.value=e,pe.set(r,setTimeout(()=>{r.gain.value=0,pe.delete(r)},n*1e3)))}function x(t,e){return t+Math.random()*(e-t)}function P(t,e){return Math.floor(x(t,e))}function so(t){let e=0;if(A>0?e=Math.floor(t/2e3%4)+Math.floor(t/1e3%2)/2:e=Math.floor(t/500%4)+Math.floor(t/250%3)/3,Dn!==e){let n=.2;if(bn,e>=P(0,4)&&(e=Math.floor(e),n/=2),A>0){let r=25-Math.floor(e*4)+P(-1,2)*3;_(r,.04,n),_(r+3,.04,n),_(r+7,.04,n)}else{let r=40+Math.floor(e*3)+P(-1,2)*4;_(r,.04,.05),_(r+P(3,5),.04,.05)}}Dn=e}function ze(t){t=t||document.body,t.style.transform="translate("+x(-4,4)+"px,"+x(-4,4)+"px)"}function uo(t){return t instanceof Ge}var Ge=class{constructor(){o(this,"element");o(this,"boop");o(this,"shadow");o(this,"alive");o(this,"hits");o(this,"onground");o(this,"x");o(this,"y");o(this,"z");o(this,"f");o(this,"dx");o(this,"dy");o(this,"df");o(this,"width");o(this,"height");o(this,"boopFor");o(this,"boopX");o(this,"boopY");o(this,"boopDX");o(this,"boopDY");this.alive=!0,this.hits=0,this.onground=!1,this.x=x(0,window.innerWidth),this.y=x(0,window.innerHeight/2),this.z=P(0,10),this.f=0,this.dx=x(-1,1),this.dy=0,this.df=x(.05,.1),this.element=S(R("frowny"),an(this.jump.bind(this,"boop")),ln(this.jump.bind(this,"boop")),Me(j(Ne(eo)),oe(this.z))),this.width=5,this.height=5,this.boop=S(R("boop"),"boop"),this.boopFor=0,this.boopX=0,this.boopY=0,this.boopDX=0,this.boopDY=0,this.shadow=S(R("shadow")),document.body.append(this.boop,this.shadow),this.render()}jump(e){this.onground&&(this.boop.innerHTML=e,this.dy=-5,this.onground=!1,this.boopX=this.x,this.boopY=this.y-125,this.boopDX=x(-.5,.5),this.boopDY=x(-.5,0),this.boopFor=100,_(30+3*P(0,5),.125,.05),je=!0)}render(){this.boop.style.display=this.boopFor>0?"block":"none",this.boop.style.left=this.boopX+"px",this.boop.style.top=this.boopY+"px",this.boop.style.transform="scale("+(.5+this.boopFor/200)+")",this.shadow.style.left=this.element.style.left=this.x+"px",this.element.style.top=this.y+10*this.z-120+"px",this.shadow.style.top=10*this.z+window.innerHeight-120+"px";let e=Math.sqrt(Math.abs(this.dy))*10;this.element.style.paddingLeft=this.element.style.paddingRight=this.height+e+"px",this.element.style.paddingTop=this.element.style.paddingBottom=this.width-e+"px",this.alive&&this.f>1?(this.element.innerHTML=Ne(A>0?ro:no),this.f=0):this.alive||(this.element.innerHTML="X(")}update(e){this.boopFor-=e,this.boopX+=this.boopDX*e,this.boopY+=this.boopDY*e,this.x+=this.dx*e,this.y+=this.dy*e,this.f+=this.df*e,this.onground||(this.dy=this.dy+.1*e),(this.x<=0&&this.dx<0||this.x+this.element.clientWidth>=window.innerWidth&&this.dx>0)&&(this.dx*=-1),!this.onground&&this.y+this.element.clientHeight>=window.innerHeight&&this.dy>0&&(this.dy>2?this.dy*=-.5:(this.onground=!0,this.dy=0,this.alive||(this.dx=0)),_((A>0?10:20)+3*P(0,5),.125,.05),ze())}},Rt=class{constructor(){o(this,"element");o(this,"x");o(this,"y");o(this,"dx");this.element=document.createElement("div"),this.element.className="cloud";let e=P(4,7);for(let n=0;n<e;++n){let r=document.createElement("div");r.className="cloud-bit",r.style.top=x(-25,25)+"px",r.style.left=x(-50,50)+"px",this.element.appendChild(r)}this.x=x(0,window.innerWidth),this.y=x(0,window.innerHeight/4)+50,this.dx=x(-.25,.25),this.element.style.zIndex=(-this.y).toFixed(0),this.render()}render(){this.element.style.left=this.x+"px",this.element.style.top=this.y+"px"}update(e){this.x+=this.dx*e,(this.x<=0&&this.dx<0||this.x+this.element.clientWidth>=window.innerWidth&&this.dx>0)&&(this.dx*=-1)}},St=class{constructor(){o(this,"element");o(this,"subBeam");o(this,"x");o(this,"y");o(this,"t");o(this,"charging");o(this,"firing");o(this,"enabled");this.x=0,this.y=0,this.t=0,this.charging=!1,this.firing=!1,this.enabled=!0,this.element=document.createElement("div"),this.element.className="beam",this.subBeam=document.createElement("div"),this.subBeam.className="subBeam",this.element.appendChild(this.subBeam)}disable(){this.enabled=!1}update(e){if(this.charging&&this.t<100?(this.t+=e,this.t>=100&&(this.firing=!0,Vn&&clearTimeout(Vn))):!this.charging&&this.t>0&&(this.t-=e/4,this.t<=0&&(this.firing=!1)),this.firing){ze(this.element);for(let n=0,r=this.t/10;n<r;++n)_(87-n,.02,e/100);for(let n=0;n<W;++n){let r=U[n];if(uo(r)&&r.alive&&r.onground)if(this.x<=r.x+50&&this.x+50>=r.x){if(A===0){Ke.style.display="block",document.body.style.backgroundImage="linear-gradient(hsl(0, 50%, 0%), hsl(0, 50%, 50%) 75%, hsl(0, 50%, 15%) 75%, hsl(0, 50%, 33%))";for(let i=0;i<Fn;++i){let a=U[W+i].element;for(let m=0;m<a.children.length;++m){let w=a.children[m].style;w.backgroundColor="black"}}}++A;for(let i=0;i<An.length;++i)An[i].innerHTML=A.toFixed(0);ze(r.element),++r.hits,r.hits>=Qr?(r.alive=!1,++Ue,A+=10,Ue===W-2?kn=setTimeout(()=>{fe[2].style.display="block",Ke.style.display="none",this.disable()},On):Ue===W-1?(clearTimeout(kn),Bn=setTimeout(()=>{fe[1].style.display="block",Ke.style.display="none",this.disable()},On)):Ue===W&&(clearTimeout(Bn),fe[0].style.display="block",Ke.style.display="none",this.disable())):r.element.style.transform+=" rotate(90deg)",r.jump(Ne(to)),_(10+P(-1,2),.1,.05)}else this.x<=r.x+200&&this.x+200>=r.x&&(ze(r.element),r.element.style.transform+=" rotate(90deg)")}}else if(this.charging){let n=Math.floor(this.t/10)+70;for(let r=70;r<n;++r)_(r,.02,e/100)}}render(){this.element.style.display=this.charging||this.firing?"block":"none",this.subBeam.style.display=this.firing?"block":"none",this.element.style.left=this.x+"px",this.element.style.top=this.y+"px";let e="hsl(0, 100%, "+this.t+"%)";this.element.style.backgroundColor=this.subBeam.style.backgroundColor=e,this.element.style.boxShadow=this.subBeam.style.boxShadow="0 0 25px "+e,this.subBeam.style.width=this.t+"%",this.subBeam.style.left=(100-this.t)/2+"%",this.subBeam.style.opacity=(this.t/100).toFixed(3)}start(e){z.resume(),je=!0,this.x=e.clientX-10,this.y=e.clientY-10,this.enabled&&(this.charging=!0)}end(){this.element.style.display="none",this.charging=!1,this.firing||(this.t=0)}move(e){this.x=e.clientX-10,this.y=e.clientY-10}};function _t(t){return U.push(t),ie(document.body,t),t}for(let t=0;t<88;++t){let e=z.createGain();e.gain.value=0;let n=z.createOscillator();n.frequency.value=io(t+1),n.type="sawtooth",n.start(),n.connect(e),e.connect(Hn),Kn.push(e)}for(let t=0;t<W;++t)_t(new Ge);for(let t=0;t<Fn;++t)_t(new Rt);var I=_t(new St);document.addEventListener("mousedown",I.start.bind(I),!1);document.addEventListener("mousemove",t=>{I.move(t),t.preventDefault()},!1);document.addEventListener("mouseup",I.end.bind(I),!1);document.addEventListener("touchstart",function(t){t.touches.length===1&&(I.start(t.touches[0]),t.preventDefault())},!1);document.addEventListener("touchmove",function(t){I.move(t.touches[0]),t.preventDefault()},!1);document.addEventListener("touchend",function(t){t.touches.length===0&&(I.end(),t.preventDefault())},!1);function Un(t){if(requestAnimationFrame(Un),so(t),vt!=null){for(yt+=(t-vt)/10;yt>=wt;){for(let e=0;e<U.length;++e)U[e].update(wt);yt-=wt}for(let e=0;e<U.length;++e)U[e].render()}vt=t,je&&Tt>0&&(me.style.opacity=(parseFloat(me.style.opacity)-.05).toFixed(3),Tt-=.05,me.style.transform="scale("+Math.pow(Tt,.25)+")")}setTimeout(function(){je=!0},5e3);var Vn=setTimeout(function(){fe[fe.length-1].style.display="block",I.disable()},15e3);(async function(){Hn.connect(z.destination),me.style.opacity="1",Nn.style.display="block",await Ln(z),Nn.style.display="none",me.style.display="block",requestAnimationFrame(Un)})();
//# sourceMappingURL=index.min.js.map
