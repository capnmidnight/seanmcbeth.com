var en=Object.defineProperty;var tn=(t,e,n)=>e in t?en(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var o=(t,e,n)=>(tn(t,typeof e!="symbol"?e+"":e,n),n),Qe=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var et=(t,e,n)=>(Qe(t,e,"read from private field"),n?n.call(t):e.get(t)),tt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},nt=(t,e,n,r)=>(Qe(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);function nn(t){return t}function rt(t,e,n){let r=0,i=t.length,u=Math.floor((r+i)/2),f=!1;for(;r<i&&u<t.length;){let C=t[u],g=c(C)?null:n(C);s(g)&&e<g?i=u:(e===g&&(f=!0),r=u+1),u=Math.floor((r+i)/2)}return f||(u+=.5),u}function Se(t,e,n){n=n||nn;let r=n(e);return rt(t,r,n)}function z(t,e){return t.splice(e,1)[0]}function H(t){return t.splice(0)}function re(t,e,n){t.splice(n,0,e)}function oe(t,e){let n=e!=null?1:0,r=Math.floor(Math.random()*(t.length+n))-n;return r<0?e:t[r]}function M(t,e){let n=t.indexOf(e);return n>-1?(z(t,n),!0):!1}function ot(t,e,n,r){let i;return m(n)?i=n:w(n)&&(r=n),c(r)&&(r=!0),rn(t,e,i,r)}function rn(t,e,n,r){let i=Se(t,e,n),u=i%1===0;return i=i|0,(!u||r)&&re(t,e,i),i}var G=class{constructor(e){this.value=e;o(this,"_forward",new Array);o(this,"_reverse",new Array)}connectSorted(e,n){s(n)?(ot(this._forward,e,r=>n(r.value)),e._reverse.push(this)):this.connectTo(e)}connectTo(e){this.connectAt(e,this._forward.length)}connectAt(e,n){re(this._forward,e,n),e._reverse.push(this)}disconnectFrom(e){M(this._forward,e),M(e._reverse,this)}isConnectedTo(e){return this._forward.indexOf(e)>=0||this._reverse.indexOf(e)>=0}flatten(){let e=new Set,n=[this];for(;n.length>0;){let r=n.shift();s(r)&&!e.has(r)&&(e.add(r),n.push(...r._forward))}return Array.from(e)}get _isEntryPoint(){return this._reverse.length===0}get _isExitPoint(){return this._forward.length===0}get isDisconnected(){return this._isEntryPoint&&this._isExitPoint}get isConnected(){return!this._isExitPoint||!this._isEntryPoint}get isTerminus(){return this._isEntryPoint||this._isExitPoint}get isInternal(){return!this._isEntryPoint&&!this._isExitPoint}};var ie=class extends G{connectTo(e){super.connectTo(e)}connectAt(e,n){super.connectAt(e,n)}connectSorted(e,n){super.connectSorted(e,n)}disconnectFrom(e){super.disconnectFrom(e)}isConnectedTo(e){return super.isConnectedTo(e)}flatten(){return super.flatten()}get connections(){return this._forward}get isEntryPoint(){return this._isEntryPoint}get isExitPoint(){return this._isExitPoint}};var it=class{constructor(e){o(this,"items",new Map);o(this,"defaultItems",new Array);if(s(e))for(let[n,r]of e)this.add(n,r)}add(e,n){if(c(e))this.defaultItems.push(n);else{let r=this.items.get(e);c(r)&&this.items.set(e,r=[]),r.push(n)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let n of e)yield n}has(e){return s(e)?this.items.has(e):this.defaultItems.length>0}get(e){return c(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(c(e))return this.defaultItems.length;let n=this.get(e);return s(n)?n.length:0}get size(){let e=this.defaultItems.length;for(let n of this.items.values())e+=n.length;return e}delete(e){return c(e)?H(this.defaultItems).length>0:this.items.delete(e)}remove(e,n){if(c(e))M(this.defaultItems,n);else{let r=this.items.get(e);s(r)&&(M(r,n),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),H(this.defaultItems)}};var se=class{constructor(){o(this,"listeners",new Map);o(this,"listenerOptions",new Map)}addEventListener(e,n,r){if(m(n)){let i=this.listeners.get(e);i||(i=new Array,this.listeners.set(e,i)),i.find(u=>u===n)||(i.push(n),r&&this.listenerOptions.set(n,r))}}removeEventListener(e,n){if(m(n)){let r=this.listeners.get(e);r&&this.removeListener(r,n)}}clearEventListeners(e){for(let[n,r]of this.listeners)if(c(e)||e===n){for(let i of r)this.removeEventListener(e,i);H(r),this.listeners.delete(n)}}removeListener(e,n){let r=e.findIndex(i=>i===n);r>=0&&(z(e,r),this.listenerOptions.has(n)&&this.listenerOptions.delete(n))}dispatchEvent(e){let n=this.listeners.get(e.type);if(n)for(let r of n){let i=this.listenerOptions.get(r);s(i)&&!w(i)&&i.once&&this.removeListener(n,r),r.call(this,e)}return!e.defaultPrevented}};var D=class{constructor(e,n,r=!0){o(this,"promise");o(this,"_resolve",null);o(this,"_reject",null);o(this,"_result",null);o(this,"_error",null);o(this,"_started",!1);o(this,"_finished",!1);o(this,"resolve",null);o(this,"reject",null);let i=ue,u=ue;m(e)&&(i=e),m(n)&&(u=n),w(e)?r=e:w(n)&&(r=n),this.resolve=f=>{s(this._resolve)&&this._resolve(f)},this.reject=f=>{s(this._reject)&&this._reject(f)},this.promise=new Promise((f,C)=>{this._resolve=g=>{i(g)&&(this._result=g,this._finished=!0,f(g))},this._reject=g=>{u(g)&&(this._error=g,this._finished=!0,C(g))}}),r&&this.start()}get result(){if(s(this.error))throw this.error;return this._result}get error(){return this._error}get started(){return this._started}get finished(){return this._finished}start(){this._started=!0}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};function st(t,e){return"on"+e in t}function Ce(t,e,n,...r){c(r)&&(r=[]);let i;if(_(n)?r.unshift(n):R(n)&&(i=n),!(t instanceof se)){if(!st(t,e))throw new K(`Target does not have a ${e} rejection event`);for(let x of r)if(!st(t,x))throw new K(`Target does not have a ${x} rejection event`)}let u=new D;if(R(i)){let x=setTimeout(u.reject,i,`'${e}' has timed out.`);u.finally(clearTimeout.bind(globalThis,x))}let f=(x,Je)=>{t.addEventListener(x,Je),u.finally(()=>t.removeEventListener(x,Je))},C=x=>u.resolve(x),g=x=>u.reject(x);f(e,C);for(let x of r)f(x,g);return u}var ut=class{constructor(e,n,r){o(this,"promise");o(this,"callback",null);this.promise=new Promise((i,u)=>{this.callback=(...f)=>{e(...f)?i(n(...f)):u(r(...f))}})}get[Symbol.toStringTag](){return this.promise.toString()}then(e,n){return this.promise.then(e,n)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var K=class extends Error{constructor(n,r=null){super(n);this.innerError=r}};var un=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,ae=navigator.userAgent.match(un),le=!!ae,Wo=le&&{major:parseFloat(ae[1]),minor:parseFloat(ae[2]),patch:parseFloat(ae[3])},Yo=le&&/pacific/i.test(navigator.userAgent),qo=le&&/quest/i.test(navigator.userAgent),Xo=le&&/quest 2/i.test(navigator.userAgent);var Zo=!("Document"in globalThis);var an=298.257223563,ln=6378137;var Me=1/an,pe=1-Me,a=Me/(2-Me),Qo=ln/(1+a)*(1+a*a/4+a*a*a*a/64),ce=Math.sqrt(1-pe*pe),E=1-pe*pe,ei=ce*ce/(1-ce*ce),ti=1-E*(.25+E*(3/64+5*E/256)),ni=E*(3/8+E*(3/32+45*E/1024)),ri=E*E*(15/256+E*45/1024),oi=E*E*E*(35/3072),ii=[a/2-2*a*a/3+37*a*a*a/96,a*a/48+a*a*a/15,17*a*a*a/480],si=[2*a-2*a*a/3,7*a*a/3-8*a*a*a/5,56*a*a*a/15];function ue(){return!0}var Pi=2*Math.PI;function at(t,e,n){return(1-n)*t+n*e}function $(t,e,n){return typeof t===e||t instanceof n}function m(t){return $(t,"function",Function)}function _(t){return $(t,"string",String)}function w(t){return $(t,"boolean",Boolean)}function R(t){return $(t,"number",Number)}function I(t){return s(t)&&$(t,"object",Object)}function Re(t,e){throw new Error((e||"Unexpected object: ")+t)}function c(t){return t==null}function s(t){return!c(t)}function Le(t,e){let n=globalThis,r=n[t];if(c(r)){if(c(e))throw new Error(`No value ${t} found`);r=e(),n[t]=r}return r}var mn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ";function ct(t,e){if(t<0)throw new Error("Length must be greater than 0");c(e)&&(e=mn);let n="";for(let r=0;r<t;++r){let i=Math.floor(Math.random()*e.length);n+=e[i]}return n}var Pe=class{constructor(){o(this,"t",0);o(this,"dt",0);o(this,"sdt",0);o(this,"fps",0)}set(e,n){this.t=e,this.dt=n,this.sdt=at(this.sdt,n,.01),n>0&&(this.fps=1e3/n)}},fe=class extends Pe{constructor(){super(),Object.seal(this)}};var W,j=class{constructor(e){o(this,"timer",null);o(this,"onTick");o(this,"lt",-1);o(this,"tickHandlers",new Array);tt(this,W,null);this.targetFPS=e;let n=new fe,r=0;this.onTick=i=>{this.lt>=0&&(r=i-this.lt,n.set(i,r),this.tick(n)),this.lt=i}}get targetFPS(){return et(this,W)}set targetFPS(e){nt(this,W,e)}addTickHandler(e){this.tickHandlers.push(e)}removeTickHandler(e){M(this.tickHandlers,e)}tick(e){for(let n of this.tickHandlers)n(e)}restart(){this.stop(),this.start()}get isRunning(){return this.timer!=null}stop(){this.timer=null,this.lt=-1}get targetFrameTime(){return 1e3/this.targetFPS}};W=new WeakMap;function _e(t){return s(t)&&t.length>0?parseFloat(t):null}var pt=class{constructor(e,n){o(this,"_url",null);o(this,"_base");o(this,"_protocol",null);o(this,"_host",null);o(this,"_hostName",null);o(this,"_userName",null);o(this,"_password",null);o(this,"_port",null);o(this,"_pathName",null);o(this,"_hash",null);o(this,"_query",new Map);e!==void 0&&(this._url=new URL(e,n),this.rehydrate())}rehydrate(){s(this._protocol)&&this._protocol!==this._url.protocol&&(this._url.protocol=this._protocol),s(this._host)&&this._host!==this._url.host&&(this._url.host=this._host),s(this._hostName)&&this._hostName!==this._url.hostname&&(this._url.hostname=this._hostName),s(this._userName)&&this._userName!==this._url.username&&(this._url.username=this._userName),s(this._password)&&this._password!==this._url.password&&(this._url.password=this._password),s(this._port)&&this._port.toFixed(0)!==this._url.port&&(this._url.port=this._port.toFixed(0)),s(this._pathName)&&this._pathName!==this._url.pathname&&(this._url.pathname=this._pathName),s(this._hash)&&this._hash!==this._url.hash&&(this._url.hash=this._hash);for(let[e,n]of this._query)this._url.searchParams.set(e,n);this._protocol=this._url.protocol,this._host=this._url.host,this._hostName=this._url.hostname,this._userName=this._url.username,this._password=this._url.password,this._port=_e(this._url.port),this._pathName=this._url.pathname,this._hash=this._url.hash,this._url.searchParams.forEach((e,n)=>this._query.set(n,e))}refresh(){if(this._url===null){if(s(this._protocol)&&(s(this._host)||s(this._hostName))){if(s(this._host))return this._url=new URL(`${this._protocol}//${this._host}`,this._base),this._port=_e(this._url.port),this.rehydrate(),!1;if(s(this._hostName))return this._url=new URL(`${this._protocol}//${this._hostName}`,this._base),this.rehydrate(),!1}else if(s(this._pathName)&&s(this._base))return this._url=new URL(this._pathName,this._base),this.rehydrate(),!1}return s(this._url)}base(e){if(this._url!==null)throw new Error("Cannot redefine base after defining the protocol and domain");return this._base=e,this.refresh(),this}protocol(e){return this._protocol=e,this.refresh()&&(this._url.protocol=e),this}host(e){return this._host=e,this.refresh()&&(this._url.host=e,this._hostName=this._url.hostname,this._port=_e(this._url.port)),this}hostName(e){return this._hostName=e,this.refresh()&&(this._url.hostname=e,this._host=`${this._url.hostname}:${this._url.port}`),this}port(e){return this._port=e,this.refresh()&&(this._url.port=e.toFixed(0),this._host=`${this._url.hostname}:${this._url.port}`),this}userName(e){return this._userName=e,this.refresh()&&(this._url.username=e),this}password(e){return this._password=e,this.refresh()&&(this._url.password=e),this}path(e){return this._pathName=e,this.refresh()&&(this._url.pathname=e),this}pathPop(e){return e=e||/\/[^\/]+\/?$/,this.path(this._pathName.replace(e,""))}pathPush(e){let n=this._pathName;return n.endsWith("/")||(n+="/"),n+=e,this.path(n)}query(e,n){return this._query.set(e,n),this.refresh()&&this._url.searchParams.set(e,n),this}hash(e){return this._hash=e,this.refresh()&&(this._url.hash=e),this}toURL(){return this._url}toString(){return this._url.href}[Symbol.toStringTag](){return this.toString()}};function Ie(t){let e=new Map;for(let[n,r]of t)e.set(r,n);return e}var dn=new Map([[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]]),hn=new Map([[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]]),Gu=Ie(dn),Ku=Ie(hn);var ft=304.79999999999995,ju=ft*3,gn=10*100,xn=ft*16.5,En=xn*40,Wu=gn*1e3,Yu=En*8,mt=2.54*4,dt=mt*3,qu=dt*3,bn=dt*16.5,vn=bn*40,Xu=100*1e3,Zu=vn*8,Oe=4*3,Tn=Oe*3,Ae=100/2.54,wn=Oe*16.5,yn=wn*40,Ju=Ae*1e3,Qu=yn*8,ea=3*3,Sn=100/mt,Cn=3*16.5,Mn=Cn*40,ta=Sn*1e3,na=Mn*8,ht=Ae/Oe,Rn=16.5*40,ra=ht*1e3,oa=Rn*8,Ln=Ae/Tn,Pn=16.5/3,_n=Pn*40,ia=Ln*1e3,sa=_n*8,gt=16.5/ht,xt=gt*40,ua=xt*8,aa=1e3/gt,la=40*8,In=1e3/xt,ca=8/In;var O=class{constructor(e,n,r,...i){this.key=e;this.value=n;this.bySetAttribute=r;this.tags=i.map(u=>u.toLocaleUpperCase()),Object.freeze(this)}applyToElement(e){let n=this.key.startsWith("data-");if(!(this.tags.length===0||this.tags.indexOf(e.tagName)>-1||n))console.warn(`Element ${e.tagName} does not support Attribute ${this.key}`);else if(n){let i=this.key.substring(5);e.dataset[i]=this.value}else this.key==="style"?Object.assign(e.style,this.value):this.key==="classList"?this.value.forEach(i=>e.classList.add(i)):this.bySetAttribute?e.setAttribute(this.key,this.value):this.key in e?e[this.key]=this.value:this.value===!1?e.removeAttribute(this.key):this.value===!0?e.setAttribute(this.key,""):e.setAttribute(this.key,this.value)}};function b(t){return new O("className",t,!1)}function L(t){return new O("id",t,!1)}function Et(t){return _(t)||(t=t.value),new O("type",t,!1,"button","input","command","embed","link","object","script","source","style","menu")}var l=class{constructor(e,n){this.key=e;this.value=n;this.name=e.replace(/[A-Z]/g,r=>`-${r.toLocaleLowerCase()}`)}applyToElement(e){e.style[this.key]=this.value}},ke=class{constructor(...e){this.rest=e}applyToElement(e){for(let n of this.rest)n.applyToElement(e)}};function me(...t){return new ke(...t)}function F(t){return new l("backgroundColor",t)}function Be(...t){return new l("backgroundImage",t.join(", "))}function Ve(t){return new l("border",t)}function bt(t){return new l("borderBottomLeftRadius",t)}function vt(t){return new l("borderBottomRightRadius",t)}function de(t){return new l("borderRadius",t)}function Tt(t){return new l("borderTopLeftRadius",t)}function wt(t){return new l("borderTopRightRadius",t)}function yt(t){return new l("boxShadow",t)}function Y(t){return new l("color",t)}function A(t){return new l("display",t)}function he(t){return new l("fontFamily",t)}function He(t){return new l("fontSize",t)}function De(t){return new l("fontWeight",t)}function k(t){return new l("height",t)}function Fe(t){return new l("left",t)}function Ue(t){return new l("margin",t)}function St(t){return new l("marginLeft",t)}function Ct(t){return new l("marginRight",t)}function Mt(t){return new l("marginTop",t)}function ze(t){return new l("overflow",t)}function q(...t){return new l("padding",t.join(" "))}function Rt(t){return new l("pointerEvents",t)}function Ge(t){return new l("position",t)}function Lt(t){return new l("textTransform",t)}function X(t){return new l("top",t)}function Pt(t){return new l("transform",t)}function N(t){return new l("width",t)}function Z(t){return new l("zIndex",R(t)?t.toFixed(0):t)}var Ne=class{constructor(e,n){this.selector=e;this.props=n}apply(e){let n=this.props.map(r=>`${r.name}: ${r.value};`).join("");e.insertRule(`${this.selector} {${n}}`,e.cssRules.length)}};function d(t,...e){return new Ne(t,e)}function _t(t){return I(t)?t.element instanceof Node:!1}function On(t){return I(t)&&"elements"in t&&t.elements instanceof Array}function Ke(t){return _t(t)?t.element:t}function An(t){return I(t)&&"applyToElement"in t&&m(t.applyToElement)}function J(t,...e){t=Ke(t);for(let n of e)s(n)&&(n instanceof Node?t.append(n):_t(n)?t.append(Ke(n)):On(n)?t.append(...n.elements.map(Ke)):An(n)?n.applyToElement(t):t.append(document.createTextNode(n.toLocaleString())));return t}function ge(t){return document.querySelector(t)}function xe(t,...e){let n=null;for(let r of e)if(r instanceof O&&r.key==="id"){n=document.getElementById(r.value);break}return n==null&&(n=document.createElement(t)),J(n,...e),n}function kn(...t){return xe("button",...t)}function It(...t){return kn(...t,Et("button"))}function v(...t){return xe("div",...t)}function p(...t){return xe("p",...t)}function Ot(...t){return xe("span",...t)}function At(...t){let e=document.createElement("style");document.head.append(e);for(let n of t)n.apply(e.sheet);return e}var Q=class{constructor(e,n,r){this.name=e;this.callback=n;if(!m(n))throw new Error("A function instance is required for this parameter");this.opts=r,Object.freeze(this)}applyToElement(e){this.add(e)}add(e){e.addEventListener(this.name,this.callback,this.opts)}remove(e){e.removeEventListener(this.name,this.callback)}};function kt(t,e){return new Q("click",t,e)}function Nt(t,e){return new Q("mouseout",t,e)}function Bt(t,e){return new Q("touchstart",t,e)}var Vt=["change","click","contextmenu","dblclick","mouseup","pointerup","reset","submit","touchend"];function Ht(t,e){let n=e||(async()=>!0),r=async i=>{if(i.isTrusted&&await n()){for(let u of Vt)window.removeEventListener(u,r);await t()}};for(let i of Vt)window.addEventListener(i,r)}var Nn="AudioContext"in globalThis,Ft=Nn&&"AudioListener"in globalThis,pl=Ft&&"setPosition"in AudioListener.prototype,fl=Ft&&"positionX"in AudioListener.prototype,ml=m(HTMLMediaElement.prototype.captureStream)||m(HTMLMediaElement.prototype.mozCaptureStream);var Dt=Le("Juniper:Audio:connections",()=>new Map),Ut=Le("Juniper:Audio:names",()=>new Map);function Bn(t,e){Ut.set(e,t)}function Vn(){let t=new Map;function e(n){t.has(n)||t.set(n,new ie(n))}for(let n of Ut.keys())e(n);for(let[n,r]of Dt){e(n);for(let i of r)e(i)}for(let[n,r]of Dt){let i=t.get(n);for(let u of r)t.has(u)&&i.connectTo(t.get(u))}return Array.from(t.values())}globalThis.getAudioGraph=Vn;async function zt(t){if(Bn("speakers",t.destination),t.state!=="running")if(t.state==="closed")await t.resume();else if(t.state==="suspended"){let e=Ce(t,"statechange");Ht(()=>t.resume()),await e}else Re(t.state)}document.title="No More Jabber Yabs: The Game";At(d("html, body, .cloud, .cloud-bit, .frowny, .shadow, .boop, .beam, .subBeam, .endMessage, #scoreBox",Ge("absolute")),d("html, body",k("100%"),N("100%"),q(0),Ue(0),Ve(0),ze("hidden")),d("body",he("sans-serif"),F("hsl(200, 50%, 75%)"),Be("linear-gradient(hsl(200, 50%, 50%), hsl(200, 20%, 75%) 75%, hsl(100, 75%, 50%) 75%, hsl(100, 100%, 20%))")),d("#scoreBox, .endMessage, .frowny, #instructions, #starter",He("24pt")),d("#scoreBox",A("none"),Y("white"),X(0),Fe(0),q("1em")),d(".endMessage",A("none"),q("1em"),X(0),Z(9001),Rt("none"),Y("white")),d(".cloud-bit",F("white"),N("100px"),k("50px"),vt("25px"),bt("50px"),wt("12.5px"),Tt("6.25px")),d(".frowny",he("fixedsys, monospace"),q("5px"),Ve("solid 2px black"),de("10px"),Pt("rotate(90deg)"),N("50px"),k("50px"),ze("hidden")),d(".shadow",N("45px"),k("10px"),de("5px"),Be("radial-gradient(black, transparent)"),F("grey")),d(".boop",A("none"),Y("white"),Lt("uppercase"),he("sans-serif"),De("bold"),He("10pt"),Z(9001)),d(".beam, .subBeam",A("none"),F("red"),yt("0 0 25px red"),Fe("0")),d(".beam",X("0"),N("50px"),k("50px"),de("50%")),d(".subBeam",X("50%"),k("2000px")),d("#instructions, #starter",Ge("relative"),A("none"),De("bold"),St("auto"),Ct("auto"),Mt("3em"),N("20em"),Z(9001)));function Ee(){return Ot(b("pointDisplay"),0)}J(document.body,It(L("starter"),"Start",kt(()=>V.resume())),v(L("instructions"),"Go ahead, click and hold the mouse"),v(L("scoreBox"),"GET EM: ",Ee()),v(L("message0"),b("endMessage"),p("You have killed everyone. You did it. Just you. Noone else."),p("And why have you done this? Because you were ordered to? The pursuit of points?"),p("You got your points. All ",Ee()," of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),p("For no reason whatsoever, you have committed genocide against another race of people. Congratulations."),p("Hitler.")),v(L("message1"),b("endMessage"),p("You have killed almost everyone. Their bodies are strewn about on the ground they once called their home."),p("There is but one person left. Did you spare them out of mercy? Or have you left them, devoid of personal contact, alone, surrounded by the burned and rotting bodies of their former loved ones, to serve as witness to your terrible deeds?"),p("And why have you done this? Because you were ordered to? The pursuit of points?"),p("You got your points. All ",Ee(),"  of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),p("You are sick.")),v(L("message2"),b("endMessage"),p("You have killed almost everyone. Their bodies are strewn about on the ground they once called their home."),p("There are only two people left. Did you spare them out of mercy? Or have you left them, surrounded by the burned and rotting bodies of their former loved ones, to repopulate their world together, to serve as witness to your terrible deeds to future generations?"),p("And why have you done this? Because you were ordered to? The pursuit of points?"),p("You got your points. All ",Ee(),"  of them. What will you do with them? There's noone left. And it's not like they took them as currency, anyway."),p("I...I don't understand you.")),v(L("messageN"),b("endMessage"),me(Y("black")),p('"Hi there!"'),p("You blink. Did someone speak?"),p('"Down here!"'),p("It's the people below."),p('"We noticed you up there. What are you doing?"'),p("You reply, haltingly, that you do not know."),p('"Oh, well, okay. Cool beans. Later!"')));var U=Math.round(window.innerWidth/30),Xt=Math.round(window.innerWidth/200),Hn=2,Gt=5e3,Dn=["#FFDFC4","#F0D5BE","#EECEB3","#E1B899","#E5C298","#FFDCB2","#E5B887","#E5A073","#E79E6D","#DB9065","#CE967C","#C67856","#BA6C49","#A57257","#F0C8C9","#DDA8A0","#B97C6D","#A8756C","#AD6452","#5C3836","#CB8442","#BD723C","#704139","#A3866A","#870400","#710101","#430000","#5B0001","#302E2E"],Fn=["ow!","yikes!","holy cow!","ouch!","that smarts!","ow!","yikes!","holy cow!","ouch!","that smarts!","ow!","yikes!","holy cow!","ouch!","that smarts!","mother puss-bucket!"],Un=[":)",":o",":^",":.",":P",":D"],zn=[":(",":(",":(",":(",":(",":(",":O"],te=ge("#instructions"),Kt=ge("#starter"),be=ge("#scoreBox"),$t=document.querySelectorAll(".pointDisplay"),ne=document.querySelectorAll(".endMessage"),V=new AudioContext,Zt=V.createGain(),B=new Array,Jt=new Array,ee=new Map,Gn=Math.pow(2,1/12),ye=!1,$e=1,je=null,We=0,Ye=1,jt=-1,P=0,ve=0,Wt,Yt;function Kn(t){return 440*Math.pow(Gn,t-49)}function T(t,e,n){let r=Jt[t];r&&(ee.has(r)&&(clearTimeout(ee.get(r)),ee.delete(r)),r.gain.value=e,ee.set(r,setTimeout(()=>{r.gain.value=0,ee.delete(r)},n*1e3)))}function h(t,e){return t+Math.random()*(e-t)}function y(t,e){return Math.floor(h(t,e))}function $n(t){let e=0;if(P>0?e=Math.floor(t/2e3%4)+Math.floor(t/1e3%2)/2:e=Math.floor(t/500%4)+Math.floor(t/250%3)/3,jt!==e){let n=.2;if(ct,e>=y(0,4)&&(e=Math.floor(e),n/=2),P>0){let r=25-Math.floor(e*4)+y(-1,2)*3;T(r,.04,n),T(r+3,.04,n),T(r+7,.04,n)}else{let r=40+Math.floor(e*3)+y(-1,2)*4;T(r,.04,.05),T(r+y(3,5),.04,.05)}}jt=e}function Te(t){t=t||document.body,t.style.transform="translate("+h(-4,4)+"px,"+h(-4,4)+"px)"}function jn(t){return t instanceof we}var we=class{constructor(){o(this,"element");o(this,"boop");o(this,"shadow");o(this,"alive");o(this,"hits");o(this,"onground");o(this,"x");o(this,"y");o(this,"z");o(this,"f");o(this,"dx");o(this,"dy");o(this,"df");o(this,"width");o(this,"height");o(this,"boopFor");o(this,"boopX");o(this,"boopY");o(this,"boopDX");o(this,"boopDY");this.alive=!0,this.hits=0,this.onground=!1,this.x=h(0,window.innerWidth),this.y=h(0,window.innerHeight/2),this.z=y(0,10),this.f=0,this.dx=h(-1,1),this.dy=0,this.df=h(.05,.1),this.element=v(b("frowny"),Nt(this.jump.bind(this,"boop")),Bt(this.jump.bind(this,"boop")),me(F(oe(Dn)),Z(this.z))),this.width=5,this.height=5,this.boop=v(b("boop"),"boop"),this.boopFor=0,this.boopX=0,this.boopY=0,this.boopDX=0,this.boopDY=0,this.shadow=v(b("shadow")),document.body.append(this.boop,this.shadow),this.render()}jump(e){this.onground&&(this.boop.innerHTML=e,this.dy=-5,this.onground=!1,this.boopX=this.x,this.boopY=this.y-125,this.boopDX=h(-.5,.5),this.boopDY=h(-.5,0),this.boopFor=100,T(30+3*y(0,5),.125,.05),ye=!0)}render(){this.boop.style.display=this.boopFor>0?"block":"none",this.boop.style.left=this.boopX+"px",this.boop.style.top=this.boopY+"px",this.boop.style.transform="scale("+(.5+this.boopFor/200)+")",this.shadow.style.left=this.element.style.left=this.x+"px",this.element.style.top=this.y+10*this.z-120+"px",this.shadow.style.top=10*this.z+window.innerHeight-120+"px";let e=Math.sqrt(Math.abs(this.dy))*10;this.element.style.paddingLeft=this.element.style.paddingRight=this.height+e+"px",this.element.style.paddingTop=this.element.style.paddingBottom=this.width-e+"px",this.alive&&this.f>1?(this.element.innerHTML=oe(P>0?zn:Un),this.f=0):this.alive||(this.element.innerHTML="X(")}update(e){this.boopFor-=e,this.boopX+=this.boopDX*e,this.boopY+=this.boopDY*e,this.x+=this.dx*e,this.y+=this.dy*e,this.f+=this.df*e,this.onground||(this.dy=this.dy+.1*e),(this.x<=0&&this.dx<0||this.x+this.element.clientWidth>=window.innerWidth&&this.dx>0)&&(this.dx*=-1),!this.onground&&this.y+this.element.clientHeight>=window.innerHeight&&this.dy>0&&(this.dy>2?this.dy*=-.5:(this.onground=!0,this.dy=0,this.alive||(this.dx=0)),T((P>0?10:20)+3*y(0,5),.125,.05),Te())}},qe=class{constructor(){o(this,"element");o(this,"x");o(this,"y");o(this,"dx");this.element=document.createElement("div"),this.element.className="cloud";let e=y(4,7);for(let n=0;n<e;++n){let r=document.createElement("div");r.className="cloud-bit",r.style.top=h(-25,25)+"px",r.style.left=h(-50,50)+"px",this.element.appendChild(r)}this.x=h(0,window.innerWidth),this.y=h(0,window.innerHeight/4)+50,this.dx=h(-.25,.25),this.element.style.zIndex=(-this.y).toFixed(0),this.render()}render(){this.element.style.left=this.x+"px",this.element.style.top=this.y+"px"}update(e){this.x+=this.dx*e,(this.x<=0&&this.dx<0||this.x+this.element.clientWidth>=window.innerWidth&&this.dx>0)&&(this.dx*=-1)}},Xe=class{constructor(){o(this,"element");o(this,"subBeam");o(this,"x");o(this,"y");o(this,"t");o(this,"charging");o(this,"firing");o(this,"enabled");this.x=0,this.y=0,this.t=0,this.charging=!1,this.firing=!1,this.enabled=!0,this.element=document.createElement("div"),this.element.className="beam",this.subBeam=document.createElement("div"),this.subBeam.className="subBeam",this.element.appendChild(this.subBeam)}disable(){this.enabled=!1}update(e){if(this.charging&&this.t<100?(this.t+=e,this.t>=100&&(this.firing=!0,qt&&clearTimeout(qt))):!this.charging&&this.t>0&&(this.t-=e/4,this.t<=0&&(this.firing=!1)),this.firing){Te(this.element);for(let n=0,r=this.t/10;n<r;++n)T(87-n,.02,e/100);for(let n=0;n<U;++n){let r=B[n];if(jn(r)&&r.alive&&r.onground)if(this.x<=r.x+50&&this.x+50>=r.x){if(P===0){be.style.display="block",document.body.style.backgroundImage="linear-gradient(hsl(0, 50%, 0%), hsl(0, 50%, 50%) 75%, hsl(0, 50%, 15%) 75%, hsl(0, 50%, 33%))";for(let i=0;i<Xt;++i){let u=B[U+i].element;for(let f=0;f<u.children.length;++f){let C=u.children[f].style;C.backgroundColor="black"}}}++P;for(let i=0;i<$t.length;++i)$t[i].innerHTML=P.toFixed(0);Te(r.element),++r.hits,r.hits>=Hn?(r.alive=!1,++ve,P+=10,ve===U-2?Wt=setTimeout(()=>{ne[2].style.display="block",be.style.display="none",this.disable()},Gt):ve===U-1?(clearTimeout(Wt),Yt=setTimeout(()=>{ne[1].style.display="block",be.style.display="none",this.disable()},Gt)):ve===U&&(clearTimeout(Yt),ne[0].style.display="block",be.style.display="none",this.disable())):r.element.style.transform+=" rotate(90deg)",r.jump(oe(Fn)),T(10+y(-1,2),.1,.05)}else this.x<=r.x+200&&this.x+200>=r.x&&(Te(r.element),r.element.style.transform+=" rotate(90deg)")}}else if(this.charging){let n=Math.floor(this.t/10)+70;for(let r=70;r<n;++r)T(r,.02,e/100)}}render(){this.element.style.display=this.charging||this.firing?"block":"none",this.subBeam.style.display=this.firing?"block":"none",this.element.style.left=this.x+"px",this.element.style.top=this.y+"px";let e="hsl(0, 100%, "+this.t+"%)";this.element.style.backgroundColor=this.subBeam.style.backgroundColor=e,this.element.style.boxShadow=this.subBeam.style.boxShadow="0 0 25px "+e,this.subBeam.style.width=this.t+"%",this.subBeam.style.left=(100-this.t)/2+"%",this.subBeam.style.opacity=(this.t/100).toFixed(3)}start(e){V.resume(),ye=!0,this.x=e.clientX-10,this.y=e.clientY-10,this.enabled&&(this.charging=!0)}end(){this.element.style.display="none",this.charging=!1,this.firing||(this.t=0)}move(e){this.x=e.clientX-10,this.y=e.clientY-10}};function Ze(t){return B.push(t),J(document.body,t),t}for(let t=0;t<88;++t){let e=V.createGain();e.gain.value=0;let n=V.createOscillator();n.frequency.value=Kn(t+1),n.type="sawtooth",n.start(),n.connect(e),e.connect(Zt),Jt.push(e)}for(let t=0;t<U;++t)Ze(new we);for(let t=0;t<Xt;++t)Ze(new qe);var S=Ze(new Xe);document.addEventListener("mousedown",S.start.bind(S),!1);document.addEventListener("mousemove",t=>{S.move(t),t.preventDefault()},!1);document.addEventListener("mouseup",S.end.bind(S),!1);document.addEventListener("touchstart",function(t){t.touches.length===1&&(S.start(t.touches[0]),t.preventDefault())},!1);document.addEventListener("touchmove",function(t){S.move(t.touches[0]),t.preventDefault()},!1);document.addEventListener("touchend",function(t){t.touches.length===0&&(S.end(),t.preventDefault())},!1);function Qt(t){if(requestAnimationFrame(Qt),$n(t),je!=null){for(We+=(t-je)/10;We>=Ye;){for(let e=0;e<B.length;++e)B[e].update(Ye);We-=Ye}for(let e=0;e<B.length;++e)B[e].render()}je=t,ye&&$e>0&&(te.style.opacity=(parseFloat(te.style.opacity)-.05).toFixed(3),$e-=.05,te.style.transform="scale("+Math.pow($e,.25)+")")}setTimeout(function(){ye=!0},5e3);var qt=setTimeout(function(){ne[ne.length-1].style.display="block",S.disable()},15e3);(async function(){Zt.connect(V.destination),te.style.opacity="1",Kt.style.display="block",await zt(V),Kt.style.display="none",te.style.display="block",requestAnimationFrame(Qt)})();
//# sourceMappingURL=index.min.js.map
