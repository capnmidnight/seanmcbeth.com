var wr=Object.defineProperty;var Cr=(n,e,t)=>e in n?wr(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var a=(n,e,t)=>(Cr(n,typeof e!="symbol"?e+"":e,t),t),hn=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var ne=(n,e,t)=>(hn(n,e,"read from private field"),t?t.call(n):e.get(n)),re=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},oe=(n,e,t,r)=>(hn(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);function xe(n,e){return n.splice(e,1)[0]}function X(n){return n.splice(0)}function ie(n,e){let t=n.indexOf(e);return t>-1?(xe(n,t),!0):!1}function gn(n,...e){for(let t of e)if(c(t))for(let[r,o]of t)n.set(r,o);return n}var Ue=class{constructor(e){a(this,"items",new Map);a(this,"defaultItems",new Array);if(c(e))for(let[t,r]of e)this.add(t,r)}add(e,t){if(x(e))this.defaultItems.push(t);else{let r=this.items.get(e);x(r)&&this.items.set(e,r=[]),r.push(t)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let t of e)yield t}has(e){return c(e)?this.items.has(e):this.defaultItems.length>0}get(e){return x(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(x(e))return this.defaultItems.length;let t=this.get(e);return c(t)?t.length:0}get size(){let e=this.defaultItems.length;for(let t of this.items.values())e+=t.length;return e}delete(e){return x(e)?X(this.defaultItems).length>0:this.items.delete(e)}remove(e,t){if(x(e))ie(this.defaultItems,t);else{let r=this.items.get(e);c(r)&&(ie(r,t),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),X(this.defaultItems)}};var Ge=class{constructor(e){a(this,"items",new Map);if(c(e))for(let[t,r,o]of e)this.add(t,r,o)}add(e,t,r){let o=this.items.get(e);return x(o)&&this.items.set(e,o=new Map),o.set(t,r),this}*entries(){for(let[e,t]of this.items)for(let[r,o]of t)yield[e,r,o]}keys(e){return x(e)?this.items.keys():this.items.get(e).keys()}*values(){for(let e of this.items.values())for(let t of e.values())yield t}has(e,t){return this.items.has(e)&&(x(t)||this.items.get(e).has(t))}get(e,t){return x(t)?this.items.get(e):this.items.has(e)?this.items.get(e).get(t):null}count(e){return this.items.has(e)?this.items.get(e).size:null}get size(){let e=0;for(let t of this.items.values())e+=t.size;return e}delete(e,t){return x(t)?this.items.delete(e):this.items.has(e)?this.items.get(e).delete(t):!1}clear(){this.items.clear()}};var fe=class{constructor(){a(this,"listeners",new Map);a(this,"listenerOptions",new Map)}addEventListener(e,t,r){if(S(t)){let o=this.listeners.get(e);o||(o=new Array,this.listeners.set(e,o)),o.find(i=>i===t)||(o.push(t),r&&this.listenerOptions.set(t,r))}}removeEventListener(e,t){if(S(t)){let r=this.listeners.get(e);r&&this.removeListener(r,t)}}clearEventListeners(e){for(let[t,r]of this.listeners)if(x(e)||e===t){for(let o of r)this.removeEventListener(e,o);X(r),this.listeners.delete(t)}}removeListener(e,t){let r=e.findIndex(o=>o===t);r>=0&&(xe(e,r),this.listenerOptions.has(t)&&this.listenerOptions.delete(t))}dispatchEvent(e){let t=this.listeners.get(e.type);if(t)for(let r of t){let o=this.listenerOptions.get(r);c(o)&&!J(o)&&o.once&&this.removeListener(t,r),r.call(this,e)}return!e.defaultPrevented}},_e=class extends Event{get type(){return super.type}constructor(e){super(e)}},Y=class extends fe{constructor(){super(...arguments);a(this,"bubblers",new Set);a(this,"scopes",new WeakMap)}addBubbler(t){this.bubblers.add(t)}removeBubbler(t){this.bubblers.delete(t)}addEventListener(t,r,o){super.addEventListener(t,r,o)}removeEventListener(t,r){super.removeEventListener(t,r)}clearEventListeners(t){return super.clearEventListeners(t)}addScopedEventListener(t,r,o,i){this.scopes.has(t)||this.scopes.set(t,[]),this.scopes.get(t).push([r,o]),this.addEventListener(r,o,i)}removeScope(t){let r=this.scopes.get(t);if(r){this.scopes.delete(t);for(let[o,i]of r)this.removeEventListener(o,i)}}dispatchEvent(t){if(!super.dispatchEvent(t))return!1;for(let r of this.bubblers)if(!r.dispatchEvent(t))return!1;return!0}};var C=class{constructor(e,t,r=!0){a(this,"promise");a(this,"_resolve",null);a(this,"_reject",null);a(this,"_result",null);a(this,"_error",null);a(this,"_started",!1);a(this,"_finished",!1);a(this,"resolve",null);a(this,"reject",null);let o=ze,i=ze;S(e)&&(o=e),S(t)&&(i=t),J(e)?r=e:J(t)&&(r=t),this.resolve=s=>{c(this._resolve)&&this._resolve(s)},this.reject=s=>{c(this._reject)&&this._reject(s)},this.promise=new Promise((s,u)=>{this._resolve=p=>{o(p)&&(this._result=p,this._finished=!0,s(p))},this._reject=p=>{i(p)&&(this._error=p,this._finished=!0,u(p))}}),r&&this.start()}get result(){if(c(this.error))throw this.error;return this._result}get error(){return this._error}get started(){return this._started}get finished(){return this._finished}start(){this._started=!0}get[Symbol.toStringTag](){return this.promise.toString()}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};function bn(n,e){return"on"+e in n}function Ke(n,e,t,...r){x(r)&&(r=[]);let o;if(P(t)?r.unshift(t):j(t)&&(o=t),!(n instanceof fe)){if(!bn(n,e))throw new Q(`Target does not have a ${e} rejection event`);for(let l of r)if(!bn(n,l))throw new Q(`Target does not have a ${l} rejection event`)}let i=new C;if(j(o)){let l=setTimeout(i.reject,o,`'${e}' has timed out.`);i.finally(clearTimeout.bind(globalThis,l))}let s=(l,v)=>{n.addEventListener(l,v),i.finally(()=>n.removeEventListener(l,v))},u=l=>i.resolve(l),p=l=>i.reject(l);s(e,u);for(let l of r)s(l,p);return i}var vn=class{constructor(e,t,r){a(this,"promise");a(this,"callback",null);this.promise=new Promise((o,i)=>{this.callback=(...s)=>{e(...s)?o(t(...s)):i(r(...s))}})}get[Symbol.toStringTag](){return this.promise.toString()}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};function Tn(n){let e=new C(n),t=setInterval(()=>{n()&&(clearInterval(t),e.resolve())},100);return e}var Q=class extends Error{constructor(t,r=null){super(t);this.innerError=r}};var Dr=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,qe=navigator.userAgent.match(Dr),We=!!qe,Da=We&&{major:parseFloat(qe[1]),minor:parseFloat(qe[2]),patch:parseFloat(qe[3])},Fa=We&&/pacific/i.test(navigator.userAgent),Ba=We&&/quest/i.test(navigator.userAgent),Xa=We&&/quest 2/i.test(navigator.userAgent);var $e=!("Document"in globalThis);var Fr=298.257223563,Br=6378137;var Rt=1/Fr,Ye=1-Rt,_=Rt/(2-Rt),Ha=Br/(1+_)*(1+_*_/4+_*_*_*_/64),Je=Math.sqrt(1-Ye*Ye),k=1-Ye*Ye,Ua=Je*Je/(1-Je*Je),Ga=1-k*(.25+k*(3/64+5*k/256)),za=k*(3/8+k*(3/32+45*k/1024)),Ka=k*k*(15/256+k*45/1024),qa=k*k*k*(35/3072),Wa=[_/2-2*_*_/3+37*_*_*_/96,_*_/48+_*_*_/15,17*_*_*_/480],$a=[2*_-2*_*_/3,7*_*_/3-8*_*_*_/5,56*_*_*_/15];function He(n){return n}function ze(){return!0}var gp=2*Math.PI;function En(n,e,t){return(1-t)*n+t*e}var he=class extends Y{constructor(){super(...arguments);a(this,"attached",new Array);a(this,"soFar",null);a(this,"total",null);a(this,"msg",null);a(this,"est",null)}get p(){return this.total>0?this.soFar/this.total:0}report(t,r,o,i){this.soFar=t,this.total=r,this.msg=o,this.est=i;for(let s of this.attached)s.report(t,r,o,i)}attach(t){this.attached.push(t),t.report(this.soFar,this.total,this.msg,this.est)}clear(){this.report(0,0),this._clear()}start(t){this.report(0,1,t||"starting")}end(t){this.report(1,1,t||"done"),this._clear()}_clear(){this.soFar=null,this.total=null,this.msg=null,this.est=null,X(this.attached)}};var ge=class extends he{constructor(t,r){super();this.i=t;this.prog=r}report(t,r,o,i){super.report(t,r,o,i),this.prog.update(this.i,t,r,o)}};var be=class{constructor(e){this.prog=e;a(this,"weightTotal",0);a(this,"start");a(this,"subProgressCallbacks",new Array);a(this,"subProgressWeights",new Array);a(this,"subProgressValues",new Array);this.start=performance.now();for(let t=0;t<this.subProgressWeights.length;++t)this.subProgressValues[t]=0,this.subProgressCallbacks[t]=new ge(t,this)}addSubProgress(e){e=e||1,this.weightTotal+=e,this.subProgressWeights.push(e),this.subProgressValues.push(0);let t=new ge(this.subProgressCallbacks.length,this);return this.subProgressCallbacks.push(t),t}update(e,t,r,o){if(this.prog){this.subProgressValues[e]=t/r;let i=0;for(let l=0;l<this.subProgressWeights.length;++l)i+=this.subProgressValues[l]*this.subProgressWeights[l];let s=performance.now(),u=s-this.start,p=this.start-s+u*this.weightTotal/i;this.prog.report(i,this.weightTotal,o,p)}}};function Mt(n){return c(n)&&S(n.report)&&S(n.attach)&&S(n.end)}function St(n,e){return new It(e,n).subProgressCallbacks}function An(n,e){let t=new Array(e);for(let r=0;r<e;++r)t[r]=1;return St(n,t)}var It=class extends be{constructor(e,t){super(t);for(let r of e)this.addSubProgress(r)}};function ve(n,e,t){return typeof n===e||n instanceof t}function S(n){return ve(n,"function",Function)}function P(n){return ve(n,"string",String)}function J(n){return ve(n,"boolean",Boolean)}function j(n){return ve(n,"number",Number)}function Z(n){return c(n)&&ve(n,"object",Object)}function Vt(n){return n instanceof Array}function R(n,e){throw new Error((e||"Unexpected object: ")+n)}function x(n){return n==null}function c(n){return!x(n)}function yn(n){return n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int8Array||n instanceof Uint16Array||n instanceof Int16Array||n instanceof Uint32Array||n instanceof Int32Array||n instanceof Float32Array||n instanceof Float64Array||"BigUint64Array"in globalThis&&n instanceof globalThis.BigUint64Array||"BigInt64Array"in globalThis&&n instanceof globalThis.BigInt64Array}function Rn(n){return n&&typeof ArrayBuffer!="undefined"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}var Pt=class{constructor(){a(this,"t",0);a(this,"dt",0);a(this,"sdt",0);a(this,"fps",0)}set(e,t){this.t=e,this.dt=t,this.sdt=En(this.sdt,t,.01),t>0&&(this.fps=1e3/t)}},Ze=class extends Pt{constructor(){super(),Object.seal(this)}};var Ee,Te=class{constructor(e){a(this,"timer",null);a(this,"onTick");a(this,"lt",-1);a(this,"tickHandlers",new Array);re(this,Ee,null);this.targetFPS=e;let t=new Ze,r=0;this.onTick=o=>{this.lt>=0&&(r=o-this.lt,t.set(o,r),this.tick(t)),this.lt=o}}get targetFPS(){return ne(this,Ee)}set targetFPS(e){oe(this,Ee,e)}addTickHandler(e){this.tickHandlers.push(e)}removeTickHandler(e){ie(this.tickHandlers,e)}tick(e){for(let t of this.tickHandlers)t(e)}restart(){this.stop(),this.start()}get isRunning(){return this.timer!=null}stop(){this.timer=null,this.lt=-1}get targetFrameTime(){return 1e3/this.targetFPS}};Ee=new WeakMap;function wt(n){return c(n)&&n.length>0?parseFloat(n):null}var Mn=class{constructor(e,t){a(this,"_url",null);a(this,"_base");a(this,"_protocol",null);a(this,"_host",null);a(this,"_hostName",null);a(this,"_userName",null);a(this,"_password",null);a(this,"_port",null);a(this,"_pathName",null);a(this,"_hash",null);a(this,"_query",new Map);e!==void 0&&(this._url=new URL(e,t),this.rehydrate())}rehydrate(){c(this._protocol)&&this._protocol!==this._url.protocol&&(this._url.protocol=this._protocol),c(this._host)&&this._host!==this._url.host&&(this._url.host=this._host),c(this._hostName)&&this._hostName!==this._url.hostname&&(this._url.hostname=this._hostName),c(this._userName)&&this._userName!==this._url.username&&(this._url.username=this._userName),c(this._password)&&this._password!==this._url.password&&(this._url.password=this._password),c(this._port)&&this._port.toFixed(0)!==this._url.port&&(this._url.port=this._port.toFixed(0)),c(this._pathName)&&this._pathName!==this._url.pathname&&(this._url.pathname=this._pathName),c(this._hash)&&this._hash!==this._url.hash&&(this._url.hash=this._hash);for(let[e,t]of this._query)this._url.searchParams.set(e,t);this._protocol=this._url.protocol,this._host=this._url.host,this._hostName=this._url.hostname,this._userName=this._url.username,this._password=this._url.password,this._port=wt(this._url.port),this._pathName=this._url.pathname,this._hash=this._url.hash,this._url.searchParams.forEach((e,t)=>this._query.set(t,e))}refresh(){if(this._url===null){if(c(this._protocol)&&(c(this._host)||c(this._hostName))){if(c(this._host))return this._url=new URL(`${this._protocol}//${this._host}`,this._base),this._port=wt(this._url.port),this.rehydrate(),!1;if(c(this._hostName))return this._url=new URL(`${this._protocol}//${this._hostName}`,this._base),this.rehydrate(),!1}else if(c(this._pathName)&&c(this._base))return this._url=new URL(this._pathName,this._base),this.rehydrate(),!1}return c(this._url)}base(e){if(this._url!==null)throw new Error("Cannot redefine base after defining the protocol and domain");return this._base=e,this.refresh(),this}protocol(e){return this._protocol=e,this.refresh()&&(this._url.protocol=e),this}host(e){return this._host=e,this.refresh()&&(this._url.host=e,this._hostName=this._url.hostname,this._port=wt(this._url.port)),this}hostName(e){return this._hostName=e,this.refresh()&&(this._url.hostname=e,this._host=`${this._url.hostname}:${this._url.port}`),this}port(e){return this._port=e,this.refresh()&&(this._url.port=e.toFixed(0),this._host=`${this._url.hostname}:${this._url.port}`),this}userName(e){return this._userName=e,this.refresh()&&(this._url.username=e),this}password(e){return this._password=e,this.refresh()&&(this._url.password=e),this}path(e){return this._pathName=e,this.refresh()&&(this._url.pathname=e),this}pathPop(e){return e=e||/\/[^\/]+\/?$/,this.path(this._pathName.replace(e,""))}pathPush(e){let t=this._pathName;return t.endsWith("/")||(t+="/"),t+=e,this.path(t)}query(e,t){return this._query.set(e,t),this.refresh()&&this._url.searchParams.set(e,t),this}hash(e){return this._hash=e,this.refresh()&&(this._url.hash=e),this}toURL(){return this._url}toString(){return this._url.href}[Symbol.toStringTag](){return this.toString()}};function Ct(n){let e=new Map;for(let[t,r]of n)e.set(r,t);return e}var jr=new Map([[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]]),Hr=new Map([[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]]),yl=Ct(jr),Rl=Ct(Hr);var In=304.79999999999995,Il=In*3,Ur=10*100,Gr=In*16.5,zr=Gr*40,Sl=Ur*1e3,Vl=zr*8,Sn=2.54*4,Vn=Sn*3,Pl=Vn*3,Kr=Vn*16.5,qr=Kr*40,wl=100*1e3,Cl=qr*8,kt=4*3,Wr=kt*3,Ot=100/2.54,$r=kt*16.5,Jr=$r*40,kl=Ot*1e3,Ol=Jr*8,Ll=3*3,Yr=100/Sn,Zr=3*16.5,Qr=Zr*40,Nl=Yr*1e3,Dl=Qr*8,Pn=Ot/kt,eo=16.5*40,Fl=Pn*1e3,Bl=eo*8,to=Ot/Wr,no=16.5/3,ro=no*40,Xl=to*1e3,jl=ro*8,wn=16.5/Pn,Cn=wn*40,Hl=Cn*8,Ul=1e3/wn,Gl=40*8,oo=1e3/Cn,zl=8/oo;function Lt(n,...e){if(!Z(n))return!1;n=n;for(let t of e){if(!(t in n))return!1;let r=n[t];if(!S(r))return!1}return!0}function io(n){return Lt(n,"dispose")}function so(n){return Lt(n,"destroy")}function ao(n){return Lt(n,"close")}function Nt(n){io(n)&&n.dispose(),ao(n)&&n.close(),so(n)&&n.destroy()}function kn(n,e){try{return e(n)}finally{Nt(n)}}var On=/([^\/]+)\/(.+)/,po=/(?:([^\.]+)\.)?([^\+;]+)(?:\+([^;]+))?((?:; *([^=]+)=([^;]+))*)/,ee=class{constructor(e,t,r){this._type=e;this._fullSubType=t;a(this,"_tree");a(this,"_subType");a(this,"_suffix");a(this,"_parameters");a(this,"_value");a(this,"_fullValue");a(this,"_extensions");a(this,"_primaryExtension",null);a(this,"depMessage",null);let o=new Map;this._parameters=o;let i=this._fullSubType.match(po);this._tree=i[1],this._subType=i[2],this._suffix=i[3];let s=i[4];if(this._value=this._fullValue=this._type+"/",c(this._tree)&&(this._value=this._fullValue+=this._tree+"."),this._value=this._fullValue+=this._subType,c(this._suffix)&&(this._value=this._fullValue+="+"+this._suffix),c(s)){let u=s.split(";").map(p=>p.trim()).filter(p=>p.length>0).map(p=>p.split("="));for(let[p,...l]of u){let v=l.join("=");o.set(p,v);let E=`; ${p}=${v}`;this._fullValue+=E,p!=="q"&&(this._value+=E)}}this._extensions=r||[],this._primaryExtension=this._extensions[0]||null}static parse(e){if(!e)return null;let t=e.match(On);if(!t)return null;let r=t[1],o=t[2];return new ee(r,o)}deprecate(e){return this.depMessage=e,this}check(){c(this.depMessage)&&console.warn(`${this._value} is deprecated ${this.depMessage}`)}matches(e){if(x(e))return!1;if(this.typeName==="*"&&this.subTypeName==="*")return!0;let t=null,r=null;if(P(e)){let o=e.match(On);if(!o)return!1;t=o[1],r=o[2]}else t=e.typeName,r=e._fullSubType;return this.typeName===t&&(this._fullSubType==="*"||this._fullSubType===r)}withParameter(e,t){let r=`${this._fullSubType}; ${e}=${t}`;return new ee(this.typeName,r,this.extensions)}get typeName(){return this.check(),this._type}get tree(){return this.check(),this._tree}get suffix(){return this._suffix}get subTypeName(){return this.check(),this._subType}get value(){return this.check(),this._value}__getValueUnsafe(){return this._value}get fullValue(){return this.check(),this._fullValue}get parameters(){return this.check(),this._parameters}get extensions(){return this.check(),this._extensions}__getExtensionsUnsafe(){return this._extensions}get primaryExtension(){return this.check(),this._primaryExtension}toString(){return this.parameters.get("q")==="1"?this.value:this.fullValue}addExtension(e){if(!e)throw new Error("File name is not defined");if(this.primaryExtension){let t=e.lastIndexOf(".");if(t>-1){let r=e.substring(t+1);this.extensions.indexOf(r)>-1&&(e=e.substring(0,t))}e=`${e}.${this.primaryExtension}`}return e}};function co(n,e,...t){return new ee(n,e,t)}function M(n){return co.bind(null,n)}var Dt=M("application");var Ae=Dt("javascript","js");var Ln=Dt("json","json");var Ft=Dt("wasm","wasm");var Nn=M("image");var Dn=Nn("png","png");var Su=Nn("vnd.google.streetview.pano");var Fn=M("text");var Bn=Fn("plain","txt","text","conf","def","list","log","in");var Xn=Fn("xml");var lo=M("video");var Bu=lo("vnd.mpeg.dash.mpd","mpd");async function V(n,e){let{status:t,path:r,content:o,contentType:i,contentLength:s,fileName:u,headers:p,date:l}=n;return{status:t,path:r,content:await e(o),contentType:i,contentLength:s,fileName:u,headers:p,date:l}}var Qe=class{constructor(e){this.impl=e;this.defaultPostHeaders=new Map}setRequestVerificationToken(e){this.defaultPostHeaders.set("RequestVerificationToken",e)}clearCache(){return this.impl.clearCache()}sendNothingGetNothing(e){return this.impl.sendNothingGetNothing(e)}sendNothingGetBlob(e,t){return this.impl.sendNothingGetSomething("blob",e,t)}sendObjectGetBlob(e,t){return this.impl.sendSomethingGetSomething("blob",e,this.defaultPostHeaders,t)}sendNothingGetBuffer(e,t){return this.impl.sendNothingGetSomething("arraybuffer",e,t)}sendObjectGetBuffer(e,t){return this.impl.sendSomethingGetSomething("arraybuffer",e,this.defaultPostHeaders,t)}sendNothingGetText(e,t){return this.impl.sendNothingGetSomething("text",e,t)}sendObjectGetText(e,t){return this.impl.sendSomethingGetSomething("text",e,this.defaultPostHeaders,t)}async sendNothingGetObject(e,t){return(await this.impl.sendNothingGetSomething("json",e,t)).content}async sendObjectGetObject(e,t){return(await this.impl.sendSomethingGetSomething("json",e,this.defaultPostHeaders,t)).content}sendObjectGetNothing(e,t){return this.impl.sendSomethingGetSomething("",e,this.defaultPostHeaders,t)}drawImageToCanvas(e,t,r){return this.impl.drawImageToCanvas(e,t,r)}async sendNothingGetFile(e,t){return V(await this.sendNothingGetBlob(e,t),URL.createObjectURL)}async sendObjectGetFile(e,t){return V(await this.sendObjectGetBlob(e,t),URL.createObjectURL)}async sendNothingGetXml(e,t){return V(await this.impl.sendNothingGetSomething("document",e,t),r=>r.documentElement)}async sendObjectGetXml(e,t){return V(await this.impl.sendSomethingGetSomething("document",e,this.defaultPostHeaders,t),r=>r.documentElement)}async sendNothingGetImageBitmap(e,t){return V(await this.sendNothingGetBlob(e,t),createImageBitmap)}async sendObjectGetImageBitmap(e,t){return V(await this.sendObjectGetBlob(e,t),createImageBitmap)}};function ye(n,e){return n.splice(e,1)[0]}function se(n){return n.splice(0)}function Bt(n,e){for(let t=0;t<n.length;++t)if(n[t]!==e[t])return t;return-1}function ae(n,e){let t=n.indexOf(e);return t>-1?(ye(n,t),!0):!1}function Re(n,e,t){return new Map(n.map(r=>[e(r),t(r)]))}var ce=class{constructor(e){this.items=new Map;this.defaultItems=new Array;if(m(e))for(let[t,r]of e)this.add(t,r)}add(e,t){if(b(e))this.defaultItems.push(t);else{let r=this.items.get(e);b(r)&&this.items.set(e,r=[]),r.push(t)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let t of e)yield t}has(e){return m(e)?this.items.has(e):this.defaultItems.length>0}get(e){return b(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(b(e))return this.defaultItems.length;let t=this.get(e);return m(t)?t.length:null}get size(){let e=this.defaultItems.length;for(let t of this.items.values())e+=t.length;return e}delete(e){return b(e)?se(this.defaultItems).length>0:this.items.delete(e)}remove(e,t){if(b(e))ae(this.defaultItems,t);else{let r=this.items.get(e);m(r)&&(ae(r,t),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),se(this.defaultItems)}};var Ie=class{constructor(e){this.items=new Map;if(m(e))for(let[t,r,o]of e)this.add(t,r,o)}add(e,t,r){let o=this.items.get(e);return b(o)&&this.items.set(e,o=new Map),o.set(t,r),this}*entries(){for(let[e,t]of this.items)for(let[r,o]of t)yield[e,r,o]}keys(e){return b(e)?this.items.keys():this.items.get(e).keys()}*values(){for(let e of this.items.values())for(let t of e.values())yield t}has(e,t){return this.items.has(e)&&(b(t)||this.items.get(e).has(t))}get(e,t){return b(t)?this.items.get(e):this.items.has(e)?this.items.get(e).get(t):null}count(e){return this.items.has(e)?this.items.get(e).size:null}get size(){let e=0;for(let t of this.items.values())e+=t.size;return e}delete(e,t){return b(t)?this.items.delete(e):this.items.has(e)?this.items.get(e).delete(t):!1}clear(){this.items.clear()}};var et=class{constructor(){this.listeners=new Map;this.listenerOptions=new Map}addEventListener(e,t,r){if(H(t)){let o=this.listeners.get(e);o||(o=new Array,this.listeners.set(e,o)),o.find(i=>i===t)||(o.push(t),r&&this.listenerOptions.set(t,r))}}removeEventListener(e,t){if(H(t)){let r=this.listeners.get(e);r&&this.removeListener(r,t)}}clearEventListeners(e){for(let[t,r]of this.listeners)if(b(e)||e===t){for(let o of r)this.removeEventListener(e,o);se(r),this.listeners.delete(t)}}removeListener(e,t){let r=e.findIndex(o=>o===t);r>=0&&(ye(e,r),this.listenerOptions.has(t)&&this.listenerOptions.delete(t))}dispatchEvent(e){let t=this.listeners.get(e.type);if(t)for(let r of t){let o=this.listenerOptions.get(r);m(o)&&!pe(o)&&o.once&&this.removeListener(t,r),r.call(this,e)}return!e.defaultPrevented}};var U=class{constructor(e,t,r=!0){this._resolve=null;this._reject=null;this._result=null;this._error=null;this._started=!1;this._finished=!1;this.resolve=null;this.reject=null;let o=Se,i=Se;H(e)&&(o=e),H(t)&&(i=t),pe(e)?r=e:pe(t)&&(r=t),this.resolve=s=>{m(this._resolve)&&this._resolve(s)},this.reject=s=>{m(this._reject)&&this._reject(s)},this.promise=new Promise((s,u)=>{this._resolve=p=>{o(p)&&(this._result=p,this._finished=!0,s(p))},this._reject=p=>{i(p)&&(this._error=p,this._finished=!0,u(p))}}),r&&this.start()}get result(){if(m(this.error))throw this.error;return this._result}get error(){return this._error}get started(){return this._started}get finished(){return this._finished}start(){this._started=!0}get[Symbol.toStringTag](){return this.promise.toString()}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};function jn(n,e){return"on"+e in n}function G(n,e,t,...r){b(r)&&(r=[]);let o;if(z(t)?r.unshift(t):Pe(t)&&(o=t),!(n instanceof et)){if(!jn(n,e))throw new Ve(`Target does not have a ${e} rejection event`);for(let l of r)if(!jn(n,l))throw new Ve(`Target does not have a ${l} rejection event`)}let i=new U;if(Pe(o)){let l=setTimeout(i.reject,o,`'${e}' has timed out.`);i.finally(clearTimeout.bind(globalThis,l))}let s=(l,v)=>{n.addEventListener(l,v),i.finally(()=>n.removeEventListener(l,v))},u=l=>i.resolve(l),p=l=>i.reject(l);s(e,u);for(let l of r)s(l,p);return i}function F(n){return n.then(Se).catch(Hn)}var Un=class{constructor(e,t,r){this.callback=null;this.promise=new Promise((o,i)=>{this.callback=(...s)=>{e(...s)?o(t(...s)):i(r(...s))}})}get[Symbol.toStringTag](){return this.promise.toString()}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var Ve=class extends Error{constructor(t,r=null){super(t);this.innerError=r}};var fo=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,tt=navigator.userAgent.match(fo),nt=!!tt,ax=nt&&{major:parseFloat(tt[1]),minor:parseFloat(tt[2]),patch:parseFloat(tt[3])},px=nt&&/pacific/i.test(navigator.userAgent),cx=nt&&/quest/i.test(navigator.userAgent),lx=nt&&/quest 2/i.test(navigator.userAgent);var ux=!("Document"in globalThis);var _o=298.257223563,ho=6378137;var Xt=1/_o,ot=1-Xt,h=Xt/(2-Xt),dx=ho/(1+h)*(1+h*h/4+h*h*h*h/64),rt=Math.sqrt(1-ot*ot),O=1-ot*ot,xx=rt*rt/(1-rt*rt),fx=1-O*(.25+O*(3/64+5*O/256)),_x=O*(3/8+O*(3/32+45*O/1024)),hx=O*O*(15/256+O*45/1024),gx=O*O*O*(35/3072),bx=[h/2-2*h*h/3+37*h*h*h/96,h*h/48+h*h*h/15,17*h*h*h/480],vx=[2*h-2*h*h/3,7*h*h/3-8*h*h*h/5,56*h*h*h/15];function Me(n){return n}function Se(){return!0}function Hn(){return!1}var Kx=2*Math.PI;function zn(n,e,t){return(1-t)*n+t*e}function st(n,e,t){return typeof n===e||n instanceof t}function H(n){return st(n,"function",Function)}function z(n){return st(n,"string",String)}function pe(n){return st(n,"boolean",Boolean)}function Pe(n){return st(n,"number",Number)}function it(n){return n instanceof Array}function b(n){return n==null}function m(n){return!b(n)}var jt=class{constructor(){this.t=0;this.dt=0;this.sdt=0;this.fps=0}set(e,t){this.t=e,this.dt=t,this.sdt=zn(this.sdt,t,.01),t>0&&(this.fps=1e3/t)}},at=class extends jt{constructor(){super(),Object.seal(this)}};var Ce,we=class{constructor(e){this.timer=null;this.lt=-1;this.tickHandlers=new Array;re(this,Ce,null);this.targetFPS=e;let t=new at,r=0;this.onTick=o=>{this.lt>=0&&(r=o-this.lt,t.set(o,r),this.tick(t)),this.lt=o}}get targetFPS(){return ne(this,Ce)}set targetFPS(e){oe(this,Ce,e)}addTickHandler(e){this.tickHandlers.push(e)}removeTickHandler(e){ae(this.tickHandlers,e)}tick(e){for(let t of this.tickHandlers)t(e)}restart(){this.stop(),this.start()}get isRunning(){return this.timer!=null}stop(){this.timer=null,this.lt=-1}get targetFrameTime(){return 1e3/this.targetFPS}};Ce=new WeakMap;function Ht(n){return m(n)&&n.length>0?parseFloat(n):null}var Kn=class{constructor(e,t){this._url=null;this._base=void 0;this._protocol=null;this._host=null;this._hostName=null;this._userName=null;this._password=null;this._port=null;this._pathName=null;this._hash=null;this._query=new Map;e!==void 0&&(this._url=new URL(e,t),this.rehydrate())}rehydrate(){m(this._protocol)&&this._protocol!==this._url.protocol&&(this._url.protocol=this._protocol),m(this._host)&&this._host!==this._url.host&&(this._url.host=this._host),m(this._hostName)&&this._hostName!==this._url.hostname&&(this._url.hostname=this._hostName),m(this._userName)&&this._userName!==this._url.username&&(this._url.username=this._userName),m(this._password)&&this._password!==this._url.password&&(this._url.password=this._password),m(this._port)&&this._port.toFixed(0)!==this._url.port&&(this._url.port=this._port.toFixed(0)),m(this._pathName)&&this._pathName!==this._url.pathname&&(this._url.pathname=this._pathName),m(this._hash)&&this._hash!==this._url.hash&&(this._url.hash=this._hash);for(let[e,t]of this._query)this._url.searchParams.set(e,t);this._protocol=this._url.protocol,this._host=this._url.host,this._hostName=this._url.hostname,this._userName=this._url.username,this._password=this._url.password,this._port=Ht(this._url.port),this._pathName=this._url.pathname,this._hash=this._url.hash,this._url.searchParams.forEach((e,t)=>this._query.set(t,e))}refresh(){if(this._url===null){if(m(this._protocol)&&(m(this._host)||m(this._hostName))){if(m(this._host))return this._url=new URL(`${this._protocol}//${this._host}`,this._base),this._port=Ht(this._url.port),this.rehydrate(),!1;if(m(this._hostName))return this._url=new URL(`${this._protocol}//${this._hostName}`,this._base),this.rehydrate(),!1}else if(m(this._pathName)&&m(this._base))return this._url=new URL(this._pathName,this._base),this.rehydrate(),!1}return m(this._url)}base(e){if(this._url!==null)throw new Error("Cannot redefine base after defining the protocol and domain");return this._base=e,this.refresh(),this}protocol(e){return this._protocol=e,this.refresh()&&(this._url.protocol=e),this}host(e){return this._host=e,this.refresh()&&(this._url.host=e,this._hostName=this._url.hostname,this._port=Ht(this._url.port)),this}hostName(e){return this._hostName=e,this.refresh()&&(this._url.hostname=e,this._host=`${this._url.hostname}:${this._url.port}`),this}port(e){return this._port=e,this.refresh()&&(this._url.port=e.toFixed(0),this._host=`${this._url.hostname}:${this._url.port}`),this}userName(e){return this._userName=e,this.refresh()&&(this._url.username=e),this}password(e){return this._password=e,this.refresh()&&(this._url.password=e),this}path(e){return this._pathName=e,this.refresh()&&(this._url.pathname=e),this}pathPop(e){return e=e||/\/[^\/]+\/?$/,this.path(this._pathName.replace(e,""))}pathPush(e){let t=this._pathName;return t.endsWith("/")||(t+="/"),t+=e,this.path(t)}query(e,t){return this._query.set(e,t),this.refresh()&&this._url.searchParams.set(e,t),this}hash(e){return this._hash=e,this.refresh()&&(this._url.hash=e),this}toURL(){return this._url}toString(){return this._url.href}[Symbol.toStringTag](){return this.toString()}};function Ut(n){let e=new Map;for(let[t,r]of n)e.set(r,t);return e}var Eo=new Map([[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]]),Ao=new Map([[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]]),ph=Ut(Eo),ch=Ut(Ao);var qn=304.79999999999995,uh=qn*3,yo=10*100,Ro=qn*16.5,Mo=Ro*40,mh=yo*1e3,dh=Mo*8,Wn=2.54*4,$n=Wn*3,xh=$n*3,Io=$n*16.5,So=Io*40,fh=100*1e3,_h=So*8,Gt=4*3,Vo=Gt*3,zt=100/2.54,Po=Gt*16.5,wo=Po*40,hh=zt*1e3,gh=wo*8,bh=3*3,Co=100/Wn,ko=3*16.5,Oo=ko*40,vh=Co*1e3,Th=Oo*8,Jn=zt/Gt,Lo=16.5*40,Eh=Jn*1e3,Ah=Lo*8,No=zt/Vo,Do=16.5/3,Fo=Do*40,yh=No*1e3,Rh=Fo*8,Yn=16.5/Jn,Zn=Yn*40,Mh=Zn*8,Ih=1e3/Yn,Sh=40*8,Bo=1e3/Zn,Vh=8/Bo;var le=class{constructor(e){this.db=e}static async getCurrentVersion(e){if(m(indexedDB.databases)){let t=await indexedDB.databases();for(let{name:r,version:o}of t)if(r===e)return o}return null}static delete(e){let t=indexedDB.deleteDatabase(e),r=G(t,"success","error","blocked");return F(r)}static async open(e,...t){let r=Re(t,I=>I.name,Me),o=new Ie(t.filter(I=>m(I.indexes)).flatMap(I=>I.indexes.map(w=>[I.name,w.name,w]))),i=new Array,s=new Array,u=new Array,p=new ce,l=new ce,v=await this.getCurrentVersion(e);if(b(v)){i.push(...r.keys());for(let I of t)if(m(I.indexes))for(let w of I.indexes)p.add(I.name,w.name)}else{let I=indexedDB.open(e);if(await F(G(I,"success","error","blocked"))){let w=I.result,q=new Array;for(let T of Array.from(w.objectStoreNames))r.has(T)||s.push(T);for(let T of r.keys())w.objectStoreNames.contains(T)?q.push(T):i.push(T);if(q.length>0){let T=w.transaction(q),W=G(T,"complete","error","abort"),$=F(W);for(let A of q){let yt=T.objectStore(A);for(let B of Array.from(yt.indexNames))o.has(A,B)||(u.indexOf(A)===-1&&u.push(A),l.add(A,B));if(o.has(A))for(let B of o.get(A).keys())if(!yt.indexNames.contains(B))u.indexOf(A)===-1&&u.push(A),p.add(A,B);else{let me=o.get(A,B),de=yt.index(B);(z(me.keyPath)!==z(de.keyPath)||z(me.keyPath)&&z(de.keyPath)&&me.keyPath!==de.keyPath||it(me.keyPath)&&it(de.keyPath)&&Bt(me.keyPath,de.keyPath))&&(u.indexOf(A)===-1&&u.push(A),l.add(A,B),p.add(A,B))}}T.commit(),await $}w.close()}(i.length>0||s.length>0||p.size>0||l.size>0)&&++v}let E=new U,f=m(v)?indexedDB.open(e,v):indexedDB.open(e),D=G(f,"success","error","blocked"),K=F(E),At=F(D),_n=()=>E.resolve(!1);if(f.addEventListener("success",_n),f.addEventListener("upgradeneeded",()=>{let I=G(f.transaction,"complete","error","abort"),w=f.result;for(let T of s)w.deleteObjectStore(T);let q=new Map;for(let T of i){let W=r.get(T),$=w.createObjectStore(T,W.options);q.set(T,$)}for(let T of u){let W=f.transaction.objectStore(T);q.set(T,W)}for(let[T,W]of q){for(let $ of l.get(T))W.deleteIndex($);for(let $ of p.get(T)){let A=o.get(T,$);W.createIndex($,A.keyPath,A.options)}}F(I).then(E.resolve).catch(E.reject).finally(()=>f.removeEventListener("success",_n))}),!await K)throw E.error;if(!await At)throw D.error;return new le(f.result)}dispose(){this.db.close()}get name(){return this.db.name}get version(){return this.db.version}get storeNames(){return Array.from(this.db.objectStoreNames)}getStore(e){return new Kt(this.db,e)}},Kt=class{constructor(e,t){this.db=e;this.storeName=t}async request(e,t){let r=this.db.transaction(this.storeName,t),o=G(r,"complete","error"),i=r.objectStore(this.storeName),s=e(i),u=G(s,"success","error");if(!await F(u))throw r.abort(),u.error;if(r.commit(),!await F(o))throw o.error;return s.result}add(e,t){return this.request(r=>r.add(e,t),"readwrite")}clear(){return this.request(e=>e.clear(),"readwrite")}getCount(e){return this.request(t=>t.count(e),"readonly")}delete(e){return this.request(t=>t.delete(e),"readwrite")}get(e){return this.request(t=>t.get(e),"readonly")}getAll(){return this.request(e=>e.getAll(),"readonly")}getAllKeys(){return this.request(e=>e.getAllKeys(),"readonly")}getKey(e){return this.request(t=>t.getKey(e),"readonly")}openCursor(e,t){return this.request(r=>r.openCursor(e,t),"readonly")}openKeyCursor(e,t){return this.request(r=>r.openKeyCursor(e,t),"readonly")}put(e,t){return this.request(r=>r.put(e,t),"readwrite")}};function Xo(n){return P(n)||yn(n)||n instanceof Blob||n instanceof FormData||Rn(n)||n instanceof ReadableStream||"Document"in globalThis&&n instanceof Document}function pt(n,e,t,r,o,i){let s=!i;i&&i.then(()=>s=!0);let u=!1,p=o,l=new C(()=>p&&u,()=>s);t.addEventListener("loadstart",()=>{s&&!u&&r&&r.start(n)}),t.addEventListener("progress",E=>{if(s&&!u){let f=E;r&&r.report(f.loaded,Math.max(f.loaded,f.total),n),f.loaded===f.total&&(p=!0,l.resolve())}}),t.addEventListener("load",()=>{s&&!u&&(r&&r.end(n),u=!0,l.resolve())});let v=E=>()=>l.reject(`${E} (${e.status})`);return t.addEventListener("error",v("error")),t.addEventListener("abort",v("abort")),t.addEventListener("timeout",v("timeout")),l}function qt(n,e,t,r,o,i){if(n.open(e,t),n.responseType="blob",n.timeout=r,o)for(let[s,u]of o)n.setRequestHeader(s,u);c(i)?n.send(i):n.send()}function ct(n,e,t){if(!n.has(e))return null;let r=n.get(e);try{let o=t(r);return n.delete(e),o}catch(o){console.warn(e,o)}return null}var jo=/filename=\"(.+)\"(;|$)/,Ho="Juniper:Fetcher:Cache",lt=class{constructor(){this.cache=null;this.store=null;this.tasks=new Ge;this.cacheReady=this.openCache()}async drawImageToCanvas(e,t,r){let o=await this.sendNothingGetSomething("blob",e,r),i=o.content;return kn(await createImageBitmap(i,{imageOrientation:"none"}),s=>(t.width=s.width,t.height=s.height,t.getContext("2d").drawImage(s,0,0),V(o,()=>null)))}async openCache(){this.cache=await le.open(Ho,{name:"files",options:{keyPath:"path"}}),this.store=await this.cache.getStore("files")}async clearCache(){await this.cacheReady,await this.store.clear()}async readResponseHeaders(e,t){let r=t.getAllResponseHeaders().split(/[\r\n]+/).map(f=>f.trim()).filter(f=>f.length>0).map(f=>{let D=f.split(": "),K=D.shift().toLowerCase(),At=D.join(": ");return[K,At]}),o=new Ue(r),i=Array.from(o.keys()).map(f=>[f,o.get(f).join(", ")]),s=new Map(i),u=ct(s,"content-type",He),p=ct(s,"content-length",parseFloat),l=ct(s,"date",f=>new Date(f)),v=ct(s,"content-disposition",f=>{if(c(f)){let D=f.match(jo);if(c(D))return D[1]}return null});return{status:t.status,path:e,content:void 0,contentType:u,contentLength:p,fileName:v,date:l,headers:s}}async readResponse(e,t){let{status:r,contentType:o,contentLength:i,fileName:s,date:u,headers:p}=await this.readResponseHeaders(e,t),l={path:e,status:r,contentType:o,contentLength:i,fileName:s,date:u,headers:p,content:t.response};return c(l.content)&&(l.contentType=l.contentType||l.content.type,l.contentLength=l.contentLength||l.content.size),l}async decodeContent(e,t){return V(t,async r=>{if(e==="")return null;if(x(t.contentType)){let o=Array.from(t.headers.entries()).map(i=>i.join(": ")).join(`
  `);throw new Error(`No content type found in headers: 
  `+o)}else{if(e==="blob")return r;if(e==="arraybuffer")return await r.arrayBuffer();if(e==="json"){let o=await r.text();return o.length>0?JSON.parse(o):null}else if(e==="document"){let o=new DOMParser;if(t.contentType==="application/xhtml+xml"||t.contentType==="text/html"||t.contentType==="application/xml"||t.contentType==="image/svg+xml"||t.contentType==="text/xml")return o.parseFromString(await r.text(),t.contentType);throw new Error("Couldn't parse document")}else{if(e==="text")return await r.text();R(e)}}})}async withCachedTask(e,t){return e.method!=="GET"&&e.method!=="HEAD"&&e.method!=="OPTIONS"?await t():(this.tasks.has(e.method,e.path)||this.tasks.add(e.method,e.path,t().finally(()=>this.tasks.delete(e.method,e.path))),this.tasks.get(e.method,e.path))}sendNothingGetNothing(e){return this.withCachedTask(e,async()=>{let t=new XMLHttpRequest,r=pt(`requesting: ${e.path}`,t,t,null,!0);return qt(t,e.method,e.path,e.timeout,e.headers),await r,await this.readResponseHeaders(e.path,t)})}sendNothingGetSomething(e,t,r){return this.withCachedTask(t,async()=>{let o=null,i=t.useCache&&t.method==="GET";i&&(c(r)&&r.start(),await this.cacheReady,o=await this.store.get(t.path));let s=x(o);if(s){let p=new XMLHttpRequest,l=pt(`requesting: ${t.path}`,p,p,r,!0);qt(p,t.method,t.path,t.timeout,t.headers),await l,o=await this.readResponse(t.path,p),i&&await this.store.add(o)}let u=await this.decodeContent(e,o);return s&&c(r)&&r.end(),u})}async sendSomethingGetSomething(e,t,r,o){let i=null,s=gn(new Map,r,t.headers);if(t.body instanceof FormData&&c(s)){let D=new Array;for(let K of s.keys())K.toLowerCase()==="content-type"&&D.push(K);for(let K of D)s.delete(K)}Xo(t.body)&&!P(t.body)?i=t.body:c(t.body)&&(i=JSON.stringify(t.body));let u=An(o,2),p=new XMLHttpRequest,l=c(i)?pt("uploading",p,p.upload,u.shift(),!1):Promise.resolve(),v=u.shift(),E=pt("saving",p,p,v,!0,l);qt(p,t.method,t.path,t.timeout,s,i),await l,await E;let f=await this.readResponse(t.path,p);return await this.decodeContent(e,f)}};var L=class{constructor(e,t,r,...o){this.key=e;this.value=t;this.bySetAttribute=r;this.tags=o.map(i=>i.toLocaleUpperCase()),Object.freeze(this)}applyToElement(e){let t=this.key.startsWith("data-");if(!(this.tags.length===0||this.tags.indexOf(e.tagName)>-1||t))console.warn(`Element ${e.tagName} does not support Attribute ${this.key}`);else if(t){let o=this.key.substring(5);e.dataset[o]=this.value}else this.key==="style"?Object.assign(e.style,this.value):this.key==="classList"?this.value.forEach(o=>e.classList.add(o)):this.bySetAttribute?e.setAttribute(this.key,this.value):this.key in e?e[this.key]=this.value:this.value===!1?e.removeAttribute(this.key):this.value===!0?e.setAttribute(this.key,""):e.setAttribute(this.key,this.value)}};function Wt(n){return new L("autoplay",n,!1,"audio","video")}function $t(n){return new L("controls",n,!1,"audio","video")}function Qn(n){return new L("height",n,!1,"canvas","embed","iframe","img","input","object","video")}function Jt(n){return new L("loop",n,!1,"audio","bgsound","marquee","video")}function Yt(n){return new L("muted",n,!1,"audio","video")}function Zt(n){return new L("playsInline",n,!1,"audio","video")}function Qt(n){return P(n)||(n=n.value),new L("type",n,!1,"button","input","command","embed","link","object","script","source","style","menu")}function er(n){return new L("width",n,!1,"canvas","embed","iframe","img","input","object","video")}var en=class{constructor(e,t){this.key=e;this.value=t;this.name=e.replace(/[A-Z]/g,r=>`-${r.toLocaleLowerCase()}`)}applyToElement(e){e.style[this.key]=this.value}},tn=class{constructor(...e){this.rest=e}applyToElement(e){for(let t of this.rest)t.applyToElement(e)}};function nn(...n){return new tn(...n)}function rn(n){return new en("display",n)}function tr(n){return Z(n)?n.element instanceof Node:!1}function Uo(n){return Z(n)&&"elements"in n&&n.elements instanceof Array}function on(n){return tr(n)?n.element:n}function Go(n){return Z(n)&&"applyToElement"in n&&S(n.applyToElement)}function zo(n,...e){n=on(n);for(let t of e)c(t)&&(t instanceof Node?n.append(t):tr(t)?n.append(on(t)):Uo(t)?n.append(...t.elements.map(on)):Go(t)?t.applyToElement(n):n.append(document.createTextNode(t.toLocaleString())));return n}function Ko(n){return document.querySelector(n)}function nr(n){return Ko(n)}function ke(n,...e){let t=null;for(let r of e)if(r instanceof L&&r.key==="id"){t=document.getElementById(r.value);break}return t==null&&(t=document.createElement(n)),zo(t,...e),t}function qo(...n){return ke("audio",...n)}function rr(...n){return ke("canvas",...n)}function sn(...n){return ke("img",...n)}function or(...n){return ke("script",...n)}function Wo(...n){return ke("video",...n)}function ir(n,e,t,...r){return qo(Zt(!0),$t(!1),Yt(e),Wt(n),Jt(t),nn(rn("none")),...r)}function sr(n,e,t,...r){return Wo(Zt(!0),$t(!1),Yt(e),Wt(n),Jt(t),nn(rn("none")),...r)}var ar="HTMLCanvasElement"in globalThis,wg="HTMLImageElement"in globalThis,pr=!1,Oe=!pr&&"OffscreenCanvas"in globalThis,$o=!pr&&"createImageBitmap"in globalThis;function Jo(){try{return new OffscreenCanvas(1,1).getContext("2d")!=null}catch{return!1}}var Yo=Oe&&Jo(),Zo=Yo&&ti||ar&&an||null;function Qo(){try{return new OffscreenCanvas(1,1).getContext("webgl2")!=null}catch{return!1}}var Cg=Oe&&Qo();function ei(){if(!ar&&!Oe)return!1;try{return Zo(1,1).getContext("bitmaprenderer")!=null}catch{return!1}}var kg=$o&&ei();function ti(n,e){return new OffscreenCanvas(n,e)}function an(n,e){return rr(er(n),Qn(e))}function cr(n,e){let t=n.getContext("2d");if(x(t))throw new Error("Could not create 2d context for canvas");t.drawImage(e,0,0)}var pn=null;function lr(n){return pn===null&&(pn=new Audio),pn.canPlayType(n)!==""}var ut=class{constructor(e,t,r){this.fetcher=e;this.method=t;a(this,"path");a(this,"request");a(this,"prog",null);this.path=r,this.request={method:t,path:this.path.href,body:null,headers:null,timeout:null,withCredentials:!1,useCache:!1}}query(e,t){return this.path.searchParams.set(e,t),this.request.path=this.path.href,this}header(e,t){return this.request.headers===null&&(this.request.headers=new Map),this.request.headers.set(e.toLowerCase(),t),this}timeout(e){return this.request.timeout=e,this}progress(e){return this.prog=e,this}body(e,t){return this.request.body=e,this.content(t),this}withCredentials(){return this.request.withCredentials=!0,this}useCache(e=!0){return this.request.useCache=e,this}media(e,t){c(t)&&(P(t)||(t=t.value),this.header(e,t))}content(e){this.media("content-type",e)}accept(e){this.media("accept",e)}blob(e){if(this.accept(e),this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE")return this.fetcher.sendObjectGetBlob(this.request,this.prog);if(this.method==="GET")return this.fetcher.sendNothingGetBlob(this.request,this.prog);if(this.method==="HEAD"||this.method==="OPTIONS")throw new Error(`${this.method} responses do not contain bodies`);R(this.method)}buffer(e){if(this.accept(e),this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE")return this.fetcher.sendObjectGetBuffer(this.request,this.prog);if(this.method==="GET")return this.fetcher.sendNothingGetBuffer(this.request,this.prog);if(this.method==="HEAD"||this.method==="OPTIONS")throw new Error(`${this.method} responses do not contain bodies`);R(this.method)}file(e){if(this.accept(e),this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE")return this.fetcher.sendObjectGetFile(this.request,this.prog);if(this.method==="GET")return this.fetcher.sendNothingGetFile(this.request,this.prog);if(this.method==="HEAD"||this.method==="OPTIONS")throw new Error(`${this.method} responses do not contain bodies`);R(this.method)}text(e){if(this.accept(e||Bn),this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE")return this.fetcher.sendObjectGetText(this.request,this.prog);if(this.method==="GET")return this.fetcher.sendNothingGetText(this.request,this.prog);if(this.method==="HEAD"||this.method==="OPTIONS")throw new Error(`${this.method} responses do not contain bodies`);R(this.method)}object(e){if(this.accept(e||Ln),this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE")return this.fetcher.sendObjectGetObject(this.request,this.prog);if(this.method==="GET")return this.fetcher.sendNothingGetObject(this.request,this.prog);if(this.method==="HEAD"||this.method==="OPTIONS")throw new Error(`${this.method} responses do not contain bodies`);R(this.method)}xml(e){if(this.accept(e||Xn),this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE")return this.fetcher.sendObjectGetXml(this.request,this.prog);if(this.method==="GET")return this.fetcher.sendNothingGetXml(this.request,this.prog);if(this.method==="HEAD"||this.method==="OPTIONS")throw new Error(`${this.method} responses do not contain bodies`);R(this.method)}imageBitmap(e){if(this.accept(e),this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE")return this.fetcher.sendObjectGetImageBitmap(this.request,this.prog);if(this.method==="GET")return this.fetcher.sendNothingGetImageBitmap(this.request,this.prog);if(this.method==="HEAD"||this.method==="OPTIONS")throw new Error(`${this.method} responses do not contain bodies`);R(this.method)}exec(){if(this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE")return this.fetcher.sendObjectGetNothing(this.request,this.prog);if(this.method==="GET")throw new Q("GET requests should expect a response type");if(this.method==="HEAD"||this.method==="OPTIONS")return this.fetcher.sendNothingGetNothing(this.request);R(this.method)}async audioBlob(e){if(c(e)&&(P(e)||(e=e.value),!lr(e)))throw new Error(`Probably can't play file of type "${e}" at path: ${this.request.path}`);let t=await this.blob(e);if(lr(t.contentType))return t;throw new Error(`Cannot play file of type "${t.contentType}" at path: ${this.request.path}`)}async audioBuffer(e,t){return V(await this.audioBlob(t),async r=>await e.decodeAudioData(await r.arrayBuffer()))}async htmlElement(e,t,r){let o=await this.file(r),i=Ke(e,t,"error");return e.src=o.content,await i,await V(o,()=>e)}image(e){return this.htmlElement(sn(),"load",e)}async canvas(e){let t=an(1,1);if(Oe)if(this.method==="GET"){this.accept(e);let r=await this.fetcher.drawImageToCanvas(this.request,t.transferControlToOffscreen(),this.prog);return await V(r,()=>t)}else{if(this.method==="POST"||this.method==="PUT"||this.method==="PATCH"||this.method==="DELETE"||this.method==="HEAD"||this.method==="OPTIONS")throw new Error(`${this.method} responses do not contain bodies`);R(this.method)}else{let r=await($e?this.imageBitmap(e):this.image(e));return await V(r,o=>(t.width=o.width,t.height=o.height,cr(t,o),Nt(o),t))}}audio(e,t,r){return this.htmlElement(ir(e,!1,t),"canplay",r)}video(e,t,r){return this.htmlElement(sr(e,!1,t),"canplay",r)}async getScript(){let e=or(Qt(Ae));document.body.append(e),await this.htmlElement(e,"load",Ae)}async script(e){if(!e)await this.getScript();else if(!e()){let t=Tn(e);await this.getScript(),await t}}async module(){let e=this.request.path,{content:t}=await this.file(Ae),r=await import(t);return this.prog&&this.prog.end(e),r}async wasm(e){let{content:t,contentType:r}=await this.buffer(Ft);if(!Ft.matches(r))throw new Error(`Server did not respond with WASM file. Was: ${r}`);let o=await WebAssembly.compile(t);return(await WebAssembly.instantiate(o,e)).exports}async worker(e="module"){let{content:t}=await this.file(Ae);return this.prog=null,this.request.timeout=null,new Worker(t,{type:e})}};var mt=class{constructor(e){this.service=e;if(!$e){let t=nr("input[name=__RequestVerificationToken]");t&&this.service.setRequestVerificationToken(t.value)}}createRequest(e,t,r){return new ut(this.service,e,new URL(t,r||location.href))}clearCache(){return this.service.clearCache()}head(e,t){return this.createRequest("HEAD",e,t)}options(e,t){return this.createRequest("OPTIONS",e,t)}get(e,t){return this.createRequest("GET",e,t)}post(e,t){return this.createRequest("POST",e,t)}put(e,t){return this.createRequest("PUT",e,t)}patch(e,t){return this.createRequest("PATCH",e,t)}delete(e,t){return this.createRequest("DELETE",e,t)}};var dt=class extends Y{constructor(t){super();this.worker=t;a(this,"taskCounter",0);a(this,"invocations",new Map);dt.isSupported||console.warn("Workers are not supported on this system."),this.worker.addEventListener("message",r=>{let o=r.data;switch(o.type){case"event":this.propogateEvent(o);break;case"progress":this.progressReport(o);break;case"return":this.methodReturned(o);break;case"error":this.invocationError(o);break;default:R(o)}})}postMessage(t,r){t.type!=="methodCall"&&R(t.type),r?this.worker.postMessage(t,r):this.worker.postMessage(t)}dispose(){this.worker.terminate()}propogateEvent(t){let r=new _e(t.eventName);this.dispatchEvent(Object.assign(r,t.data))}progressReport(t){let r=this.invocations.get(t.taskID),{prog:o}=r;o&&o.report(t.soFar,t.total,t.msg,t.est)}methodReturned(t){let r=this.removeInvocation(t.taskID),{resolve:o}=r;o(t.returnValue)}invocationError(t){let r=this.removeInvocation(t.taskID),{reject:o,methodName:i}=r;o(new Error(`${i} failed. Reason: ${t.errorMessage}`))}removeInvocation(t){let r=this.invocations.get(t);return this.invocations.delete(t),r}callMethod(t,r,o,i){if(!dt.isSupported)return Promise.reject(new Error("Workers are not supported on this system."));let s=null,u=null;Mt(r)&&(i=r,r=null,o=null),Mt(o)&&!i&&(i=o,o=null),Vt(r)&&(s=r),Vt(o)&&(u=o);let p=this.taskCounter++,l=new C,v={prog:i,resolve:l.resolve,reject:l.reject,methodName:t};this.invocations.set(p,v);let E=null;return c(r)?E={type:"methodCall",taskID:p,methodName:t,params:s}:E={type:"methodCall",taskID:p,methodName:t},this.postMessage(E,u),l}},Le=dt;a(Le,"isSupported","Worker"in globalThis);var Ne=class extends Y{constructor(t,r){super();a(this,"scriptPath");a(this,"taskCounter");a(this,"workers");this.scriptPath=t.scriptPath;let o=-1,i=t.workers,s=null;if(j(i)?o=i:c(i)?(this.taskCounter=i.curTaskCounter,s=i.workers,o=s.length):o=navigator.hardwareConcurrency||4,o<1)throw new Error("Worker pool size must be a postive integer greater than 0");if(this.workers=new Array(o),x(s)){this.taskCounter=0;for(let u=0;u<o;++u)this.workers[u]=new r(new Worker(this.scriptPath,{type:"module"}))}else for(let u=0;u<o;++u)this.workers[u]=new r(s[u]);for(let u of this.workers)u.addBubbler(this)}dispose(){for(let t of this.workers)t.dispose();X(this.workers)}nextWorker(){let t=this.peekWorker();return this.taskCounter++,t}peekWorker(){return this.workers[this.taskCounter%this.workers.length]}};a(Ne,"isSupported","Worker"in globalThis);function ni(n){return n==="application/xhtml+xml"||n==="application/xml"||n==="image/svg+xml"||n==="text/html"||n==="text/xml"}function ur(n){let{status:e,path:t,content:r,contentType:o,contentLength:i,fileName:s,headers:u,date:p}=n;if(!ni(o))throw new Error(`Content-Type ${o} is not one supported by the DOM parser.`);let v=new TextDecoder().decode(r),f=new DOMParser().parseFromString(v,o);return{status:e,path:t,content:f.documentElement,contentType:o,contentLength:i,fileName:s,date:p,headers:u}}function mr(n){let{status:e,path:t,content:r,contentType:o,contentLength:i,fileName:s,headers:u,date:p}=n,l=new Blob([r],{type:o});return{status:e,path:t,content:l,contentType:o,contentLength:i,fileName:s,date:p,headers:u}}function dr(n){return n={method:n.method,path:n.path,timeout:n.timeout,headers:n.headers,withCredentials:n.withCredentials,useCache:n.useCache},n}function ri(n){return n={method:n.method,path:n.path,body:n.body,timeout:n.timeout,headers:n.headers,withCredentials:n.withCredentials,useCache:n.useCache},n}var xt=class extends Le{setRequestVerificationToken(e){this.callMethod("setRequestVerificationToken",[e])}clearCache(){return this.callMethod("clearCache")}makeRequest(e,t,r){return this.callMethod(e,[dr(t)],r)}makeRequestWithBody(e,t,r){return this.callMethod(e,[ri(t)],r)}sendNothingGetNothing(e){return this.makeRequest("sendNothingGetNothing",e,null)}sendNothingGetBuffer(e,t){return this.makeRequest("sendNothingGetBuffer",e,t)}sendNothingGetText(e,t){return this.makeRequest("sendNothingGetText",e,t)}sendNothingGetObject(e,t){return this.makeRequest("sendNothingGetObject",e,t)}sendNothingGetFile(e,t){return this.makeRequest("sendNothingGetFile",e,t)}sendNothingGetImageBitmap(e,t){return this.makeRequest("sendNothingGetImageBitmap",e,t)}sendObjectGetNothing(e,t){return this.makeRequestWithBody("sendObjectGetNothing",e,t)}sendObjectGetBuffer(e,t){return this.makeRequestWithBody("sendObjectGetBuffer",e,t)}sendObjectGetText(e,t){return this.makeRequestWithBody("sendObjectGetText",e,t)}sendObjectGetObject(e,t){return this.makeRequestWithBody("sendObjectGetObject",e,t)}sendObjectGetFile(e,t){return this.makeRequestWithBody("sendObjectGetFile",e,t)}sendObjectGetImageBitmap(e,t){return this.makeRequestWithBody("sendObjectGetImageBitmap",e,t)}drawImageToCanvas(e,t,r){return this.callMethod("drawImageToCanvas",[dr(e),t],[t],r)}async sendNothingGetBlob(e,t){let r=await this.sendNothingGetBuffer(e,t);return mr(r)}async sendNothingGetXml(e,t){let r=await this.sendNothingGetBuffer(e,t);return ur(r)}async sendObjectGetBlob(e,t){let r=await this.sendObjectGetBuffer(e,t);return mr(r)}async sendObjectGetXml(e,t){let r=await this.sendObjectGetBuffer(e,t);return ur(r)}};var cn=class extends Ne{constructor(t,r,o){super(t,r);this.fetcher=o}getFetcher(t){return t instanceof FormData?this.fetcher:this.nextWorker()}setRequestVerificationToken(t){this.fetcher.setRequestVerificationToken(t);for(let r of this.workers)r.setRequestVerificationToken(t)}async clearCache(){await Promise.all(this.workers.map(t=>t.clearCache()))}sendNothingGetNothing(t){return this.nextWorker().sendNothingGetNothing(t)}sendNothingGetBlob(t,r){return this.nextWorker().sendNothingGetBlob(t,r)}sendNothingGetBuffer(t,r){return this.nextWorker().sendNothingGetBuffer(t,r)}sendNothingGetFile(t,r){return this.nextWorker().sendNothingGetFile(t,r)}sendNothingGetText(t,r){return this.nextWorker().sendNothingGetText(t,r)}sendNothingGetObject(t,r){return this.nextWorker().sendNothingGetObject(t,r)}sendNothingGetXml(t,r){return this.nextWorker().sendNothingGetXml(t,r)}sendNothingGetImageBitmap(t,r){return this.nextWorker().sendNothingGetImageBitmap(t,r)}drawImageToCanvas(t,r,o){return this.nextWorker().drawImageToCanvas(t,r,o)}sendObjectGetBlob(t,r){return this.getFetcher(t.body).sendObjectGetBlob(t,r)}sendObjectGetBuffer(t,r){return this.getFetcher(t.body).sendObjectGetBuffer(t,r)}sendObjectGetFile(t,r){return this.getFetcher(t.body).sendObjectGetFile(t,r)}sendObjectGetText(t,r){return this.getFetcher(t.body).sendObjectGetText(t,r)}sendObjectGetNothing(t,r){return this.getFetcher(t.body).sendObjectGetNothing(t,r)}sendObjectGetObject(t,r){return this.getFetcher(t.body).sendObjectGetObject(t,r)}sendObjectGetXml(t,r){return this.getFetcher(t.body).sendObjectGetXml(t,r)}sendObjectGetImageBitmap(t,r){return this.getFetcher(t.body).sendObjectGetImageBitmap(t,r)}},ft=class extends cn{};function _t(n,e){return n.splice(e,1)[0]}function De(n){return n.splice(0)}function ue(n,e){let t=n.indexOf(e);return t>-1?(_t(n,t),!0):!1}var xr=class{constructor(e){this.items=new Map;this.defaultItems=new Array;if(d(e))for(let[t,r]of e)this.add(t,r)}add(e,t){if(y(e))this.defaultItems.push(t);else{let r=this.items.get(e);y(r)&&this.items.set(e,r=[]),r.push(t)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let t of e)yield t}has(e){return d(e)?this.items.has(e):this.defaultItems.length>0}get(e){return y(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(y(e))return this.defaultItems.length;let t=this.get(e);return d(t)?t.length:0}get size(){let e=this.defaultItems.length;for(let t of this.items.values())e+=t.length;return e}delete(e){return y(e)?De(this.defaultItems).length>0:this.items.delete(e)}remove(e,t){if(y(e))ue(this.defaultItems,t);else{let r=this.items.get(e);d(r)&&(ue(r,t),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),De(this.defaultItems)}};var Be=class{constructor(e,t,r=!0){this._resolve=null;this._reject=null;this._result=null;this._error=null;this._started=!1;this._finished=!1;this.resolve=null;this.reject=null;let o=ht,i=ht;te(e)&&(o=e),te(t)&&(i=t),Fe(e)?r=e:Fe(t)&&(r=t),this.resolve=s=>{d(this._resolve)&&this._resolve(s)},this.reject=s=>{d(this._reject)&&this._reject(s)},this.promise=new Promise((s,u)=>{this._resolve=p=>{o(p)&&(this._result=p,this._finished=!0,s(p))},this._reject=p=>{i(p)&&(this._error=p,this._finished=!0,u(p))}}),r&&this.start()}get result(){if(d(this.error))throw this.error;return this._result}get error(){return this._error}get started(){return this._started}get finished(){return this._finished}start(){this._started=!0}get[Symbol.toStringTag](){return this.promise.toString()}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var _r=class{constructor(e,t,r){this.callback=null;this.promise=new Promise((o,i)=>{this.callback=(...s)=>{e(...s)?o(t(...s)):i(r(...s))}})}get[Symbol.toStringTag](){return this.promise.toString()}then(e,t){return this.promise.then(e,t)}catch(e){return this.promise.catch(e)}finally(e){return this.promise.finally(e)}};var ci=/OculusBrowser\/(\d+)\.(\d+)\.(\d+)/i,gt=navigator.userAgent.match(ci),bt=!!gt,bT=bt&&{major:parseFloat(gt[1]),minor:parseFloat(gt[2]),patch:parseFloat(gt[3])},vT=bt&&/pacific/i.test(navigator.userAgent),TT=bt&&/quest/i.test(navigator.userAgent),ET=bt&&/quest 2/i.test(navigator.userAgent);var hr=!("Document"in globalThis);var li=298.257223563,ui=6378137;var ln=1/li,Tt=1-ln,g=ln/(2-ln),yT=ui/(1+g)*(1+g*g/4+g*g*g*g/64),vt=Math.sqrt(1-Tt*Tt),N=1-Tt*Tt,RT=vt*vt/(1-vt*vt),MT=1-N*(.25+N*(3/64+5*N/256)),IT=N*(3/8+N*(3/32+45*N/1024)),ST=N*N*(15/256+N*45/1024),VT=N*N*N*(35/3072),PT=[g/2-2*g*g/3+37*g*g*g/96,g*g/48+g*g*g/15,17*g*g*g/480],wT=[2*g-2*g*g/3,7*g*g/3-8*g*g*g/5,56*g*g*g/15];function ht(){return!0}var eE=2*Math.PI;function br(n,e,t){return(1-t)*n+t*e}function vr(n,e,t){return typeof n===e||n instanceof t}function te(n){return vr(n,"function",Function)}function Fe(n){return vr(n,"boolean",Boolean)}function y(n){return n==null}function d(n){return!y(n)}var un=class{constructor(){this.t=0;this.dt=0;this.sdt=0;this.fps=0}set(e,t){this.t=e,this.dt=t,this.sdt=br(this.sdt,t,.01),t>0&&(this.fps=1e3/t)}},Et=class extends un{constructor(){super(),Object.seal(this)}};var je,Xe=class{constructor(e){this.timer=null;this.lt=-1;this.tickHandlers=new Array;re(this,je,null);this.targetFPS=e;let t=new Et,r=0;this.onTick=o=>{this.lt>=0&&(r=o-this.lt,t.set(o,r),this.tick(t)),this.lt=o}}get targetFPS(){return ne(this,je)}set targetFPS(e){oe(this,je,e)}addTickHandler(e){this.tickHandlers.push(e)}removeTickHandler(e){ue(this.tickHandlers,e)}tick(e){for(let t of this.tickHandlers)t(e)}restart(){this.stop(),this.start()}get isRunning(){return this.timer!=null}stop(){this.timer=null,this.lt=-1}get targetFrameTime(){return 1e3/this.targetFPS}};je=new WeakMap;function mn(n){return d(n)&&n.length>0?parseFloat(n):null}var Tr=class{constructor(e,t){this._url=null;this._base=void 0;this._protocol=null;this._host=null;this._hostName=null;this._userName=null;this._password=null;this._port=null;this._pathName=null;this._hash=null;this._query=new Map;e!==void 0&&(this._url=new URL(e,t),this.rehydrate())}rehydrate(){d(this._protocol)&&this._protocol!==this._url.protocol&&(this._url.protocol=this._protocol),d(this._host)&&this._host!==this._url.host&&(this._url.host=this._host),d(this._hostName)&&this._hostName!==this._url.hostname&&(this._url.hostname=this._hostName),d(this._userName)&&this._userName!==this._url.username&&(this._url.username=this._userName),d(this._password)&&this._password!==this._url.password&&(this._url.password=this._password),d(this._port)&&this._port.toFixed(0)!==this._url.port&&(this._url.port=this._port.toFixed(0)),d(this._pathName)&&this._pathName!==this._url.pathname&&(this._url.pathname=this._pathName),d(this._hash)&&this._hash!==this._url.hash&&(this._url.hash=this._hash);for(let[e,t]of this._query)this._url.searchParams.set(e,t);this._protocol=this._url.protocol,this._host=this._url.host,this._hostName=this._url.hostname,this._userName=this._url.username,this._password=this._url.password,this._port=mn(this._url.port),this._pathName=this._url.pathname,this._hash=this._url.hash,this._url.searchParams.forEach((e,t)=>this._query.set(t,e))}refresh(){if(this._url===null){if(d(this._protocol)&&(d(this._host)||d(this._hostName))){if(d(this._host))return this._url=new URL(`${this._protocol}//${this._host}`,this._base),this._port=mn(this._url.port),this.rehydrate(),!1;if(d(this._hostName))return this._url=new URL(`${this._protocol}//${this._hostName}`,this._base),this.rehydrate(),!1}else if(d(this._pathName)&&d(this._base))return this._url=new URL(this._pathName,this._base),this.rehydrate(),!1}return d(this._url)}base(e){if(this._url!==null)throw new Error("Cannot redefine base after defining the protocol and domain");return this._base=e,this.refresh(),this}protocol(e){return this._protocol=e,this.refresh()&&(this._url.protocol=e),this}host(e){return this._host=e,this.refresh()&&(this._url.host=e,this._hostName=this._url.hostname,this._port=mn(this._url.port)),this}hostName(e){return this._hostName=e,this.refresh()&&(this._url.hostname=e,this._host=`${this._url.hostname}:${this._url.port}`),this}port(e){return this._port=e,this.refresh()&&(this._url.port=e.toFixed(0),this._host=`${this._url.hostname}:${this._url.port}`),this}userName(e){return this._userName=e,this.refresh()&&(this._url.username=e),this}password(e){return this._password=e,this.refresh()&&(this._url.password=e),this}path(e){return this._pathName=e,this.refresh()&&(this._url.pathname=e),this}pathPop(e){return e=e||/\/[^\/]+\/?$/,this.path(this._pathName.replace(e,""))}pathPush(e){let t=this._pathName;return t.endsWith("/")||(t+="/"),t+=e,this.path(t)}query(e,t){return this._query.set(e,t),this.refresh()&&this._url.searchParams.set(e,t),this}hash(e){return this._hash=e,this.refresh()&&(this._url.hash=e),this}toURL(){return this._url}toString(){return this._url.href}[Symbol.toStringTag](){return this.toString()}};function dn(n){let e=new Map;for(let[t,r]of n)e.set(r,t);return e}var _i=new Map([[1,"KiB"],[2,"MiB"],[3,"GiB"],[4,"TiB"]]),hi=new Map([[1,"KB"],[2,"MB"],[3,"GB"],[4,"TB"]]),cy=dn(_i),ly=dn(hi);var Er=304.79999999999995,my=Er*3,gi=10*100,bi=Er*16.5,vi=bi*40,dy=gi*1e3,xy=vi*8,Ar=2.54*4,yr=Ar*3,fy=yr*3,Ti=yr*16.5,Ei=Ti*40,_y=100*1e3,hy=Ei*8,xn=4*3,Ai=xn*3,fn=100/2.54,yi=xn*16.5,Ri=yi*40,gy=fn*1e3,by=Ri*8,vy=3*3,Mi=100/Ar,Ii=3*16.5,Si=Ii*40,Ty=Mi*1e3,Ey=Si*8,Rr=fn/xn,Vi=16.5*40,Ay=Rr*1e3,yy=Vi*8,Pi=fn/Ai,wi=16.5/3,Ci=wi*40,Ry=Pi*1e3,My=Ci*8,Mr=16.5/Rr,Ir=Mr*40,Iy=Ir*8,Sy=1e3/Mr,Vy=40*8,ki=1e3/Ir,Py=8/ki;var Sr="1.0.1";var Vr=Sr;function Pr(n=!0){let e=new Qe(new lt);return!hr&&n&&(e=new ft({scriptPath:`/js/fetcher-worker/index.min.js?${Vr}`},xt,e)),new mt(e)}var Li=Pr(),Ni=["foxglove","juniper","marigold","poplar","primrose","wormwood"];Promise.all(Ni.map(n=>Li.get(`/img/logo_${n}.min.png`).image(Dn))).then(n=>n.map(e=>e.content)).then(n=>document.body.append(...n));
//# sourceMappingURL=index.min.js.map
