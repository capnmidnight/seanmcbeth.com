var K=Object.defineProperty;var Y=(t,e)=>{for(var o in e)K(t,o,{get:e[o],enumerable:!0})};function E(t,e,o){return typeof t===e||t instanceof o}function x(t){return E(t,"function",Function)}function c(t){return E(t,"string",String)}function h(t){return l(t)&&E(t,"object",Object)}function m(t){return t==null}function l(t){return!m(t)}function V(t){return t.splice(0)}function k(t,e){let o=t.indexOf(e);return o>-1?(X(t,o),!0):!1}function X(t,e){return t.splice(e,1)[0]}var M=class{constructor(e=!0){this.autoStart=e,this.onThens=new Array,this.onCatches=new Array,this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",this.resolve=o=>{if(this.running){this._result=o,this._resultState="resolved";for(let n of this.onThens)n(o);this.clear(),this._executionState="finished"}},this.reject=o=>{if(this.running){this._error=o,this._resultState="errored";for(let n of this.onCatches)n(o);this.clear(),this._executionState="finished"}},this.autoStart&&this.start()}clear(){V(this.onThens),V(this.onCatches)}start(){this._executionState="running"}resolver(e){return()=>this.resolve(e)}resolveOn(e,o,n){let r=this.resolver(n);e.addEventListener(o,r),this.finally(()=>e.removeEventListener(o,r))}get result(){if(l(this.error))throw this.error;return this._result}get error(){return this._error}get executionState(){return this._executionState}get waiting(){return this.executionState==="waiting"}get started(){return this.executionState!=="waiting"}get running(){return this.executionState==="running"}get finished(){return this.executionState==="finished"}get resultState(){return this._resultState}get resolved(){return this.resultState==="resolved"}get errored(){return this.resultState==="errored"}get[Symbol.toStringTag](){return this.toString()}project(){return new Promise((e,o)=>{this.finished?this.errored?o(this.error):e(this.result):(this.onThens.push(e),this.onCatches.push(o))})}then(e,o){return this.project().then(e,o)}catch(e){return this.project().catch(e)}finally(e){return this.project().finally(e)}reset(){this._reset(this.autoStart)}restart(){this._reset(!0)}_reset(e){this.running&&this.reject("Resetting previous invocation"),this.clear(),this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",e&&this.start()}};var I=new Map,C=class{constructor(e,o,n,...r){this.key=e;this.value=o;this.bySetAttribute=n;this.tags=r.map(i=>i.toLocaleUpperCase()),Object.freeze(this)}tags;applyToElement(e){if(this.tags.length>0&&this.tags.indexOf(e.tagName)===-1){let o=I.get(e.tagName);o||I.set(e.tagName,o=new Set),o.has(this.key)||(o.add(this.key),console.warn(`Element ${e.tagName} does not support Attribute ${this.key}`))}this.bySetAttribute?e.setAttribute(this.key,this.value.toString()):this.key in e?e[this.key]=this.value:this.value===!1?e.removeAttribute(this.key):this.value===!0?e.setAttribute(this.key,""):x(this.value)?this.value(e):e.setAttribute(this.key,this.value.toString())}};function Z(t,e,o,...n){return new C(t,e,o,...n)}function j(t){return t instanceof C}function R(t){return Z("id",t,!1)}function D(t){return h(t)?t.element instanceof Element:!1}function Q(t){return D(t)?t.element:c(t)?ot(t):t}function tt(t){return h(t)&&"applyToElement"in t&&x(t.applyToElement)}function et(t,...e){let o=t instanceof Element||t instanceof ShadowRoot?t:c(t)?document.querySelector(t):t.element,n=o instanceof HTMLTemplateElement?o.content:o;for(let r of e)l(r)&&(r instanceof Node?n.appendChild(r):D(r)?n.appendChild(Q(r)):tt(r)?o instanceof ShadowRoot||r.applyToElement(o):n.appendChild(document.createTextNode(r.toLocaleString())));return o}function ot(t){return document.querySelector(t)}function nt(t,...e){let o=null,n=e.filter(j).filter(r=>r.key==="id"||r.key==="query");for(let r of n)r.key==="query"?(o=r.value,k(e,r)):r.key==="id"&&(o=document.getElementById(r.value),o&&k(e,r));return o&&o.tagName!==t.toUpperCase()&&console.warn(`Expected a "${t.toUpperCase()}" element but found a "${o.tagName}".`),o||(o=document.createElement(t)),et(o,...e),o}function O(...t){return nt("canvas",...t)}var T=1e-6,f=typeof Float32Array<"u"?Float32Array:Array,B=Math.random;var Po=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var p={};Y(p,{add:()=>lt,angle:()=>kt,ceil:()=>ct,clone:()=>it,copy:()=>st,create:()=>F,cross:()=>ht,dist:()=>Ot,distance:()=>W,div:()=>Dt,divide:()=>H,dot:()=>bt,equals:()=>Lt,exactEquals:()=>Xt,floor:()=>dt,forEach:()=>Gt,fromValues:()=>pt,inverse:()=>vt,len:()=>It,length:()=>q,lerp:()=>Vt,max:()=>xt,min:()=>mt,mul:()=>Rt,multiply:()=>z,negate:()=>gt,normalize:()=>At,random:()=>Ct,rotate:()=>Pt,round:()=>ut,scale:()=>_t,scaleAndAdd:()=>ft,set:()=>at,sqrDist:()=>Bt,sqrLen:()=>Ft,squaredDistance:()=>N,squaredLength:()=>J,str:()=>Tt,sub:()=>jt,subtract:()=>G,transformMat2:()=>yt,transformMat2d:()=>wt,transformMat3:()=>St,transformMat4:()=>Et,zero:()=>Mt});function F(){var t=new f(2);return f!=Float32Array&&(t[0]=0,t[1]=0),t}function it(t){var e=new f(2);return e[0]=t[0],e[1]=t[1],e}function pt(t,e){var o=new f(2);return o[0]=t,o[1]=e,o}function st(t,e){return t[0]=e[0],t[1]=e[1],t}function at(t,e,o){return t[0]=e,t[1]=o,t}function lt(t,e,o){return t[0]=e[0]+o[0],t[1]=e[1]+o[1],t}function G(t,e,o){return t[0]=e[0]-o[0],t[1]=e[1]-o[1],t}function z(t,e,o){return t[0]=e[0]*o[0],t[1]=e[1]*o[1],t}function H(t,e,o){return t[0]=e[0]/o[0],t[1]=e[1]/o[1],t}function ct(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function dt(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function mt(t,e,o){return t[0]=Math.min(e[0],o[0]),t[1]=Math.min(e[1],o[1]),t}function xt(t,e,o){return t[0]=Math.max(e[0],o[0]),t[1]=Math.max(e[1],o[1]),t}function ut(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function _t(t,e,o){return t[0]=e[0]*o,t[1]=e[1]*o,t}function ft(t,e,o,n){return t[0]=e[0]+o[0]*n,t[1]=e[1]+o[1]*n,t}function W(t,e){var o=e[0]-t[0],n=e[1]-t[1];return Math.hypot(o,n)}function N(t,e){var o=e[0]-t[0],n=e[1]-t[1];return o*o+n*n}function q(t){var e=t[0],o=t[1];return Math.hypot(e,o)}function J(t){var e=t[0],o=t[1];return e*e+o*o}function gt(t,e){return t[0]=-e[0],t[1]=-e[1],t}function vt(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function At(t,e){var o=e[0],n=e[1],r=o*o+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=e[0]*r,t[1]=e[1]*r,t}function bt(t,e){return t[0]*e[0]+t[1]*e[1]}function ht(t,e,o){var n=e[0]*o[1]-e[1]*o[0];return t[0]=t[1]=0,t[2]=n,t}function Vt(t,e,o,n){var r=e[0],i=e[1];return t[0]=r+n*(o[0]-r),t[1]=i+n*(o[1]-i),t}function Ct(t,e){e=e||1;var o=B()*2*Math.PI;return t[0]=Math.cos(o)*e,t[1]=Math.sin(o)*e,t}function yt(t,e,o){var n=e[0],r=e[1];return t[0]=o[0]*n+o[2]*r,t[1]=o[1]*n+o[3]*r,t}function wt(t,e,o){var n=e[0],r=e[1];return t[0]=o[0]*n+o[2]*r+o[4],t[1]=o[1]*n+o[3]*r+o[5],t}function St(t,e,o){var n=e[0],r=e[1];return t[0]=o[0]*n+o[3]*r+o[6],t[1]=o[1]*n+o[4]*r+o[7],t}function Et(t,e,o){var n=e[0],r=e[1];return t[0]=o[0]*n+o[4]*r+o[12],t[1]=o[1]*n+o[5]*r+o[13],t}function Pt(t,e,o,n){var r=e[0]-o[0],i=e[1]-o[1],d=Math.sin(n),s=Math.cos(n);return t[0]=r*s-i*d+o[0],t[1]=r*d+i*s+o[1],t}function kt(t,e){var o=t[0],n=t[1],r=e[0],i=e[1],d=Math.sqrt(o*o+n*n)*Math.sqrt(r*r+i*i),s=d&&(o*r+n*i)/d;return Math.acos(Math.min(Math.max(s,-1),1))}function Mt(t){return t[0]=0,t[1]=0,t}function Tt(t){return"vec2("+t[0]+", "+t[1]+")"}function Xt(t,e){return t[0]===e[0]&&t[1]===e[1]}function Lt(t,e){var o=t[0],n=t[1],r=e[0],i=e[1];return Math.abs(o-r)<=T*Math.max(1,Math.abs(o),Math.abs(r))&&Math.abs(n-i)<=T*Math.max(1,Math.abs(n),Math.abs(i))}var It=q,jt=G,Rt=z,Dt=H,Ot=W,Bt=N,Ft=J,Gt=function(){var t=F();return function(e,o,n,r,i,d){var s,S;for(o||(o=2),n||(n=0),r?S=Math.min(r*o+n,e.length):S=e.length,s=n;s<S;s+=o)t[0]=e[s],t[1]=e[s+1],i(t,t,d),e[s]=t[0],e[s+1]=t[1];return e}}();var zt=p.create(),Ht=.1,y=class{force=0;turnRate=0;rotation=0;thrust=p.create();velocity=p.create();displacement=p.create();update(e){this.rotation+=e*this.turnRate*.005,p.set(this.thrust,1,0),p.rotate(this.thrust,this.thrust,zt,this.rotation),p.scale(this.thrust,this.thrust,this.force*e*5e-5),p.scaleAndAdd(this.thrust,this.thrust,this.velocity,-Ht*e*.001),p.scaleAndAdd(this.velocity,this.velocity,this.thrust,e),p.scaleAndAdd(this.displacement,this.displacement,this.velocity,e)}draw(e){e.save(),e.fillStyle="black",e.strokeStyle="white",e.lineWidth=.3,e.translate(this.displacement[0],this.displacement[1]),e.rotate(this.rotation),e.scale(5,5),e.beginPath(),e.moveTo(1,0),e.lineTo(-1,1),e.lineTo(-.5,0),e.lineTo(-1,-1),e.closePath(),e.stroke(),e.restore()}};function $(t){let e=!1;function o(){t.width=devicePixelRatio*t.clientWidth,t.height=devicePixelRatio*t.clientHeight,e=!1}new ResizeObserver(r=>{for(let i of r)i.target===t&&(e||(e=!0,queueMicrotask(o)))}).observe(t)}function U(t){let e=0;requestAnimationFrame(n=>{e=n,requestAnimationFrame(o)});function o(n){let r=n-e;e=n,requestAnimationFrame(o),t(r,n)}}var _=O(R("frontBuffer"));$(_);var u=_.getContext("2d"),w=new y,g=!1,v=!1,A=!1,b=!1;U(t=>{w.turnRate=g?-1:v?1:0,w.force=A?1:b?.5:0,w.update(t),u.save(),u.fillStyle="rgba(0, 0, 0, 0.5)",u.fillRect(0,0,_.width,_.height),u.translate(_.width*.5,_.height*.5),w.draw(u),u.restore()});window.addEventListener("keydown",t=>{g=g||t.key==="ArrowLeft",v=v||t.key==="ArrowRight",A=A||t.key==="ArrowUp",b=b||t.key==="ArrowDown"});window.addEventListener("keyup",t=>{g=g&&t.key!=="ArrowLeft",v=v&&t.key!=="ArrowRight",A=A&&t.key!=="ArrowUp",b=b&&t.key!=="ArrowDown"});
