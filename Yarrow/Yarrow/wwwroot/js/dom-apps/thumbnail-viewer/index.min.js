function m(e,t,n){return typeof e===t||e instanceof n}function s(e){return m(e,"function",Function)}function u(e){return m(e,"string",String)}function g(e){return l(e)&&m(e,"object",Object)}function c(e){return e==null}function l(e){return!c(e)}function p(e){return e.splice(0)}function L(e){return e}var a=class{constructor(t,n,r,...o){this.key=t;this.value=n;this.bySetAttribute=r;this.tags=o.map(S=>S.toLocaleUpperCase()),Object.freeze(this)}applyToElement(t){let n=this.key.startsWith("data-");if(!(this.tags.length===0||this.tags.indexOf(t.tagName)>-1||n))console.warn(`Element ${t.tagName} does not support Attribute ${this.key}`);else if(n){let o=this.key.substring(5);t.dataset[o]=this.value}else if(this.key==="style")Object.assign(t.style,this.value);else if(this.key==="classList"){let o=this.value.filter(L);o.length>0&&o.forEach(S=>t.classList.add(S))}else this.bySetAttribute?t.setAttribute(this.key,this.value):this.key in t?t[this.key]=this.value:this.value===!1?t.removeAttribute(this.key):this.value===!0?t.setAttribute(this.key,""):t.setAttribute(this.key,this.value)}};function x(e){return new a("className",e,!1)}function V(e){return new a("id",e,!1)}function C(e){return new a("title",e,!1)}var b=class{constructor(t){this._value=t}get value(){return this._value}toString(){return this.value}};var h=class extends b{constructor(n,r,o){super(o);this._name=n;this.sep=r}get name(){return this._name}toString(){return this.name+this.sep+this.value+";"}};var y=class extends h{constructor(t,n){super(t,": ",n)}},w=class extends y{constructor(n,r){super(n.replace(/[A-Z]/g,o=>`-${o.toLocaleLowerCase()}`),r.toString());this.key=n;this.priority=""}applyToElement(n){n.style[this.key]=this.value+this.priority}important(){return this.priority=" !important",this}get value(){return super.value+this.priority}};function k(e){return new w("display",e)}var E=class{constructor(t=!0){this.autoStart=t;this.onThens=new Array;this.onCatches=new Array;this._result=void 0;this._error=void 0;this._executionState="waiting";this._resultState="none";this.resolve=n=>{if(this.running){this._result=n,this._resultState="resolved";for(let r of this.onThens)r(n);this.clear(),this._executionState="finished"}},this.reject=n=>{if(this.running){this._error=n,this._resultState="errored";for(let r of this.onCatches)r(n);this.clear(),this._executionState="finished"}},this.autoStart&&this.start()}clear(){p(this.onThens),p(this.onCatches)}start(){this._executionState="running"}resolver(t){return()=>this.resolve(t)}resolveOn(t,n,r){let o=this.resolver(r);t.addEventListener(n,o),this.finally(()=>t.removeEventListener(n,o))}get result(){if(l(this.error))throw this.error;return this._result}get error(){return this._error}get executionState(){return this._executionState}get waiting(){return this.executionState==="waiting"}get started(){return this.executionState!=="waiting"}get running(){return this.executionState==="running"}get finished(){return this.executionState==="finished"}get resultState(){return this._resultState}get resolved(){return this.resultState==="resolved"}get errored(){return this.resultState==="errored"}get[Symbol.toStringTag](){return this.toString()}project(){return new Promise((t,n)=>{this.finished?this.errored?n(this.error):t(this.result):(this.onThens.push(t),this.onCatches.push(n))})}then(t,n){return this.project().then(t,n)}catch(t){return this.project().catch(t)}finally(t){return this.project().finally(t)}reset(){this._reset(this.autoStart)}restart(){this._reset(!0)}_reset(t){this.running&&this.reject("Resetting previous invocation"),this.clear(),this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",t&&this.start()}};function M(e){return g(e)?e.element instanceof Element:!1}function T(e){return M(e)?e.element:u(e)?z(e):e}function W(e){return g(e)&&"applyToElement"in e&&s(e.applyToElement)}function f(e,t,n=""){e=T(e),e.style.display=t?n:"none"}function P(e,...t){e=T(e);for(let n of t)l(n)&&(n instanceof Node?e.append(n):M(n)?e.append(T(n)):W(n)?n.applyToElement(e):e.append(document.createTextNode(n.toLocaleString())));return e}function z(e){return document.querySelector(e)}function v(e,...t){let n=null;for(let r of t)if(r instanceof a&&r.key==="id"){n=document.getElementById(r.value);break}return n==null&&(n=document.createElement(e)),P(n,...t),n}function I(...e){return v("div",...e)}function R(...e){return v("iframe",...e)}function A(...e){return v("img",...e)}function K(e,t){f(i,!0,"block"),f(D,!t,"block"),f(j,t,"block");let n=e.src.match(/\/file\/(\d+)$/);if(t&&n){let r=parseInt(n[1],10);j.src=`/Editor/PhotosphereViewer?FileID=${r}`}else D.src=e.src}function H(){i.style.display="none"}var G=new WeakSet;function F(){let e=Array.from(document.querySelectorAll(".thumbnail"));for(let t of e)G.has(t)||(t.addEventListener("click",()=>K(t,t.classList.contains("photosphere"))),G.add(t))}var O="33D0371F-B096-473D-AEE3-B17F5392CCEC",i=document.getElementById(O);i||(i=I(V(O),x("thumbnail-view"),k("none"),A(C("Thumbnail")),R(C("Preview"))));var D=i.querySelector("img"),j=i.querySelector("iframe");i.parentElement||(P(document.body,i),i.addEventListener("pointerleave",H),i.addEventListener("click",H));F();
