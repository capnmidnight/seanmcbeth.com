function M(t){return t}function u(t,o,e){return typeof t===o||t instanceof e}function l(t){return u(t,"function",Function)}function s(t){return u(t,"string",String)}function d(t){return c(t)&&u(t,"object",Object)}function a(t){return t==null}function c(t){return!a(t)}var C=new Map,x=class{constructor(o,e,r,...n){this.key=o,this.value=e,this.bySetAttribute=r,this.tags=n.map(G=>G.toLocaleUpperCase()),Object.freeze(this)}applyToElement(o){if(this.tags.length>0&&this.tags.indexOf(o.tagName)===-1){let e=C.get(o.tagName);e||C.set(o.tagName,e=new Set),e.has(this.key)||(e.add(this.key),console.warn(`Element ${o.tagName} does not support Attribute ${this.key}`))}this.bySetAttribute?o.setAttribute(this.key,this.value.toString()):this.key in o?o[this.key]=this.value:this.value===!1?o.removeAttribute(this.key):this.value===!0?o.setAttribute(this.key,""):l(this.value)?this.value(o):o.setAttribute(this.key,this.value.toString())}};function f(t,o,e,...r){return new x(t,o,e,...r)}function T(t){return t instanceof x}function A(...t){return t=t.filter(M),f("CLASS_LIST",o=>o.classList.add(...t),!1)}function j(t){return f("id",t,!1)}function v(t){return f("title",t,!1)}var g=class{constructor(o){this._value=o}get value(){return this._value}toString(){return this.value}};var V=class extends g{constructor(o,e,r){super(r),this._name=o,this.sep=e}get name(){return this._name}toString(){return this.name+this.sep+this.value+";"}};var h=class extends V{constructor(o,e){super(o,": ",e)}},b=class extends h{constructor(o,e){super(o.replace(/[A-Z]/g,r=>`-${r.toLocaleLowerCase()}`),e.toString()),this.key=o,this.priority=""}applyToElement(o){o.style[this.key]=this.value+this.priority}important(){return this.priority=" !important",this}get value(){return super.value+this.priority}};function P(t){return new b("display",t)}function m(t){return t.splice(0)}function y(t,o){let e=t.indexOf(o);return e>-1?(D(t,e),!0):!1}function D(t,o){return t.splice(o,1)[0]}var X=class{constructor(o=!0){this.autoStart=o,this.onThens=new Array,this.onCatches=new Array,this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",this.resolve=e=>{if(this.running){this._result=e,this._resultState="resolved";for(let r of this.onThens)r(e);this.clear(),this._executionState="finished"}},this.reject=e=>{if(this.running){this._error=e,this._resultState="errored";for(let r of this.onCatches)r(e);this.clear(),this._executionState="finished"}},this.autoStart&&this.start()}clear(){m(this.onThens),m(this.onCatches)}start(){this._executionState="running"}resolver(o){return()=>this.resolve(o)}resolveOn(o,e,r){let n=this.resolver(r);o.addEventListener(e,n),this.finally(()=>o.removeEventListener(e,n))}get result(){if(c(this.error))throw this.error;return this._result}get error(){return this._error}get executionState(){return this._executionState}get waiting(){return this.executionState==="waiting"}get started(){return this.executionState!=="waiting"}get running(){return this.executionState==="running"}get finished(){return this.executionState==="finished"}get resultState(){return this._resultState}get resolved(){return this.resultState==="resolved"}get errored(){return this.resultState==="errored"}get[Symbol.toStringTag](){return this.toString()}project(){return new Promise((o,e)=>{this.finished?this.errored?e(this.error):o(this.result):(this.onThens.push(o),this.onCatches.push(e))})}then(o,e){return this.project().then(o,e)}catch(o){return this.project().catch(o)}finally(o){return this.project().finally(o)}reset(){this._reset(this.autoStart)}restart(){this._reset(!0)}_reset(o){this.running&&this.reject("Resetting previous invocation"),this.clear(),this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",o&&this.start()}};function O(t){return d(t)?t.element instanceof Element:!1}function E(t){return O(t)?t.element:s(t)?H(t):t}function $(t){return d(t)&&"applyToElement"in t&&l(t.applyToElement)}function _(t,o,e=""){t=E(t),o?(t.style.removeProperty("display"),getComputedStyle(t).display==="none"&&(t.style.display=e||"block")):t.style.display="none"}function S(t,...o){let e=t instanceof Element||t instanceof ShadowRoot?t:s(t)?document.querySelector(t):t.element,r=e instanceof HTMLTemplateElement?e.content:e;for(let n of o)c(n)&&(n instanceof Node?r.appendChild(n):O(n)?r.appendChild(E(n)):$(n)?e instanceof ShadowRoot||n.applyToElement(e):r.appendChild(document.createTextNode(n.toLocaleString())));return e}function H(t){return document.querySelector(t)}function k(t,...o){let e=null,r=o.filter(T).filter(n=>n.key==="id"||n.key==="query");for(let n of r)n.key==="query"?(e=n.value,y(o,n)):n.key==="id"&&(e=document.getElementById(n.value),e&&y(o,n));return e&&e.tagName!==t.toUpperCase()&&console.warn(`Expected a "${t.toUpperCase()}" element but found a "${e.tagName}".`),e||(e=document.createElement(t)),S(e,...o),e}function R(...t){return k("div",...t)}function B(...t){return k("iframe",...t)}function L(...t){return k("img",...t)}function U(t,o){_(p,!0,"block"),_(W,!o,"block"),_(N,o,"block");let e=t.src.match(/\/file\/(\d+)$/);if(o&&e){let r=parseInt(e[1],10);N.src=`/Editor/PhotosphereViewer?FileID=${r}`}else W.src=t.src}function F(){p.style.display="none"}var z=new WeakSet;function J(){let t=document.querySelectorAll(".thumbnail");for(let o of t)z.has(o)||(o.addEventListener("click",()=>U(o,o.classList.contains("photosphere"))),z.add(o))}var q="33D0371F-B096-473D-AEE3-B17F5392CCEC",p=document.getElementById(q);p||(p=R(j(q),A("thumbnail-view"),P("none"),L(v("Thumbnail")),B(v("Preview"))));var W=p.querySelector("img"),N=p.querySelector("iframe");p.parentElement||(S(document.body,p),p.addEventListener("pointerleave",F),p.addEventListener("click",F));J();
