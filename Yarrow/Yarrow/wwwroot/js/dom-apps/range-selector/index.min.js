function E(t,e,n){return typeof t===e||t instanceof n}function S(t){return E(t,"string",String)}function T(t){return o(t)&&E(t,"object",Object)}function l(t){return t==null}function o(t){return!l(t)}function c(t){return t.splice(0)}function d(t,e){let n=t.indexOf(e);return n>-1?(v(t,n),!0):!1}function v(t,e){return t.splice(e,1)[0]}var y=class{constructor(e=!0){this.autoStart=e;this.onThens=new Array;this.onCatches=new Array;this._result=void 0;this._error=void 0;this._executionState="waiting";this._resultState="none";this.resolve=n=>{if(this.running){this._result=n,this._resultState="resolved";for(let r of this.onThens)r(n);this.clear(),this._executionState="finished"}},this.reject=n=>{if(this.running){this._error=n,this._resultState="errored";for(let r of this.onCatches)r(n);this.clear(),this._executionState="finished"}},this.autoStart&&this.start()}clear(){c(this.onThens),c(this.onCatches)}start(){this._executionState="running"}resolver(e){return()=>this.resolve(e)}resolveOn(e,n,r){let a=this.resolver(r);e.addEventListener(n,a),this.finally(()=>e.removeEventListener(n,a))}get result(){if(o(this.error))throw this.error;return this._result}get error(){return this._error}get executionState(){return this._executionState}get waiting(){return this.executionState==="waiting"}get started(){return this.executionState!=="waiting"}get running(){return this.executionState==="running"}get finished(){return this.executionState==="finished"}get resultState(){return this._resultState}get resolved(){return this.resultState==="resolved"}get errored(){return this.resultState==="errored"}get[Symbol.toStringTag](){return this.toString()}project(){return new Promise((e,n)=>{this.finished?this.errored?n(this.error):e(this.result):(this.onThens.push(e),this.onCatches.push(n))})}then(e,n){return this.project().then(e,n)}catch(e){return this.project().catch(e)}finally(e){return this.project().finally(e)}reset(){this._reset(this.autoStart)}restart(){this._reset(!0)}_reset(e){this.running&&this.reject("Resetting previous invocation"),this.clear(),this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",e&&this.start()}};function R(t){return T(t)?t.element instanceof Element:!1}function H(t){return R(t)?t.element:S(t)?A(t):t}function A(t){return document.querySelector(t)}function G(t){return Array.from(document.querySelectorAll(t))}function V(t){return G(t)}function B(t,e,n){t=H(t);let r=o(n),a=r&&t.classList.contains(n);r&&a!==e&&t.classList.toggle(n)}var p=class{constructor(e){this.items=new Map;this.defaultItems=new Array;if(o(e))for(let[n,r]of e)this.add(n,r)}add(e,...n){for(let r of n)if(l(e))this.defaultItems.push(r);else{let a=this.items.get(e);l(a)&&this.items.set(e,a=[]),a.push(r)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let e of this.defaultItems)yield e;for(let e of this.items.values())for(let n of e)yield n}has(e){return o(e)?this.items.has(e):this.defaultItems.length>0}get(e){return l(e)?this.defaultItems:this.items.get(e)||[]}count(e){if(l(e))return this.defaultItems.length;let n=this.get(e);return o(n)?n.length:0}get size(){let e=this.defaultItems.length;for(let n of this.items.values())e+=n.length;return e}delete(e){return l(e)?c(this.defaultItems).length>0:this.items.delete(e)}remove(e,n){if(l(e))d(this.defaultItems,n);else{let r=this.items.get(e);o(r)&&(d(r,n),r.length===0&&this.items.delete(e))}}clear(){this.items.clear(),c(this.defaultItems)}};var x=new p,C=new p,w=new p,b=new Map,D=V("input.range-selector"),M=new Map,m=new Map;for(let t of D){let e=t.dataset.rangename,n=g(t)?x:I(t)?C:k(t)?w:null;if(o(n)&&(n.add(e,t),!k(t))){t.name=e+(g(t)?"start":"end"),t.addEventListener("input",j),M.set(t.form,e),b.set(e,[null,null]);let r=t;for(;o(r)&&r.tagName!=="TABLE";)r=r.parentElement;o(r)&&r instanceof HTMLTableElement&&m.set(e,Array.from(r.querySelectorAll("tbody > tr")))}}for(let[t,e]of M)t.addEventListener("reset",()=>{b.set(e,[null,null]),[x,C].flatMap(n=>n.get(e)).forEach(n=>n.disabled=!1),m.has(e)&&m.get(e).forEach(n=>n.classList.remove("table-dark"))});function g(t){return t.classList.contains("range-selector-start")}function I(t){return t.classList.contains("range-selector-end")}function k(t){return t.classList.contains("range-selector-include")}function j(){let t=this.dataset.rangename,[e,n,r]=(g(this)?[x,C,w]:[C,x,w]).map(i=>i.get(t)),a=e.indexOf(this);for(let i=0;i<n.length;++i)n[i].disabled=g(this)&&i<a||I(this)&&i>a;let[u,s]=b.get(t);if(g(this)?(u=a,l(s)&&(s=u,n[s].checked=!0)):(s=a,l(u)&&(u=s,n[u].checked=!0)),b.set(t,[u,s]),o(u)&&o(s)){for(let i=0;i<r.length;++i)r[i].checked=u<=i&&i<=s;if(m.has(t)){let i=m.get(t);for(let f=0;f<i.length;++f)B(i[f],u<=f&&f<=s,"table-dark")}}}
