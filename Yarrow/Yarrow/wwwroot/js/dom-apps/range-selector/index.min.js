function S(o,t,e){return typeof o===t||o instanceof e}function d(o){return S(o,"string",String)}function h(o){return r(o)&&S(o,"object",Object)}function i(o){return o==null}function r(o){return!i(o)}function x(o){return o.splice(0)}function A(o,t){let e=o.indexOf(t);return e>-1?(k(o,e),!0):!1}function k(o,t){return o.splice(t,1)[0]}var m=class{constructor(t){if(this.items=new Map,this.defaultItems=new Array,r(t))for(let[e,n]of t)this.add(e,n)}add(t,...e){for(let n of e)if(i(t))this.defaultItems.push(n);else{let c=this.items.get(t);i(c)&&this.items.set(t,c=[]),c.push(n)}return this}entries(){return this.items.entries()}[Symbol.iterator](){return this.entries()}keys(){return this.items.keys()}*values(){for(let t of this.defaultItems)yield t;for(let t of this.items.values())for(let e of t)yield e}has(t){return r(t)?this.items.has(t):this.defaultItems.length>0}get(t){return i(t)?this.defaultItems:this.items.get(t)||[]}count(t){if(i(t))return this.defaultItems.length;let e=this.get(t);return r(e)?e.length:0}get size(){let t=this.defaultItems.length;for(let e of this.items.values())t+=e.length;return t}delete(t){return i(t)?x(this.defaultItems).length>0:this.items.delete(t)}remove(t,e){if(i(t))A(this.defaultItems,e);else{let n=this.items.get(t);r(n)&&(A(n,e),n.length===0&&this.items.delete(t))}}clear(){this.items.clear(),x(this.defaultItems)}};var y=class{constructor(t=!0){this.autoStart=t,this.onThens=new Array,this.onCatches=new Array,this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",this.resolve=e=>{if(this.running){this._result=e,this._resultState="resolved";for(let n of this.onThens)n(e);this.clear(),this._executionState="finished"}},this.reject=e=>{if(this.running){this._error=e,this._resultState="errored";for(let n of this.onCatches)n(e);this.clear(),this._executionState="finished"}},this.autoStart&&this.start()}clear(){x(this.onThens),x(this.onCatches)}start(){this._executionState="running"}resolver(t){return()=>this.resolve(t)}resolveOn(t,e,n){let c=this.resolver(n);t.addEventListener(e,c),this.finally(()=>t.removeEventListener(e,c))}get result(){if(r(this.error))throw this.error;return this._result}get error(){return this._error}get executionState(){return this._executionState}get waiting(){return this.executionState==="waiting"}get started(){return this.executionState!=="waiting"}get running(){return this.executionState==="running"}get finished(){return this.executionState==="finished"}get resultState(){return this._resultState}get resolved(){return this.resultState==="resolved"}get errored(){return this.resultState==="errored"}get[Symbol.toStringTag](){return this.toString()}project(){return new Promise((t,e)=>{this.finished?this.errored?e(this.error):t(this.result):(this.onThens.push(t),this.onCatches.push(e))})}then(t,e){return this.project().then(t,e)}catch(t){return this.project().catch(t)}finally(t){return this.project().finally(t)}reset(){this._reset(this.autoStart)}restart(){this._reset(!0)}_reset(t){this.running&&this.reject("Resetting previous invocation"),this.clear(),this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",t&&this.start()}};function D(o){return h(o)?o.element instanceof Element:!1}function E(o){return D(o)?o.element:d(o)?O(o):o}function O(o){return document.querySelector(o)}function R(o){return Array.from(document.querySelectorAll(o))}function C(o){return R(o)}function I(o,t,e){o=E(o);let n=r(e),c=n&&o.classList.contains(e);n&&c!==t&&o.classList.toggle(e)}var v=new m,g=new m,X=new m,V=new Map,B=C("input.range-selector"),j=new Map,f=new Map;for(let o of B){let t=o.dataset.rangename,e=u(o)?v:P(o)?g:T(o)?X:null;if(r(e)&&(e.add(t,o),!T(o))){o.name=t+(u(o)?"start":"end"),o.addEventListener("input",L),j.set(o.form,t),V.set(t,[null,null]);let n=o;for(;r(n)&&n.tagName!=="TABLE";)n=n.parentElement;r(n)&&n instanceof HTMLTableElement&&f.set(t,Array.from(n.querySelectorAll("tbody > tr")))}}for(let[o,t]of j)o.addEventListener("reset",()=>{V.set(t,[null,null]),[v,g].flatMap(e=>e.get(t)).forEach(e=>e.disabled=!1),f.has(t)&&f.get(t).forEach(e=>e.classList.remove("table-dark"))});function u(o){return o.classList.contains("range-selector-start")}function P(o){return o.classList.contains("range-selector-end")}function T(o){return o.classList.contains("range-selector-include")}function L(){let o=this.dataset.rangename,[t,e,n]=(u(this)?[v,g,X]:[g,v,X]).map(p=>p.get(o)),c=t.indexOf(this);for(let p=0;p<e.length;++p)e[p].disabled=u(this)&&p<c||P(this)&&p>c;let[a,l]=V.get(o);if(u(this)?(a=c,i(l)&&(l=a,e[l].checked=!0)):(l=c,i(a)&&(a=l,e[a].checked=!0)),V.set(o,[a,l]),r(a)&&r(l)){for(let p=0;p<n.length;++p)n[p].checked=a<=p&&p<=l;if(f.has(o)){let p=f.get(o);for(let _=0;_<p.length;++_)I(p[_],a<=_&&_<=l,"table-dark")}}}
