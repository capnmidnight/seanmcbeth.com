function b(e,t,n){return typeof e===t||e instanceof n}function l(e){return b(e,"string",String)}function h(e){return i(e)&&b(e,"object",Object)}function p(e){return e==null}function i(e){return!p(e)}function f(e){return e.splice(0)}var a=class{constructor(t=!0){this.autoStart=t;this.onThens=new Array;this.onCatches=new Array;this._result=void 0;this._error=void 0;this._executionState="waiting";this._resultState="none";this.resolve=n=>{if(this.running){this._result=n,this._resultState="resolved";for(let r of this.onThens)r(n);this.clear(),this._executionState="finished"}},this.reject=n=>{if(this.running){this._error=n,this._resultState="errored";for(let r of this.onCatches)r(n);this.clear(),this._executionState="finished"}},this.autoStart&&this.start()}clear(){f(this.onThens),f(this.onCatches)}start(){this._executionState="running"}resolver(t){return()=>this.resolve(t)}resolveOn(t,n,r){let o=this.resolver(r);t.addEventListener(n,o),this.finally(()=>t.removeEventListener(n,o))}get result(){if(i(this.error))throw this.error;return this._result}get error(){return this._error}get executionState(){return this._executionState}get waiting(){return this.executionState==="waiting"}get started(){return this.executionState!=="waiting"}get running(){return this.executionState==="running"}get finished(){return this.executionState==="finished"}get resultState(){return this._resultState}get resolved(){return this.resultState==="resolved"}get errored(){return this.resultState==="errored"}get[Symbol.toStringTag](){return this.toString()}project(){return new Promise((t,n)=>{this.finished?this.errored?n(this.error):t(this.result):(this.onThens.push(t),this.onCatches.push(n))})}then(t,n){return this.project().then(t,n)}catch(t){return this.project().catch(t)}finally(t){return this.project().finally(t)}reset(){this._reset(this.autoStart)}restart(){this._reset(!0)}_reset(t){this.running&&this.reject("Resetting previous invocation"),this.clear(),this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",t&&this.start()}};function L(e){return h(e)?e.element instanceof Element:!1}function V(e){return L(e)?e.element:l(e)?u(e):e}function g(e,t,n=""){e=V(e),e.style.display=t?n:"none"}function u(e){return document.querySelector(e)}function s(e){return u(e)}function d(e){return u(e)}var S=class{constructor(t){this.msgBox=t;this.task=new a(!1);this.msgBoxConfirm=this.msgBox.querySelector("button.confirm"),this.msgBoxCancel=this.msgBox.querySelector("button.cancel"),this.msgBoxConfirm.addEventListener("click",this.task.resolver(!0)),this.msgBoxCancel.addEventListener("click",this.task.resolver(!1))}async show(){return this.task.restart(),g(this.msgBox,!0,"block"),await this.task,g(this.msgBox,!1),this.task.result}};function x(e,t,n){let r=s(e),o=u(t);if(r&&o){let c=new S(o);c&&r.addEventListener("click",async()=>{r.form.action=r.form.action.replace(/handler=\w+/,`handler=${n}`),await c.show()&&r.form.submit()},!0)}}function E(e,t=1,n=1,r=.01){t*=1e3,n*=1e3,r*=1e3;let o=t+n,c=setInterval(()=>{o-=r;let C=o>n?1:o/n;e.style.opacity=`${Math.min(100,C*100)}%`,o===0&&(e.style.display="none",clearInterval(c))},r)}function T(){let e=Array.from(document.querySelectorAll(".alert"));for(let t of e)t.style.display!=="none"&&E(t,2,.5)}var P=s("#saveDetailButton"),B=s("#deleteDetailButton"),v=d("#nameInput")||d("#headsetName");T();if(P){let e=function(){P.disabled=v.value.length===0};x("#saveDetailButton","#saveDetailMessage","Update"),e(),v.addEventListener("input",()=>e())}B&&x("#deleteDetailButton","#deleteDetailMessage","Delete");
