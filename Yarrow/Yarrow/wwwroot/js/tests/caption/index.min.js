function f(e,t,n){return typeof e===t||e instanceof n}function u(e){return f(e,"function",Function)}function a(e){return f(e,"string",String)}function S(e){return l(e)&&f(e,"object",Object)}function s(e){return e==null}function l(e){return!s(e)}function c(e){return e.splice(0)}function C(e){return e}var o=class{constructor(t,n,r,...i){this.key=t;this.value=n;this.bySetAttribute=r;this.tags=i.map(p=>p.toLocaleUpperCase()),Object.freeze(this)}applyToElement(t){let n=this.key.startsWith("data-");if(!(this.tags.length===0||this.tags.indexOf(t.tagName)>-1||n))console.warn(`Element ${t.tagName} does not support Attribute ${this.key}`);else if(n){let i=this.key.substring(5);t.dataset[i]=this.value}else if(this.key==="style")Object.assign(t.style,this.value);else if(this.key==="classList"){let i=this.value.filter(C);i.length>0&&i.forEach(p=>t.classList.add(p))}else this.bySetAttribute?t.setAttribute(this.key,this.value):this.key in t?t[this.key]=this.value:this.value===!1?t.removeAttribute(this.key):this.value===!0?t.setAttribute(this.key,""):t.setAttribute(this.key,this.value)}};function b(e){return new o("controls",e,!1,"audio","video")}function h(e){return new o("default",e,!1,"track")}function y(e){return new o("kind",e,!1,"track")}function w(e){return new o("label",e,!1,"optgroup","option","track")}function E(e){return new o("preload",e,!1,"audio","video")}function R(e){return e instanceof URL&&(e=e.href),e}function d(e){return new o("src",R(e),!1,"audio","embed","iframe","img","input","script","source","track","video")}function T(e){return new o("srclang",e,!1,"track")}var m=class{constructor(t=!0){this.autoStart=t;this.onThens=new Array;this.onCatches=new Array;this._result=void 0;this._error=void 0;this._executionState="waiting";this._resultState="none";this.resolve=n=>{if(this.running){this._result=n,this._resultState="resolved";for(let r of this.onThens)r(n);this.clear(),this._executionState="finished"}},this.reject=n=>{if(this.running){this._error=n,this._resultState="errored";for(let r of this.onCatches)r(n);this.clear(),this._executionState="finished"}},this.autoStart&&this.start()}clear(){c(this.onThens),c(this.onCatches)}start(){this._executionState="running"}resolver(t){return()=>this.resolve(t)}resolveOn(t,n,r){let i=this.resolver(r);t.addEventListener(n,i),this.finally(()=>t.removeEventListener(n,i))}get result(){if(l(this.error))throw this.error;return this._result}get error(){return this._error}get executionState(){return this._executionState}get waiting(){return this.executionState==="waiting"}get started(){return this.executionState!=="waiting"}get running(){return this.executionState==="running"}get finished(){return this.executionState==="finished"}get resultState(){return this._resultState}get resolved(){return this.resultState==="resolved"}get errored(){return this.resultState==="errored"}get[Symbol.toStringTag](){return this.toString()}project(){return new Promise((t,n)=>{this.finished?this.errored?n(this.error):t(this.result):(this.onThens.push(t),this.onCatches.push(n))})}then(t,n){return this.project().then(t,n)}catch(t){return this.project().catch(t)}finally(t){return this.project().finally(t)}reset(){this._reset(this.autoStart)}restart(){this._reset(!0)}_reset(t){this.running&&this.reject("Resetting previous invocation"),this.clear(),this._result=void 0,this._error=void 0,this._executionState="waiting",this._resultState="none",t&&this.start()}};function L(e){return S(e)?e.element instanceof Element:!1}function v(e){return L(e)?e.element:a(e)?A(e):e}function I(e){return S(e)&&"applyToElement"in e&&u(e.applyToElement)}function x(e,...t){e=v(e);for(let n of t)l(n)&&(n instanceof Node?e.append(n):L(n)?e.append(v(n)):I(n)?n.applyToElement(e):e.append(document.createTextNode(n.toLocaleString())));return e}function A(e){return document.querySelector(e)}function V(e,...t){let n=null;for(let r of t)if(r instanceof o&&r.key==="id"){n=document.getElementById(r.value);break}return n==null&&(n=document.createElement(e)),x(n,...t),n}function B(...e){return V("track",...e)}function k(...e){return V("video",...e)}var M=k(d("/videos/sintel-short.mp4"),b(!0),E("metadata"),B(w("English"),y("subtitles"),T("en"),d("/videos/sintel-en.vtt"),h(!0)));for(let e of Array.from(M.textTracks))e.addEventListener("cuechange",()=>{for(let t of Array.from(e.activeCues))t instanceof VTTCue&&console.log(t.text)});x("main",M);
