var d=new URL(globalThis.location.href),g=d.searchParams.has("DEBUG"),f=g?".js":".min.js";function E(t,r,n){return typeof t===r||t instanceof n}function u(t){return E(t,"string",String)}function p(t){return t instanceof Array}async function y(t,r,...n){let o=null;u(r)||p(r)?n.unshift(r):o=r;function a(e){if(o){let l=0,i=0;for(let c of s)l+=c.soFar,i+=c.total;o(l,i,e)}}let s=n.map(e=>{let l=null,i=null;return u(e)?i=e:(i=e[0],l=e[1]),i=!i.startsWith("$")?i:i.substr(1),i=`/js/${i}/index${t}`,{prog:function(m,b){this.soFar=m,this.total=b,a(this.path)},path:i,test:l,soFar:0,total:0,result:null}});t===".min.js"&&await Promise.all(s.map(x));for(let e of s)await A(e);return s.map(e=>e.result).filter(e=>!!e)}async function x(t){t.path=await h(t.path,t.prog)}function h(t,r){let n=new XMLHttpRequest;return n.responseType="blob",n.open("GET",t),r&&(n.onloadstart=()=>r(0,0),n.onprogress=o=>r(o.loaded||1,o.total||1)),new Promise((o,a)=>{n.onloadend=()=>o(URL.createObjectURL(n.response)),n.onerror=()=>a(`(${n.status}) ${t}`),n.send()})}async function A(t){if(t.test){let r=document.createElement("script");r.src=t.path,document.head.append(r),await new Promise((n,o)=>{let a=0,s=setInterval(()=>{++a,(t.result=t.test())?(clearInterval(s),n()):a>3&&(clearInterval(s),o("TIMEOUT"))},100)})}else t.result=(await import(t.path)).default}function T(t,r,n){console.log(n,(100*t/(r||1)).toFixed(1)+"%")}(async function(){let[t,r]=await y(f,T,["three",()=>globalThis.THREE],"editor");await r()})();
